;/*FB_PKG_DELIM*/

__d("LSWriteToPendingBackupsContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(177).add({pk:void 0,pendingBackupTaskId:a[0],persistentId:a[1],actionType:a[2],contentType:a[3],backupStatus:a[4],listKey:a[5],uniqueKey:a[6],sortKey:a[7],echoContent:a[8],lsTraceId:a[9],error:a[13],echoEncodingLatencyNs:a[14]})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSIssueMessageBackup",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop","LSWriteToPendingBackupsContext"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueMessageBackup] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,h){var i=e.done;e=e.value;return i?(d[12]=c.createArray(),d[15]=(d[12].push("Skipping the message upload since EB is disabled. act thread id = "),d[12]),d[15]=(d[12].push(a[0]),d[12]),d[15]=(d[12].push(", otid = "),d[12]),d[15]=(d[12].push(a[1]),d[12]),d[13]=d[12].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageBackup] ","",d[13]].join("")),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,1])),d[14].set("stored_procedure","LSEncryptedBackupsIssueMessageBackupStoredProcedure"),d[14].set("error_message",""),i=[f,d[14]],d[2]=i[0],d[3]=i[1],i):(h=e.item,c.seq([function(a){return d[18]=h.backupTenancy,d[17]=h.encryptionVersion,c.i64.neq(f,f)?c.resolve(d[12]=f):c.seq([function(a){return d[19]=c.createArray(),c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[29]=(d[19].push(c.i64.cast([0,0])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[29]=(d[19].push(c.i64.cast([0,2])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[29]=(d[19].push(c.i64.cast([0,3])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[29]=(d[19].push(c.i64.cast([0,4])),d[19]):0,d[24]=c.createArray(),d[25]=c.i64.of_int32(d[19].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[29]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[19],d[29]).then(function(a){return a=a,d[30]=a[0],d[31]=a[1],a})},function(a){return d[32]=(d[24].push(d[30]),d[24])}])}):c.resolve()},function(a){return c.seq([function(a){return d[29]=c.createArray(),d[30]=c.i64.of_int32(d[24].length),c.i64.gt(d[30],c.i64.cast([0,0]))?c.loopAsync(d[30],function(a){return d[32]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[24],d[32]).then(function(a){return a=a,d[33]=a[0],d[34]=a[1],a})},function(a){return d[35]=(d[29].push(c.i64.to_string(d[33])),d[29])}])}):c.resolve()},function(a){return d[31]=d[29].join(","),d[26]=d[31]}])},function(a){return d[24].some(function(a){return c.i64.eq(d[17],a)})?d[27]=d[17]:d[27]=f,c.i64.neq(d[27],f)?d[28]=d[27]:d[28]=f,d[12]=d[28]}])},function(e){return c.i64.neq(d[12],f)?d[13]=d[12]:d[13]=c.i64.cast([0,0]),c.i64.neq(d[18],f)?d[14]=d[18]:d[14]=c.i64.cast([0,1]),c.i64.neq(h.deviceId,f)?c.seq([function(e){var h;return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueMessageBackupStoredProcedure] Skip processing attachments as not enabled."),e=[f,f],d[19]=e[0],d[20]=e[1],e,c.i64.eq(d[14],c.i64.cast([0,3]))?d[21]=c.i64.cast([0,4]):d[21]=c.i64.cast([0,0]),d[22]=c.i64.of_float(Date.now()),c.sp(b("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",a[0]].join(""),c.i64.cast([0,50026]),"",f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,93]),f,c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[22],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[22],c.i64.cast([0,0]))))).then(function(a){return a=a,d[23]=a[0],a})},function(e){return c.sp(b("LSWriteToPendingBackupsContext"),d[23],"",c.i64.cast([0,1]),c.i64.cast([0,1]),c.i64.cast([0,1]),a[0],a[1],c.i64.to_string(c.i64.add(c.i64.mul(c.i64.div(a[2],c.i64.cast([0,1e3])),c.i64.cast([0,1e3])),c.i64.div(c.i64.mod_(c.i64.and_(c.i64.asr_(c.i64.from_string(a[1]),c.i64.to_int32(c.i64.cast([0,22]))),c.i64.cast([511,4294967295])),c.i64.cast([0,1e5])),c.i64.cast([0,100])))),a[4],a[5],f,f,a[3],a[6],a[7],a[8],f,d[19],d[20],d[21],!1)},function(b){return c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))?(d[25]=c.createArray(),d[27]=(d[25].push("Successfully issued message backup task. act thread id = "),d[25]),d[27]=(d[25].push(a[0]),d[25]),d[27]=(d[25].push(", otid = "),d[25]),d[27]=(d[25].push(a[1]),d[25]),d[26]=d[25].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageBackup] ","",d[26]].join(""))):(d[25]=c.createArray(),d[27]=(d[25].push("Successfully issued message remove task. act thread id = "),d[25]),d[27]=(d[25].push(a[0]),d[25]),d[27]=(d[25].push(", otid = "),d[25]),d[27]=(d[25].push(a[1]),d[25]),d[26]=d[25].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageBackup] ","",d[26]].join(""))):(d[25]=c.createArray(),d[27]=(d[25].push("Successfully issued thread remove task. act thread id = "),d[25]),d[27]=(d[25].push(a[0]),d[25]),d[26]=d[25].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageBackup] ","",d[26]].join(""))),d[24]=new c.Map(),d[24].set("task_id",d[23]),b=[d[24],f],d[15]=b[0],d[16]=b[1],b}]):c.resolve((d[19]=c.createArray(),d[22]=(d[19].push("Skipping the message upload since EB is disabled. act thread id = "),d[19]),d[22]=(d[19].push(a[0]),d[19]),d[22]=(d[19].push(", otid = "),d[19]),d[22]=(d[19].push(a[1]),d[19]),d[20]=d[19].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageBackup] ","",d[20]].join("")),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,24])),d[21].set("stored_procedure","LSEncryptedBackupsIssueMessageBackupStoredProcedure"),d[21].set("error_message",""),e=[f,d[21]],d[15]=e[0],d[16]=e[1],e))},function(a){return a=[d[15],d[16]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageBackup] ",d[6],d[7],d[6],d[8],d[6],d[10]].join("")),d[9]=",",d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"issueMessageBackup",[d[7],d[9],d[8],d[9],d[10]].join(""),d[11],c.i64.cast([0,4]))},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSGetThreadTransportIdFromThreadId.nop",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f){return(i||(i=b("Promise"))).resolve(c("LSResult")((h||(h=d("I64"))).of_string_opt(f)))};g["default"]=a}),98);
__d("LSIssueRestoreTask",["LSAppendDataTraceAddon","LSIsMobileClient","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueRestoreTaskStoredProcedure] Beginning execution."),c.i64.eq(a[3],c.i64.cast([0,1]))?d[1]="messages":d[1]="threads",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueRestoreTaskStoredProcedure] ","",["Restoring ",d[1]].join("")].join("")),a[5]!==f?c.sp(b("LSAppendDataTraceAddon"),a[5],c.i64.cast([0,3604]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[2]=a[0],a})},function(a){return d[2]?d[3]=!0:d[3]=!1,d[3]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]=c.createArray(),f!==f?d[19]=(d[18].push(f),d[18]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[18],c.i64.cast([0,3]))):c.resolve()},function(e){return a[9]!==f?d[4]=a[9]:d[4]="",c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[18]=c.i64.of_float(Date.now()),d[5]=c.i64.add(d[18],c.i64.cast([0,0]))):d[5]=c.i64.cast([0,0]),c.sp(b("LSIssueNewTaskAndGetTaskID"),["encrypted_backups_restore",":",d[4]].join(""),c.i64.cast([0,50015]),"",f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(d){return a[5]!==f?c.sp(b("LSAppendDataTraceAddon"),a[5],c.i64.cast([0,3601]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[7]=a[0],a})},function(a){return d[7]?d[8]=!0:d[8]=!1,d[8]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]=c.createArray(),f!==f?d[19]=(d[18].push(f),d[18]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[18],c.i64.cast([0,3]))):c.resolve()},function(b){return c.db.table(190).add({taskId:d[6],mailboxPartialId:a[0],listId:a[1],numItems:a[2],contentType:a[3],startSortKey:a[4],traceId:a[5],isPointQuery:!1,newerNumItems:a[7],unencryptedSortKey:a[8],serverThreadKey:a[9],waThreadId:a[10]})},function(d){return a[5]!==f?c.sp(b("LSAppendDataTraceAddon"),a[5],c.i64.cast([0,3605]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]=c.createArray(),f!==f?d[19]=(d[18].push(f),d[18]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[18],c.i64.cast([0,3]))):c.resolve()},function(a){return d[11]=c.i64.of_float(Date.now()),d[13]="Finishing execution. Execution time: ",d[14]=c.i64.to_string(c.i64.sub(d[11],d[0])),d[16]=" ms",d[12]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueRestoreTaskStoredProcedure] ",d[12],d[13],d[12],d[14],d[12],d[16]].join("")),d[15]=",",d[17]=c.createArray(),f!==f?d[18]=(d[17].push(f),d[17]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueRestoreTaskStoredProcedure",[d[13],d[15],d[14],d[15],d[16]].join(""),d[17],c.i64.cast([0,4]))},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLoadThreadPkFromThreadId",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadThreadPkFromThreadId] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.ftr(c.db.table(173).fetch(),function(b){return c.i64.to_string(b.jid)===a[0]}).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,100])),d[14].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[14].set("error_message",""),e=[f,d[14]],d[2]=e[0],d[3]=e[1],e):(b=a.item,e=[b.clientThreadPk,f],d[2]=e[0],d[3]=e[1],e)})},function(a){return c.i64.neq(d[2],f)?(a=[d[2],d[3]],d[5]=a[0],d[6]=a[1],a):(d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,7])),d[14].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[14].set("error_message",""),c.i64.neq(f,f)?(a=[f,d[14]],d[15]=a[0],d[16]=a[1],a):(d[17]=new c.Map(),d[17].set("error_code",c.i64.cast([0,100])),d[17].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[17].set("error_message",""),a=[f,d[17]],d[15]=a[0],d[16]=a[1],a),a=[d[15],d[16]],d[5]=a[0],d[6]=a[1],a),d[7]=c.i64.of_float(Date.now()),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[8]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadThreadPkFromThreadId] ",d[8],d[9],d[8],d[10],d[8],d[12]].join("")),d[11]=",",d[13]=c.createArray(),f!==f?d[14]=(d[13].push(f),d[13]):0,c.nop(b("LSLogMebClientEvent.nop"),"loadThreadPkFromThreadId",[d[9],d[11],d[10],d[11],d[12]].join(""),d[13],c.i64.cast([0,4]))},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSIssueMessageRangeQueryTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDataTrace","LSCreateDataTraceID.nop","LSCreateDerivedKeys.nop","LSFlushDataTrace.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSGetThreadTransportIdFromThreadId.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewTask","LSIssueRestoreTask","LSLoadThreadPkFromThreadId","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop","gkx","justknobx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1];d.n;var e=[],f=[],g;return d.seq([function(f){return d.seq([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] Beginning execution."),!a[3]&&!0?(e[10]=d.i64.gt(a[1],d.i64.cast([0,0]))&&d.i64.gt(a[5],d.i64.cast([0,0])),d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(c,f){var h=c.done;c=c.value;return h?d.seq([function(c){return e[10]?(e[13]=new d.Map(),e[13].set("error_code",d.i64.cast([0,1])),e[13].set("error_message",""),e[13].set("stored_procedure","issueMessageRangeQueryTask"),e[14]=new d.Map(),e[14].set("act_thread_id",a[0]),e[15]=new d.Map(),e[15].set("restore_context",e[14]),e[15].set("failure",e[13]),e[16]=e[15].get("restore_context"),e[15],e[17]=e[16].get("act_thread_id"),e[16],e[18]=d.toJSON(e[15]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[17]].join(""),d.i64.cast([0,50031]),e[18],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0]))):(e[13]=new d.Map(),e[13].set("error_code",d.i64.cast([0,1])),e[13].set("error_message",""),e[13].set("stored_procedure","issueMessageRangeQueryTask"),e[14]=new d.Map(),e[14].set("act_thread_id",a[0]),e[14].set("source",g),e[14].set("restore_operation_type",d.i64.cast([0,2])),e[15]=new d.Map(),e[15].set("restore_context",e[14]),e[15].set("failure",e[13]),e[16]=e[15].get("restore_context"),e[15],e[17]=e[16].get("act_thread_id"),e[16],e[18]=d.toJSON(e[15]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[17]].join(""),d.i64.cast([0,50030]),e[18],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0])))},function(c){return e[12]="backup not found",e[12]!==g?d.seq([function(c){return e[16]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",e[12]].join(""),function(a){d.logger(a).mustfix(a)}(e[16]),e[13]=d.createArray(),a[4]!==g?e[17]=(e[13].push(a[4]),e[13]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",e[12],e[13],d.i64.cast([0,3]))},function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),e[16],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[17]=a[0],a})},function(a){return e[17]?e[18]=!0:e[18]=!1,e[18]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[19]=d.createArray(),g!==g?e[20]=(e[19].push(g),e[19]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[19],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[14]=a[0],a})},function(a){return e[14]?e[15]=!0:e[15]=!1,e[15]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[17]=d.createArray(),g!==g?e[18]=(e[17].push(g),e[17]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[17],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[15]=a[0],a})},function(a){return e[15]?e[16]=!0:e[16]=!1,e[16]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[17]=d.createArray(),g!==g?e[18]=(e[17].push(g),e[17]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[17],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[13]=a[0],a})},function(a){return e[13]?e[14]=!0:e[14]=!1,e[14]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[15]=d.createArray(),g!==g?e[16]=(e[15].push(g),e[15]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[15],d.i64.cast([0,3]))):d.resolve()}])},function(a){return e[10]?e[11]=d.i64.cast([0,5]):e[11]=d.i64.cast([0,2]),e[8]=!1}]):(f=c.item,d.seq([function(a){return e[19]=f.mailboxRootKeyBlob,e[18]=f.ocmfClientStateBlob,e[17]=f.deviceId,e[16]=f.backupTenancy,e[15]=f.encryptionVersion,d.i64.neq(g,g)?d.resolve(e[11]=g):d.seq([function(a){return e[20]=d.createArray(),d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[21]=a[0],a})},function(a){return e[21]?e[30]=(e[20].push(d.i64.cast([0,0])),e[20]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[22]=a[0],a})},function(a){return e[22]?e[30]=(e[20].push(d.i64.cast([0,2])),e[20]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[23]=a[0],a})},function(a){return e[23]?e[30]=(e[20].push(d.i64.cast([0,3])),e[20]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[24]=a[0],a})},function(a){return e[24]?e[30]=(e[20].push(d.i64.cast([0,4])),e[20]):0,e[25]=d.createArray(),e[26]=d.i64.of_int32(e[20].length),d.i64.gt(e[26],d.i64.cast([0,0]))?d.loopAsync(e[26],function(a){return e[30]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[20],e[30]).then(function(a){return a=a,e[31]=a[0],e[32]=a[1],a})},function(a){return e[33]=(e[25].push(e[31]),e[25])}])}):d.resolve()},function(a){return d.seq([function(a){return e[30]=d.createArray(),e[31]=d.i64.of_int32(e[25].length),d.i64.gt(e[31],d.i64.cast([0,0]))?d.loopAsync(e[31],function(a){return e[33]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[25],e[33]).then(function(a){return a=a,e[34]=a[0],e[35]=a[1],a})},function(a){return e[36]=(e[30].push(d.i64.to_string(e[34])),e[30])}])}):d.resolve()},function(a){return e[32]=e[30].join(","),e[27]=e[32]}])},function(a){return e[25].some(function(a){return d.i64.eq(e[15],a)})?e[28]=e[15]:e[28]=g,d.i64.neq(e[28],g)?e[29]=e[28]:e[29]=g,e[11]=e[29]}])},function(c){return d.i64.neq(e[11],g)?e[12]=e[11]:e[12]=d.i64.cast([0,0]),d.i64.neq(e[16],g)?e[13]=e[16]:e[13]=d.i64.cast([0,1]),d.i64.neq(e[17],g)?d.seq([function(c){return d.sp(b("LSLoadThreadPkFromThreadId"),a[0]).then(function(a){return a=a,e[20]=a[0],e[21]=a[1],a})},function(c){return d.i64.neq(e[20],g)?e[10]?d.seq([function(c){return d.i64.eq(e[13],d.i64.cast([0,3]))?e[22]=d.i64.cast([0,4]):e[22]=d.i64.cast([0,0]),e[23]=new d.Map(),e[23].set("act_thread_id",a[0]),e[23].set("tam_thread_subtype",e[22]),d.nop(b("LSBase64Encode.nop"),e[18]).then(function(a){return a=a,e[24]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[19]).then(function(a){return a=a,e[25]=a[0],a})},function(a){return e[26]=new d.Map(),e[26].set("ocmf_client_state_blob",e[24]==null?"":e[24]),e[26].set("mailbox_root_key",e[25]==null?"":e[25]),e[27]=d.createArray(),d.fe(d.ftr(d.db.table(169).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))}),function(a){a=a.item;return e[36]=(e[27].push(a.epochId),e[27])})},function(c){return e[28]=d.i64.of_int32(e[27].length),e[29]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",e[29],"Queried locally available epochs. Count: ",e[29],d.i64.to_string(e[28])].join("")),e[30]=new d.Map(),e[30].set("device_id",e[17]),e[30].set("raw_tokens",e[26]),e[30].set("locally_available_epochs",e[27]),e[31]=new d.Map(),e[31].set("reference_timestamp",a[2]),e[31].set("server_thread_key",g),e[31].set("device_context",e[30]),e[32]=new d.Map(),e[32].set("restore_context",e[23]),e[32].set("success",e[31]),e[33]=e[32].get("restore_context"),e[32],e[34]=e[33].get("act_thread_id"),e[33],e[35]=d.toJSON(e[32]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[34]].join(""),d.i64.cast([0,50031]),e[35],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0]))}]):d.i64.gt(a[1],d.i64.cast([0,0]))?d.seq([function(c){return d.i64.eq(e[13],d.i64.cast([0,3]))?e[22]=d.i64.cast([0,4]):e[22]=d.i64.cast([0,0]),e[23]=new d.Map(),e[23].set("act_thread_id",a[0]),e[23].set("request_id",a[4]),e[23].set("tam_thread_subtype",e[22]),d.nop(b("LSBase64Encode.nop"),e[18]).then(function(a){return a=a,e[24]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[19]).then(function(a){return a=a,e[25]=a[0],a})},function(a){return e[26]=new d.Map(),e[26].set("ocmf_client_state_blob",e[24]==null?"":e[24]),e[26].set("mailbox_root_key",e[25]==null?"":e[25]),e[27]=d.createArray(),d.fe(d.ftr(d.db.table(169).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))}),function(a){a=a.item;return e[36]=(e[27].push(a.epochId),e[27])})},function(c){return e[28]=d.i64.of_int32(e[27].length),e[29]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",e[29],"Queried locally available epochs. Count: ",e[29],d.i64.to_string(e[28])].join("")),e[30]=new d.Map(),e[30].set("device_id",e[17]),e[30].set("raw_tokens",e[26]),e[30].set("locally_available_epochs",e[27]),e[31]=new d.Map(),e[31].set("reference_timestamp",a[2]),e[31].set("direction",d.i64.cast([0,1])),e[31].set("server_thread_key",g),e[31].set("device_context",e[30]),e[32]=new d.Map(),e[32].set("restore_context",e[23]),e[32].set("success",e[31]),e[33]=e[32].get("restore_context"),e[32],e[34]=e[33].get("act_thread_id"),e[33],e[35]=d.toJSON(e[32]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[34]].join(""),d.i64.cast([0,50030]),e[35],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0]))}]):d.seq([function(c){return d.i64.eq(e[13],d.i64.cast([0,3]))?e[22]=d.i64.cast([0,4]):e[22]=d.i64.cast([0,0]),e[23]=new d.Map(),e[23].set("act_thread_id",a[0]),e[23].set("request_id",a[4]),e[23].set("tam_thread_subtype",e[22]),d.nop(b("LSBase64Encode.nop"),e[18]).then(function(a){return a=a,e[24]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[19]).then(function(a){return a=a,e[25]=a[0],a})},function(a){return e[26]=new d.Map(),e[26].set("ocmf_client_state_blob",e[24]==null?"":e[24]),e[26].set("mailbox_root_key",e[25]==null?"":e[25]),e[27]=d.createArray(),d.fe(d.ftr(d.db.table(169).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))}),function(a){a=a.item;return e[36]=(e[27].push(a.epochId),e[27])})},function(c){return e[28]=d.i64.of_int32(e[27].length),e[29]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",e[29],"Queried locally available epochs. Count: ",e[29],d.i64.to_string(e[28])].join("")),e[30]=new d.Map(),e[30].set("device_id",e[17]),e[30].set("raw_tokens",e[26]),e[30].set("locally_available_epochs",e[27]),e[31]=new d.Map(),e[31].set("reference_timestamp",a[2]),e[31].set("direction",d.i64.cast([0,2])),e[31].set("server_thread_key",g),e[31].set("device_context",e[30]),e[32]=new d.Map(),e[32].set("restore_context",e[23]),e[32].set("success",e[31]),e[33]=e[32].get("restore_context"),e[32],e[34]=e[33].get("act_thread_id"),e[33],e[35]=d.toJSON(e[32]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[34]].join(""),d.i64.cast([0,50030]),e[35],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0]))}]):d.seq([function(c){return e[10]?(e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,100])),e[24].set("error_message",""),e[24].set("stored_procedure","issueMessageRangeQueryTask"),e[25]=new d.Map(),e[25].set("act_thread_id",a[0]),e[26]=new d.Map(),e[26].set("restore_context",e[25]),e[26].set("failure",e[24]),e[27]=e[26].get("restore_context"),e[26],e[28]=e[27].get("act_thread_id"),e[27],e[29]=d.toJSON(e[26]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[28]].join(""),d.i64.cast([0,50031]),e[29],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0]))):(e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,100])),e[24].set("error_message",""),e[24].set("stored_procedure","issueMessageRangeQueryTask"),e[25]=new d.Map(),e[25].set("act_thread_id",a[0]),e[25].set("source",g),e[25].set("restore_operation_type",d.i64.cast([0,2])),e[26]=new d.Map(),e[26].set("restore_context",e[25]),e[26].set("failure",e[24]),e[27]=e[26].get("restore_context"),e[26],e[28]=e[27].get("act_thread_id"),e[27],e[29]=d.toJSON(e[26]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[28]].join(""),d.i64.cast([0,50030]),e[29],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0])))},function(c){return e[23]="threak pk not found for jid",e[23]!==g?d.seq([function(c){return e[27]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",e[23]].join(""),function(a){d.logger(a).mustfix(a)}(e[27]),e[24]=d.createArray(),a[4]!==g?e[28]=(e[24].push(a[4]),e[24]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",e[23],e[24],d.i64.cast([0,3]))},function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),e[27],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[28]=a[0],a})},function(a){return e[28]?e[29]=!0:e[29]=!1,e[29]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[30]=d.createArray(),g!==g?e[31]=(e[30].push(g),e[30]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[30],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[25]=a[0],a})},function(a){return e[25]?e[26]=!0:e[26]=!1,e[26]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[28]=d.createArray(),g!==g?e[29]=(e[28].push(g),e[28]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[28],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[26]=a[0],a})},function(a){return e[26]?e[27]=!0:e[27]=!1,e[27]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[28]=d.createArray(),g!==g?e[29]=(e[28].push(g),e[28]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[28],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[24]=a[0],a})},function(a){return e[24]?e[25]=!0:e[25]=!1,e[25]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[26]=d.createArray(),g!==g?e[27]=(e[26].push(g),e[26]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[26],d.i64.cast([0,3]))):d.resolve()}])},function(a){return e[10]?e[22]=d.i64.cast([0,5]):e[22]=d.i64.cast([0,2])}])},function(a){return e[14]=!0}]):d.seq([function(c){return e[10]?(e[22]=new d.Map(),e[22].set("error_code",d.i64.cast([0,1])),e[22].set("error_message",""),e[22].set("stored_procedure","issueMessageRangeQueryTask"),e[23]=new d.Map(),e[23].set("act_thread_id",a[0]),e[24]=new d.Map(),e[24].set("restore_context",e[23]),e[24].set("failure",e[22]),e[25]=e[24].get("restore_context"),e[24],e[26]=e[25].get("act_thread_id"),e[25],e[27]=d.toJSON(e[24]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[26]].join(""),d.i64.cast([0,50031]),e[27],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0]))):(e[22]=new d.Map(),e[22].set("error_code",d.i64.cast([0,1])),e[22].set("error_message",""),e[22].set("stored_procedure","issueMessageRangeQueryTask"),e[23]=new d.Map(),e[23].set("act_thread_id",a[0]),e[23].set("source",g),e[23].set("restore_operation_type",d.i64.cast([0,2])),e[24]=new d.Map(),e[24].set("restore_context",e[23]),e[24].set("failure",e[22]),e[25]=e[24].get("restore_context"),e[24],e[26]=e[25].get("act_thread_id"),e[25],e[27]=d.toJSON(e[24]),d.sp(b("LSIssueNewTask"),["encrypted_backups_restore",":",e[26]].join(""),d.i64.cast([0,50030]),e[27],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,d.i64.cast([0,0])))},function(c){return e[21]="backup not found",e[21]!==g?d.seq([function(c){return e[25]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",e[21]].join(""),function(a){d.logger(a).mustfix(a)}(e[25]),e[22]=d.createArray(),a[4]!==g?e[26]=(e[22].push(a[4]),e[22]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",e[21],e[22],d.i64.cast([0,3]))},function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),e[25],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[26]=a[0],a})},function(a){return e[26]?e[27]=!0:e[27]=!1,e[27]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[28]=d.createArray(),g!==g?e[29]=(e[28].push(g),e[28]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[28],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[23]=a[0],a})},function(a){return e[23]?e[24]=!0:e[24]=!1,e[24]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[26]=d.createArray(),g!==g?e[27]=(e[26].push(g),e[26]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[26],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[24]=a[0],a})},function(a){return e[24]?e[25]=!0:e[25]=!1,e[25]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[26]=d.createArray(),g!==g?e[27]=(e[26].push(g),e[26]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[26],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[22]=a[0],a})},function(a){return e[22]?e[23]=!0:e[23]=!1,e[23]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[24]=d.createArray(),g!==g?e[25]=(e[24].push(g),e[24]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[24],d.i64.cast([0,3]))):d.resolve()}])},function(a){return e[10]?e[20]=d.i64.cast([0,5]):e[20]=d.i64.cast([0,2]),e[14]=!1}])},function(a){return e[8]=e[14]}]))})):(c("gkx")("7350")||c("gkx")("4765"))&&c("justknobx")._("1103")?d.seq([function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[8]=a[0],a})},function(c){return e[8]?e[9]=!0:e[9]=!1,e[9]?d.seq([function(c){return a[4]!==g?d.seq([function(a){return d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))&&d.i64.eq(a.backupTenancy,d.i64.cast([0,2]))}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){b=a.done;a=a.value;return b?e[29]=!1:(a.item,e[29]=!0)})},function(c){return e[29]?e[31]=d.i64.or_(d.i64.cast([0,73]),d.i64.cast([0,128])):e[31]=d.i64.cast([0,73]),e[32]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils] ",e[32],"EncryptedBackups MCD Trace ID",e[32],d.i64.to_string(e[31])].join("")),d.sp(b("LSCreateDataTrace"),a[4],g,g,"restore_messages",e[31])},function(b){return e[28]=a[4]}]):d.seq([function(a){return d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))&&d.i64.eq(a.backupTenancy,d.i64.cast([0,2]))}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){b=a.done;a=a.value;return b?e[29]=!1:(a.item,e[29]=!0)})},function(a){return e[29]?e[31]=d.i64.or_(d.i64.cast([0,73]),d.i64.cast([0,128])):e[31]=d.i64.cast([0,73]),d.nop(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,e[32]=a[0],a})},function(a){return e[33]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils] ",e[33],"EncryptedBackups MCD Trace ID",e[33],d.i64.to_string(e[31])].join("")),d.sp(b("LSCreateDataTrace"),e[32],g,g,"restore_messages",e[31])},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[34]=a[0],a})},function(a){return e[34]?e[35]=!0:e[35]=!1,e[35]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[36]=d.createArray(),g!==g?e[37]=(e[36].push(g),e[36]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[36],d.i64.cast([0,3]))):d.resolve()},function(a){return e[28]=e[32]}])},function(a){return e[10]=e[28]}]):d.seq([function(a){return d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))&&d.i64.eq(a.backupTenancy,d.i64.cast([0,2]))}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){b=a.done;a=a.value;return b?e[28]=!1:(a.item,e[28]=!0)})},function(a){return e[28]?e[30]=d.i64.or_(d.i64.cast([0,73]),d.i64.cast([0,128])):e[30]=d.i64.cast([0,73]),d.nop(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[32]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils] ",e[32],"EncryptedBackups MCD Trace ID",e[32],d.i64.to_string(e[30])].join("")),d.sp(b("LSCreateDataTrace"),e[31],g,g,"restore_messages",e[30])},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[33]=a[0],a})},function(a){return e[33]?e[34]=!0:e[34]=!1,e[34]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[35]=d.createArray(),g!==g?e[36]=(e[35].push(g),e[35]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[35],d.i64.cast([0,3]))):d.resolve()},function(a){return e[10]=e[31]}])},function(a){return e[10]!==g?d.sp(b("LSAppendDataTraceAddon"),e[10],d.i64.cast([0,1421]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[11]=a[0],a})},function(a){return e[11]?e[12]=!0:e[12]=!1,e[12]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[28]=d.createArray(),g!==g?e[29]=(e[28].push(g),e[28]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[28],d.i64.cast([0,3]))):d.resolve()},function(a){return d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,c){var f=a.done;a=a.value;return f?(f=[g,g,g,g,g,d.i64.cast([0,1]),g,g,g,g,g,g,g,d.i64.cast([0,20])],e[13]=f[0],e[14]=f[1],e[15]=f[2],e[16]=f[3],e[17]=f[4],e[18]=f[5],e[19]=f[6],e[20]=f[7],e[21]=f[8],e[22]=f[9],e[23]=f[10],e[24]=f[11],e[25]=f[12],e[26]=f[13],f):(c=a.item,d.seq([function(a){return e[32]=c.backupTenancy,e[31]=c.encryptionVersion,d.i64.neq(g,g)?d.resolve(e[28]=g):d.seq([function(a){return e[33]=d.createArray(),d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[34]=a[0],a})},function(a){return e[34]?e[43]=(e[33].push(d.i64.cast([0,0])),e[33]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[35]=a[0],a})},function(a){return e[35]?e[43]=(e[33].push(d.i64.cast([0,2])),e[33]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[36]=a[0],a})},function(a){return e[36]?e[43]=(e[33].push(d.i64.cast([0,3])),e[33]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[37]=a[0],a})},function(a){return e[37]?e[43]=(e[33].push(d.i64.cast([0,4])),e[33]):0,e[38]=d.createArray(),e[39]=d.i64.of_int32(e[33].length),d.i64.gt(e[39],d.i64.cast([0,0]))?d.loopAsync(e[39],function(a){return e[43]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[33],e[43]).then(function(a){return a=a,e[44]=a[0],e[45]=a[1],a})},function(a){return e[46]=(e[38].push(e[44]),e[38])}])}):d.resolve()},function(a){return d.seq([function(a){return e[43]=d.createArray(),e[44]=d.i64.of_int32(e[38].length),d.i64.gt(e[44],d.i64.cast([0,0]))?d.loopAsync(e[44],function(a){return e[46]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[38],e[46]).then(function(a){return a=a,e[47]=a[0],e[48]=a[1],a})},function(a){return e[49]=(e[43].push(d.i64.to_string(e[47])),e[43])}])}):d.resolve()},function(a){return e[45]=e[43].join(","),e[40]=e[45]}])},function(a){return e[38].some(function(a){return d.i64.eq(e[31],a)})?e[41]=e[31]:e[41]=g,d.i64.neq(e[41],g)?e[42]=e[41]:e[42]=g,e[28]=e[42]}])},function(a){return d.i64.neq(e[28],g)?e[29]=e[28]:e[29]=d.i64.cast([0,0]),d.i64.neq(e[32],g)?e[30]=e[32]:e[30]=d.i64.cast([0,1]),a=[c.backupId,c.deviceId,c.mailboxRootKeyBlob,c.ocmfClientStateBlob,e[29],e[30],c.epochAuthPublicKeyBlob,c.epochAuthPrivateKeyBlob,c.devicePublicKeyBlob,c.devicePrivateKeyBlob,c.epochStoragePublicKeyBlob,c.epochStoragePrivateKeyBlob,c.obliviousValidationTokenBlob,c.authorityLevel],e[13]=a[0],e[14]=a[1],e[15]=a[2],e[16]=a[3],e[17]=a[4],e[18]=a[5],e[19]=a[6],e[20]=a[7],e[21]=a[8],e[22]=a[9],e[23]=a[10],e[24]=a[11],e[25]=a[12],e[26]=a[13],a}]))})},function(c){return d.i64.neq(e[13],g)?d.blobs.neq(e[16],g)?d.seq([function(c){return d.i64.gt(a[1],d.i64.cast([0,0]))&&d.i64.gt(a[5],d.i64.cast([0,0]))?d.seq([function(a){return e[10]!==g?d.sp(b("LSAppendDataTraceAddon"),e[10],d.i64.cast([0,2515]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[41]=a[0],a})},function(a){return e[41]?e[42]=!0:e[42]=!1,e[42]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[43]=d.createArray(),g!==g?e[44]=(e[43].push(g),e[43]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[43],d.i64.cast([0,3]))):d.resolve()}]):d.i64.gt(a[5],d.i64.cast([0,0]))?d.seq([function(a){return e[10]!==g?d.sp(b("LSAppendDataTraceAddon"),e[10],d.i64.cast([0,2514]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[41]=a[0],a})},function(a){return e[41]?e[42]=!0:e[42]=!1,e[42]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[43]=d.createArray(),g!==g?e[44]=(e[43].push(g),e[43]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[43],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return d.nop(b("LSGetBlobFromString.nop"),a[0]).then(function(a){return a=a,e[28]=a[0],a})},function(a){return d.nop(b("LSHmac_v2.nop"),d.blob("dGhyZWFkX2lkX3Njb3Bl"),e[28]).then(function(a){return a=a,e[29]=a[0],a})},function(a){return d.nop(b("LSOcmfClientMap.nop"),e[16],e[29]).then(function(a){return a=a,e[30]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[30]).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[40]=e[31]==null?"":e[31],d.nop(b("LSGetBlobFromString.nop"),d.i64.to_string(e[13])).then(function(a){return a=a,e[32]=a[0],a})},function(a){return d.nop(b("LSHmac_v2.nop"),d.blob("bWFpbGJveF9pZF9zY29wZQ=="),e[32]).then(function(a){return a=a,e[33]=a[0],a})},function(a){return d.nop(b("LSOcmfClientMap.nop"),e[16],e[33]).then(function(a){return a=a,e[34]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[34]).then(function(a){return a=a,e[35]=a[0],a})},function(c){return d.blobs.neq(e[15],g)?d.seq([function(c){return a[2]!==g?d.seq([function(c){return e[42]=d.createArray(),e[48]=(e[42].push(d.i64.cast([0,32])),e[42]),d.nop(b("LSGetBlobFromString.nop"),["thread_ope_key","_",a[0]].join("")).then(function(a){return a=a,e[43]=a[0],a})},function(a){return d.nop(b("LSCreateDerivedKeys.nop"),e[43],g,e[15],e[42]).then(function(a){return a=a,e[44]=a[0],a})},function(a){return e[44]?e[45]=!1:e[45]=!0,e[45]?d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[48]=d.createArray(),g!==g?e[49]=(e[48].push(g),e[48]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",e[48],d.i64.cast([0,3]))},function(a){return e[46]=g}]):d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[44],d.i64.cast([0,0])).then(function(a){return a=a,e[48]=a[0],e[49]=a[1],a})},function(a){return e[46]=e[48]}])},function(c){return d.blobs.neq(e[46],g)?d.seq([function(c){return d.nop(b("LSGetBlobFromInt64BE.nop"),d.i64.from_string(a[2])).then(function(a){return a=a,e[48]=a[0],a})},function(a){return d.nop(b("LSTruncateSortKey.nop"),e[48]).then(function(a){return a=a,e[49]=a[0],a})},function(a){return d.nop(b("LSOpeEncrypt.nop"),e[46],e[49],d.i64.cast([0,16])).then(function(a){return a=a,e[50]=a[0],a})},function(a){return d.nop(b("LSBinaryToHex.nop"),e[50]).then(function(a){return a=a,e[51]=a[0],a})},function(a){return e[47]=e[51]==null?"":e[51]}]):d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] OPE key is null"),e[48]=d.createArray(),g!==g?e[49]=(e[48].push(g),e[48]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","OPE key is null",e[48],d.i64.cast([0,3]))},function(a){return e[47]=g}])},function(a){return e[41]=e[47]}]):d.resolve(e[41]=g)},function(a){return e[36]=e[41]}]):d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Mailbox root key is null"),e[41]=d.createArray(),g!==g?e[42]=(e[41].push(g),e[41]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Mailbox root key is null",e[41],d.i64.cast([0,3]))},function(a){return e[36]=g}])},function(c){return a[0]!==g?d.seq([function(c){return d.nop(b("LSGetThreadTransportIdFromThreadId.nop"),a[0]).then(function(a){return a=a,e[41]=a[0],a})},function(a){return d.i64.neq(e[41],g)?d.seq([function(a){return d.db.table(173).fetch([[[e[41]]],"jid"]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[43]=g:(b=a.item,e[43]=d.i64.to_string(b.serverThreadKey))})},function(a){return e[42]=e[43]}]):d.seq([function(a){return function(a){d.logger(a).warn(a)}("[EncryptedBackups][MEBTableUtils] Failed to get server thread key, wa jid is null"),e[43]=d.createArray(),g!==g?e[44]=(e[43].push(g),e[43]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get server thread key, wa jid is null",e[43],d.i64.cast([0,2]))},function(a){return e[42]=g}])},function(a){return e[37]=e[42]}]):d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTableUtils] Failed to get server thread key, thread id is null"),e[41]=d.createArray(),g!==g?e[42]=(e[41].push(g),e[41]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get server thread key, thread id is null",e[41],d.i64.cast([0,3]))},function(a){return e[37]=g}])},function(c){return d.nop(b("LSGetThreadTransportIdFromThreadId.nop"),a[0]).then(function(a){return a=a,e[38]=a[0],a})},function(c){return d.sp(b("LSIssueRestoreTask"),e[35]==null?"":e[35],e[40],a[1],d.i64.cast([0,1]),e[36],e[10],a[3],a[5],a[2],e[37],e[38]).then(function(a){return a=a,e[39]=a[0],a})},function(b){return d.i64.neq(e[39],g)?d.db.table(180).add({taskId:e[39],listId:e[40],threadId:a[0]}):d.resolve()}]):(e[28]="Missing ocmf_client_state for IssueMessageRangeQueryTask",e[28]!==g?d.seq([function(a){return e[32]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",e[28]].join(""),function(a){d.logger(a).mustfix(a)}(e[32]),e[29]=d.createArray(),e[10]!==g?e[33]=(e[29].push(e[10]),e[29]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",e[28],e[29],d.i64.cast([0,3]))},function(a){return e[10]!==g?d.seq([function(a){return e[10]!==g?d.sp(b("LSAppendDataTraceAddon"),e[10],d.i64.cast([0,85]),d.i64.cast([0,2]),e[32],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[33]=a[0],a})},function(a){return e[33]?e[34]=!0:e[34]=!1,e[34]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[35]=d.createArray(),g!==g?e[36]=(e[35].push(g),e[35]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[35],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(a){return e[10]!==g?d.nop(b("LSFlushDataTrace.nop"),e[10]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[30]=a[0],a})},function(a){return e[30]?e[31]=!0:e[31]=!1,e[31]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[33]=d.createArray(),g!==g?e[34]=(e[33].push(g),e[33]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[33],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(a){return e[10]!==g?d.seq([function(a){return e[10]!==g?d.sp(b("LSAppendDataTraceAddon"),e[10],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[31]?e[32]=!0:e[32]=!1,e[32]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[33]=d.createArray(),g!==g?e[34]=(e[33].push(g),e[33]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[33],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(a){return e[10]!==g?d.nop(b("LSFlushDataTrace.nop"),e[10]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[29]=a[0],a})},function(a){return e[29]?e[30]=!0:e[30]=!1,e[30]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[31]=d.createArray(),g!==g?e[32]=(e[31].push(g),e[31]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[31],d.i64.cast([0,3]))):d.resolve()}])):(e[28]="Missing backup_id for IssueMessageRangeQueryTask",e[28]!==g?d.seq([function(a){return e[32]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",e[28]].join(""),function(a){d.logger(a).mustfix(a)}(e[32]),e[29]=d.createArray(),e[10]!==g?e[33]=(e[29].push(e[10]),e[29]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",e[28],e[29],d.i64.cast([0,3]))},function(a){return e[10]!==g?d.seq([function(a){return e[10]!==g?d.sp(b("LSAppendDataTraceAddon"),e[10],d.i64.cast([0,85]),d.i64.cast([0,2]),e[32],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[33]=a[0],a})},function(a){return e[33]?e[34]=!0:e[34]=!1,e[34]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[35]=d.createArray(),g!==g?e[36]=(e[35].push(g),e[35]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[35],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(a){return e[10]!==g?d.nop(b("LSFlushDataTrace.nop"),e[10]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[30]=a[0],a})},function(a){return e[30]?e[31]=!0:e[31]=!1,e[31]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[33]=d.createArray(),g!==g?e[34]=(e[33].push(g),e[33]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[33],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(a){return e[10]!==g?d.seq([function(a){return e[10]!==g?d.sp(b("LSAppendDataTraceAddon"),e[10],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[31]?e[32]=!0:e[32]=!1,e[32]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[33]=d.createArray(),g!==g?e[34]=(e[33].push(g),e[33]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[33],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(a){return e[10]!==g?d.nop(b("LSFlushDataTrace.nop"),e[10]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[29]=a[0],a})},function(a){return e[29]?e[30]=!0:e[30]=!1,e[30]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[31]=d.createArray(),g!==g?e[32]=(e[31].push(g),e[31]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[31],d.i64.cast([0,3]))):d.resolve()}]))}]):(e[8]="paged restore is disabled",e[8]!==g?d.seq([function(c){return e[12]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",e[8]].join(""),function(a){d.logger(a).mustfix(a)}(e[12]),e[9]=d.createArray(),a[4]!==g?e[13]=(e[9].push(a[4]),e[9]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",e[8],e[9],d.i64.cast([0,3]))},function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),e[12],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[13]=a[0],a})},function(a){return e[13]?e[14]=!0:e[14]=!1,e[14]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[15]=d.createArray(),g!==g?e[16]=(e[15].push(g),e[15]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[15],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[10]=a[0],a})},function(a){return e[10]?e[11]=!0:e[11]=!1,e[11]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[13]=d.createArray(),g!==g?e[14]=(e[13].push(g),e[13]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[13],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(c){return a[4]!==g?d.seq([function(c){return a[4]!==g?d.sp(b("LSAppendDataTraceAddon"),a[4],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[11]=a[0],a})},function(a){return e[11]?e[12]=!0:e[12]=!1,e[12]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[13]=d.createArray(),g!==g?e[14]=(e[13].push(g),e[13]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[13],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[4]!==g?d.nop(b("LSFlushDataTrace.nop"),a[4]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[9]=a[0],a})},function(a){return e[9]?e[10]=!0:e[10]=!1,e[10]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[11]=d.createArray(),g!==g?e[12]=(e[11].push(g),e[11]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[11],d.i64.cast([0,3]))):d.resolve()}]))},function(a){return e[1]=d.i64.of_float(Date.now()),e[3]="Finishing execution. Execution time: ",e[4]=d.i64.to_string(d.i64.sub(e[1],e[0])),e[6]=" ms",e[2]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ",e[2],e[3],e[2],e[4],e[2],e[6]].join("")),e[5]=",",e[7]=d.createArray(),g!==g?e[8]=(e[7].push(g),e[7]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",[e[3],e[5],e[4],e[5],e[6]].join(""),e[7],d.i64.cast([0,4]))}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSIssueMessageRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop","LSWriteToPendingBackupsContext"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueMessageRemove] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,h){var i=e.done;e=e.value;return i?(d[12]=c.createArray(),d[15]=(d[12].push("Skipping message upload since EB is disabled. act thread id = "),d[12]),d[15]=(d[12].push(a[0]),d[12]),d[15]=(d[12].push(", otid = "),d[12]),d[15]=(d[12].push(a[1]),d[12]),d[13]=d[12].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRemove] ","",d[13]].join("")),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,1])),d[14].set("stored_procedure","LSEncryptedBackupsIssueMessageRemoveStoredProcedure"),d[14].set("error_message",""),i=[f,d[14]],d[2]=i[0],d[3]=i[1],i):(h=e.item,c.seq([function(a){return d[18]=h.backupTenancy,d[17]=h.encryptionVersion,c.i64.neq(f,f)?c.resolve(d[12]=f):c.seq([function(a){return d[19]=c.createArray(),c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[29]=(d[19].push(c.i64.cast([0,0])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[29]=(d[19].push(c.i64.cast([0,2])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[29]=(d[19].push(c.i64.cast([0,3])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[29]=(d[19].push(c.i64.cast([0,4])),d[19]):0,d[24]=c.createArray(),d[25]=c.i64.of_int32(d[19].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[29]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[19],d[29]).then(function(a){return a=a,d[30]=a[0],d[31]=a[1],a})},function(a){return d[32]=(d[24].push(d[30]),d[24])}])}):c.resolve()},function(a){return c.seq([function(a){return d[29]=c.createArray(),d[30]=c.i64.of_int32(d[24].length),c.i64.gt(d[30],c.i64.cast([0,0]))?c.loopAsync(d[30],function(a){return d[32]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[24],d[32]).then(function(a){return a=a,d[33]=a[0],d[34]=a[1],a})},function(a){return d[35]=(d[29].push(c.i64.to_string(d[33])),d[29])}])}):c.resolve()},function(a){return d[31]=d[29].join(","),d[26]=d[31]}])},function(a){return d[24].some(function(a){return c.i64.eq(d[17],a)})?d[27]=d[17]:d[27]=f,c.i64.neq(d[27],f)?d[28]=d[27]:d[28]=f,d[12]=d[28]}])},function(e){return c.i64.neq(d[12],f)?d[13]=d[12]:d[13]=c.i64.cast([0,0]),c.i64.neq(d[18],f)?d[14]=d[18]:d[14]=c.i64.cast([0,1]),c.i64.neq(h.deviceId,f)?c.seq([function(e){return c.i64.eq(d[14],c.i64.cast([0,3]))?d[19]=c.i64.cast([0,4]):d[19]=c.i64.cast([0,0]),d[20]=c.i64.of_float(Date.now()),c.sp(b("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",a[0]].join(""),c.i64.cast([0,50026]),"",f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,93]),f,c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[20],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[20],c.i64.cast([0,0]))))).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.sp(b("LSWriteToPendingBackupsContext"),d[21],"",c.i64.cast([0,2]),c.i64.cast([0,1]),c.i64.cast([0,1]),a[0],a[1],c.i64.to_string(c.i64.add(c.i64.mul(c.i64.div(a[2],c.i64.cast([0,1e3])),c.i64.cast([0,1e3])),c.i64.div(c.i64.mod_(c.i64.and_(c.i64.asr_(c.i64.from_string(a[1]),c.i64.to_int32(c.i64.cast([0,22]))),c.i64.cast([511,4294967295])),c.i64.cast([0,1e5])),c.i64.cast([0,100])))),f,a[4],f,f,a[3],a[5],f,f,f,f,f,d[19],!1)},function(b){return c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued message backup task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[25]=(d[23].push(", otid = "),d[23]),d[25]=(d[23].push(a[1]),d[23]),d[24]=d[23].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRemove] ","",d[24]].join(""))):(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued message remove task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[25]=(d[23].push(", otid = "),d[23]),d[25]=(d[23].push(a[1]),d[23]),d[24]=d[23].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRemove] ","",d[24]].join(""))):(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued thread remove task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[24]=d[23].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRemove] ","",d[24]].join(""))),d[22]=new c.Map(),d[22].set("task_id",d[21]),b=[d[22],f],d[15]=b[0],d[16]=b[1],b}]):c.resolve((d[19]=c.createArray(),d[22]=(d[19].push("Skipping message upload since EB is disabled. act thread id = "),d[19]),d[22]=(d[19].push(a[0]),d[19]),d[22]=(d[19].push(", otid = "),d[19]),d[22]=(d[19].push(a[1]),d[19]),d[20]=d[19].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRemove] ","",d[20]].join("")),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,24])),d[21].set("stored_procedure","LSEncryptedBackupsIssueMessageRemoveStoredProcedure"),d[21].set("error_message",""),e=[f,d[21]],d[15]=e[0],d[16]=e[1],e))},function(a){return a=[d[15],d[16]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueMessageRemove] ",d[6],d[7],d[6],d[8],d[6],d[10]].join("")),d[9]=",",d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"issueMessageRemove",[d[7],d[9],d[8],d[9],d[10]].join(""),d[11],c.i64.cast([0,4]))},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSIssuePointQueryRestoreTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSBinaryToHex.nop","LSCreateDerivedKeys.nop","LSFlushDataTrace.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSGetThreadTransportIdFromThreadId.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1];d.n;var e=[],f=[],g;return d.seq([function(h){return d.seq([function(c){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] Beginning execution."),a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,2512]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[1]=a[0],a})},function(a){return e[1]?e[2]=!0:e[2]=!1,e[2]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[13]=d.createArray(),g!==g?e[14]=(e[13].push(g),e[13]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[13],d.i64.cast([0,3]))):d.resolve()},function(f){return c("gkx")("3282")||c("gkx")("3290")?d.seq([function(c){return function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] Point query restore v2 is enabled"),d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(c,f){var i=c.done;c=c.value;return i?d.seq([function(c){return e[15]=new d.Map(),e[15].set("error_code",d.i64.cast([0,1])),e[15].set("error_message",""),e[15].set("stored_procedure","issuePointQueryRestoreTask"),e[16]=new d.Map(),e[16].set("act_thread_id",a[0]),e[17]=new d.Map(),e[17].set("restore_context",e[16]),e[17].set("failure",e[15]),d.i64.gt(d.i64.cast([0,0]),d.i64.cast([0,0]))?(e[26]=d.i64.of_float(Date.now()),e[18]=d.i64.add(e[26],d.i64.cast([0,0]))):e[18]=d.i64.cast([0,0]),e[19]=e[17].get("restore_context"),e[17],e[20]=e[17].get("success"),e[17],e[20]!==g?(e[26]=e[20].get("message_id"),e[20],e[21]=e[26]):e[21]="",e[22]=e[19].get("act_thread_id"),e[19],e[23]=":",e[24]=d.toJSON(e[17]),d.sp(b("LSIssueNewTaskAndGetTaskID"),["encrypted_backups_restore",e[23],e[22],e[23],e[21]].join(""),d.i64.cast([0,50035]),e[24],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,e[18]).then(function(a){return a=a,e[25]=a[0],a})},function(a){return e[13]=e[25]}]):(f=c.item,d.seq([function(a){return e[21]=f.deviceId,e[20]=f.backupTenancy,e[19]=f.encryptionVersion,d.i64.neq(g,g)?d.resolve(e[15]=g):d.seq([function(a){return e[22]=d.createArray(),d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[23]=a[0],a})},function(a){return e[23]?e[32]=(e[22].push(d.i64.cast([0,0])),e[22]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[24]=a[0],a})},function(a){return e[24]?e[32]=(e[22].push(d.i64.cast([0,2])),e[22]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[25]=a[0],a})},function(a){return e[25]?e[32]=(e[22].push(d.i64.cast([0,3])),e[22]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[26]=a[0],a})},function(a){return e[26]?e[32]=(e[22].push(d.i64.cast([0,4])),e[22]):0,e[27]=d.createArray(),e[28]=d.i64.of_int32(e[22].length),d.i64.gt(e[28],d.i64.cast([0,0]))?d.loopAsync(e[28],function(a){return e[32]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[22],e[32]).then(function(a){return a=a,e[33]=a[0],e[34]=a[1],a})},function(a){return e[35]=(e[27].push(e[33]),e[27])}])}):d.resolve()},function(a){return d.seq([function(a){return e[32]=d.createArray(),e[33]=d.i64.of_int32(e[27].length),d.i64.gt(e[33],d.i64.cast([0,0]))?d.loopAsync(e[33],function(a){return e[35]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[27],e[35]).then(function(a){return a=a,e[36]=a[0],e[37]=a[1],a})},function(a){return e[38]=(e[32].push(d.i64.to_string(e[36])),e[32])}])}):d.resolve()},function(a){return e[34]=e[32].join(","),e[29]=e[34]}])},function(a){return e[27].some(function(a){return d.i64.eq(e[19],a)})?e[30]=e[19]:e[30]=g,d.i64.neq(e[30],g)?e[31]=e[30]:e[31]=g,e[15]=e[31]}])},function(c){return d.i64.neq(e[15],g)?e[16]=e[15]:e[16]=d.i64.cast([0,0]),d.i64.neq(e[20],g)?e[17]=e[20]:e[17]=d.i64.cast([0,1]),d.i64.neq(e[21],g)?d.seq([function(c){return e[22]=new d.Map(),e[22].set("act_thread_id",a[0]),e[22].set("request_id",a[3]),e[22].set("tam_thread_subtype",d.i64.cast([0,0])),e[22].set("source",a[4]),d.nop(b("LSBase64Encode.nop"),f.ocmfClientStateBlob).then(function(a){return a=a,e[23]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),f.mailboxRootKeyBlob).then(function(a){return a=a,e[24]=a[0],a})},function(a){return e[25]=new d.Map(),e[25].set("ocmf_client_state_blob",e[23]==null?"":e[23]),e[25].set("mailbox_root_key",e[24]==null?"":e[24]),e[26]=d.createArray(),d.fe(d.ftr(d.db.table(169).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))}),function(a){a=a.item;return e[40]=(e[26].push(a.epochId),e[26])})},function(c){return e[27]=d.i64.of_int32(e[26].length),e[28]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",e[28],"Queried locally available epochs. Count: ",e[28],d.i64.to_string(e[27])].join("")),e[29]=new d.Map(),e[29].set("device_id",e[21]),e[29].set("raw_tokens",e[25]),e[29].set("locally_available_epochs",e[26]),e[30]=new d.Map(),e[30].set("reference_timestamp",a[2]),e[30].set("device_context",e[29]),e[30].set("message_id",a[1]),e[31]=new d.Map(),e[31].set("restore_context",e[22]),e[31].set("success",e[30]),d.i64.gt(d.i64.cast([0,0]),d.i64.cast([0,0]))?(e[40]=d.i64.of_float(Date.now()),e[32]=d.i64.add(e[40],d.i64.cast([0,0]))):e[32]=d.i64.cast([0,0]),e[33]=e[31].get("restore_context"),e[31],e[34]=e[31].get("success"),e[31],e[34]!==g?(e[40]=e[34].get("message_id"),e[34],e[35]=e[40]):e[35]="",e[36]=e[33].get("act_thread_id"),e[33],e[37]=":",e[38]=d.toJSON(e[31]),d.sp(b("LSIssueNewTaskAndGetTaskID"),["encrypted_backups_restore",e[37],e[36],e[37],e[35]].join(""),d.i64.cast([0,50035]),e[38],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,e[32]).then(function(a){return a=a,e[39]=a[0],a})},function(a){return e[18]=e[39]}]):d.seq([function(c){return e[22]=new d.Map(),e[22].set("error_code",d.i64.cast([0,1])),e[22].set("error_message",""),e[22].set("stored_procedure","issuePointQueryRestoreTask"),e[23]=new d.Map(),e[23].set("act_thread_id",a[0]),e[24]=new d.Map(),e[24].set("restore_context",e[23]),e[24].set("failure",e[22]),d.i64.gt(d.i64.cast([0,0]),d.i64.cast([0,0]))?(e[33]=d.i64.of_float(Date.now()),e[25]=d.i64.add(e[33],d.i64.cast([0,0]))):e[25]=d.i64.cast([0,0]),e[26]=e[24].get("restore_context"),e[24],e[27]=e[24].get("success"),e[24],e[27]!==g?(e[33]=e[27].get("message_id"),e[27],e[28]=e[33]):e[28]="",e[29]=e[26].get("act_thread_id"),e[26],e[30]=":",e[31]=d.toJSON(e[24]),d.sp(b("LSIssueNewTaskAndGetTaskID"),["encrypted_backups_restore",e[30],e[29],e[30],e[28]].join(""),d.i64.cast([0,50035]),e[31],g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,e[25]).then(function(a){return a=a,e[32]=a[0],a})},function(a){return e[18]=e[32]}])},function(a){return e[13]=e[18]}]))})},function(a){return e[3]=e[13]}]):d.seq([function(a){return function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] Point query restore v2 is disabled"),d.islc(d.ftr(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,c){var f=a.done;a=a.value;return f?(f=[g,g,g,g,g,d.i64.cast([0,1]),g,g,g,g,g,g,g,d.i64.cast([0,20])],e[13]=f[0],e[14]=f[1],e[15]=f[2],e[16]=f[3],e[17]=f[4],e[18]=f[5],e[19]=f[6],e[20]=f[7],e[21]=f[8],e[22]=f[9],e[23]=f[10],e[24]=f[11],e[25]=f[12],e[26]=f[13],f):(c=a.item,d.seq([function(a){return e[33]=c.backupTenancy,e[32]=c.encryptionVersion,d.i64.neq(g,g)?d.resolve(e[29]=g):d.seq([function(a){return e[34]=d.createArray(),d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[35]=a[0],a})},function(a){return e[35]?e[44]=(e[34].push(d.i64.cast([0,0])),e[34]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[36]=a[0],a})},function(a){return e[36]?e[44]=(e[34].push(d.i64.cast([0,2])),e[34]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[37]=a[0],a})},function(a){return e[37]?e[44]=(e[34].push(d.i64.cast([0,3])),e[34]):0,d.sp(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[38]=a[0],a})},function(a){return e[38]?e[44]=(e[34].push(d.i64.cast([0,4])),e[34]):0,e[39]=d.createArray(),e[40]=d.i64.of_int32(e[34].length),d.i64.gt(e[40],d.i64.cast([0,0]))?d.loopAsync(e[40],function(a){return e[44]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[34],e[44]).then(function(a){return a=a,e[45]=a[0],e[46]=a[1],a})},function(a){return e[47]=(e[39].push(e[45]),e[39])}])}):d.resolve()},function(a){return d.seq([function(a){return e[44]=d.createArray(),e[45]=d.i64.of_int32(e[39].length),d.i64.gt(e[45],d.i64.cast([0,0]))?d.loopAsync(e[45],function(a){return e[47]=a,d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[39],e[47]).then(function(a){return a=a,e[48]=a[0],e[49]=a[1],a})},function(a){return e[50]=(e[44].push(d.i64.to_string(e[48])),e[44])}])}):d.resolve()},function(a){return e[46]=e[44].join(","),e[41]=e[46]}])},function(a){return e[39].some(function(a){return d.i64.eq(e[32],a)})?e[42]=e[32]:e[42]=g,d.i64.neq(e[42],g)?e[43]=e[42]:e[43]=g,e[29]=e[43]}])},function(a){return d.i64.neq(e[29],g)?e[30]=e[29]:e[30]=d.i64.cast([0,0]),d.i64.neq(e[33],g)?e[31]=e[33]:e[31]=d.i64.cast([0,1]),a=[c.backupId,c.deviceId,c.mailboxRootKeyBlob,c.ocmfClientStateBlob,e[30],e[31],c.epochAuthPublicKeyBlob,c.epochAuthPrivateKeyBlob,c.devicePublicKeyBlob,c.devicePrivateKeyBlob,c.epochStoragePublicKeyBlob,c.epochStoragePrivateKeyBlob,c.obliviousValidationTokenBlob,c.authorityLevel],e[13]=a[0],e[14]=a[1],e[15]=a[2],e[16]=a[3],e[17]=a[4],e[18]=a[5],e[19]=a[6],e[20]=a[7],e[21]=a[8],e[22]=a[9],e[23]=a[10],e[24]=a[11],e[25]=a[12],e[26]=a[13],a}]))})},function(c){return d.i64.neq(e[13],g)?d.seq([function(c){return d.blobs.neq(e[16],g)?d.seq([function(c){return d.nop(b("LSGetBlobFromString.nop"),a[0]).then(function(a){return a=a,e[30]=a[0],a})},function(a){return d.nop(b("LSHmac_v2.nop"),d.blob("dGhyZWFkX2lkX3Njb3Bl"),e[30]).then(function(a){return a=a,e[31]=a[0],a})},function(a){return d.nop(b("LSOcmfClientMap.nop"),e[16],e[31]).then(function(a){return a=a,e[32]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[32]).then(function(a){return a=a,e[33]=a[0],a})},function(a){return e[54]=e[33]==null?"":e[33],d.nop(b("LSGetBlobFromString.nop"),d.i64.to_string(e[13])).then(function(a){return a=a,e[34]=a[0],a})},function(a){return d.nop(b("LSHmac_v2.nop"),d.blob("bWFpbGJveF9pZF9zY29wZQ=="),e[34]).then(function(a){return a=a,e[35]=a[0],a})},function(a){return d.nop(b("LSOcmfClientMap.nop"),e[16],e[35]).then(function(a){return a=a,e[36]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[36]).then(function(a){return a=a,e[37]=a[0],a})},function(c){return d.nop(b("LSGetBlobFromString.nop"),a[1]).then(function(a){return a=a,e[38]=a[0],a})},function(a){return d.nop(b("LSHmac_v2.nop"),d.blob("bWVzc2FnZV9pZF9zY29wZQ=="),e[38]).then(function(a){return a=a,e[39]=a[0],a})},function(a){return d.nop(b("LSOcmfClientMap.nop"),e[16],e[39]).then(function(a){return a=a,e[40]=a[0],a})},function(a){return d.nop(b("LSBase64Encode.nop"),e[40]).then(function(a){return a=a,e[41]=a[0],a})},function(c){return d.blobs.neq(e[15],g)?d.seq([function(c){return a[2]!==g?d.seq([function(c){return e[58]=d.createArray(),e[64]=(e[58].push(d.i64.cast([0,32])),e[58]),d.nop(b("LSGetBlobFromString.nop"),["thread_ope_key","_",a[0]].join("")).then(function(a){return a=a,e[59]=a[0],a})},function(a){return d.nop(b("LSCreateDerivedKeys.nop"),e[59],g,e[15],e[58]).then(function(a){return a=a,e[60]=a[0],a})},function(a){return e[60]?e[61]=!1:e[61]=!0,e[61]?d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[64]=d.createArray(),g!==g?e[65]=(e[64].push(g),e[64]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",e[64],d.i64.cast([0,3]))},function(a){return e[62]=g}]):d.seq([function(a){return d.ntop("Array",b("LSArrayGetObjectAt"),e[60],d.i64.cast([0,0])).then(function(a){return a=a,e[64]=a[0],e[65]=a[1],a})},function(a){return e[62]=e[64]}])},function(c){return d.blobs.neq(e[62],g)?d.seq([function(c){return d.nop(b("LSGetBlobFromInt64BE.nop"),d.i64.from_string(a[2])).then(function(a){return a=a,e[64]=a[0],a})},function(a){return d.nop(b("LSTruncateSortKey.nop"),e[64]).then(function(a){return a=a,e[65]=a[0],a})},function(a){return d.nop(b("LSOpeEncrypt.nop"),e[62],e[65],d.i64.cast([0,16])).then(function(a){return a=a,e[66]=a[0],a})},function(a){return d.nop(b("LSBinaryToHex.nop"),e[66]).then(function(a){return a=a,e[67]=a[0],a})},function(a){return e[63]=e[67]==null?"":e[67]}]):d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] OPE key is null"),e[64]=d.createArray(),g!==g?e[65]=(e[64].push(g),e[64]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","OPE key is null",e[64],d.i64.cast([0,3]))},function(a){return e[63]=g}])},function(a){return e[57]=e[63]}]):d.resolve(e[57]=g)},function(a){return e[42]=e[57]}]):d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Mailbox root key is null"),e[57]=d.createArray(),g!==g?e[58]=(e[57].push(g),e[57]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Mailbox root key is null",e[57],d.i64.cast([0,3]))},function(a){return e[42]=g}])},function(c){return a[0]!==g?d.seq([function(c){return d.nop(b("LSGetThreadTransportIdFromThreadId.nop"),a[0]).then(function(a){return a=a,e[57]=a[0],a})},function(a){return d.i64.neq(e[57],g)?d.seq([function(a){return d.db.table(173).fetch([[[e[57]]],"jid"]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[59]=g:(b=a.item,e[59]=d.i64.to_string(b.serverThreadKey))})},function(a){return e[58]=e[59]}]):d.seq([function(a){return function(a){d.logger(a).warn(a)}("[EncryptedBackups][MEBTableUtils] Failed to get server thread key, wa jid is null"),e[59]=d.createArray(),g!==g?e[60]=(e[59].push(g),e[59]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get server thread key, wa jid is null",e[59],d.i64.cast([0,2]))},function(a){return e[58]=g}])},function(a){return e[43]=e[58]}]):d.seq([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTableUtils] Failed to get server thread key, thread id is null"),e[57]=d.createArray(),g!==g?e[58]=(e[57].push(g),e[57]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get server thread key, thread id is null",e[57],d.i64.cast([0,3]))},function(a){return e[43]=g}])},function(c){return d.nop(b("LSGetThreadTransportIdFromThreadId.nop"),a[0]).then(function(a){return a=a,e[44]=a[0],a})},function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,3604]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[45]=a[0],a})},function(a){return e[45]?e[46]=!0:e[46]=!1,e[46]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[57]=d.createArray(),g!==g?e[58]=(e[57].push(g),e[57]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[57],d.i64.cast([0,3]))):d.resolve()},function(a){return e[43]!==g?e[47]=e[43]:e[47]="",d.i64.gt(d.i64.cast([0,0]),d.i64.cast([0,0]))?(e[57]=d.i64.of_float(Date.now()),e[48]=d.i64.add(e[57],d.i64.cast([0,0]))):e[48]=d.i64.cast([0,0]),d.sp(b("LSIssueNewTaskAndGetTaskID"),["encrypted_backups_restore",":",e[47]].join(""),d.i64.cast([0,50015]),"",g,g,d.i64.cast([0,0]),d.i64.cast([0,0]),g,g,e[48]).then(function(a){return a=a,e[49]=a[0],a})},function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,3601]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[50]=a[0],a})},function(a){return e[50]?e[51]=!0:e[51]=!1,e[51]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[57]=d.createArray(),g!==g?e[58]=(e[57].push(g),e[57]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[57],d.i64.cast([0,3]))):d.resolve()},function(b){return d.db.table(190).add({taskId:e[49],mailboxPartialId:e[37]==null?"":e[37],listId:e[54],numItems:d.i64.cast([0,1]),contentType:d.i64.cast([0,1]),startSortKey:e[42],traceId:a[3],isPointQuery:!0,messagePartialId:e[41]==null?"":e[41],newerNumItems:d.i64.cast([0,0]),unencryptedSortKey:a[2],messageId:a[1],serverThreadKey:e[43],waThreadId:e[44]})},function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,3605]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[52]=a[0],a})},function(a){return e[52]?e[53]=!0:e[53]=!1,e[53]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[57]=d.createArray(),g!==g?e[58]=(e[57].push(g),e[57]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[57],d.i64.cast([0,3]))):d.resolve()},function(b){return d.db.table(180).add({taskId:e[49],listId:e[54],threadId:a[0]})},function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,2513]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[55]=a[0],a})},function(a){return e[55]?e[56]=!0:e[56]=!1,e[56]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[57]=d.createArray(),g!==g?e[58]=(e[57].push(g),e[57]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[57],d.i64.cast([0,3]))):d.resolve()},function(a){return e[29]=e[49]}]):d.seq([function(c){return e[30]="Missing ocmf_client_state for IssuePointQueryRestoreTask",e[30]!==g?d.seq([function(c){return e[34]=["[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] ","",e[30]].join(""),function(a){d.logger(a).mustfix(a)}(e[34]),e[31]=d.createArray(),a[3]!==g?e[35]=(e[31].push(a[3]),e[31]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure",e[30],e[31],d.i64.cast([0,3]))},function(c){return a[3]!==g?d.seq([function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,85]),d.i64.cast([0,2]),e[34],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[35]=a[0],a})},function(a){return e[35]?e[36]=!0:e[36]=!1,e[36]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[37]=d.createArray(),g!==g?e[38]=(e[37].push(g),e[37]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[37],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[3]!==g?d.nop(b("LSFlushDataTrace.nop"),a[3]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[32]=a[0],a})},function(a){return e[32]?e[33]=!0:e[33]=!1,e[33]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[35]=d.createArray(),g!==g?e[36]=(e[35].push(g),e[35]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[35],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(c){return a[3]!==g?d.seq([function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[33]=a[0],a})},function(a){return e[33]?e[34]=!0:e[34]=!1,e[34]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[35]=d.createArray(),g!==g?e[36]=(e[35].push(g),e[35]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[35],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[3]!==g?d.nop(b("LSFlushDataTrace.nop"),a[3]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[31]?e[32]=!0:e[32]=!1,e[32]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[33]=d.createArray(),g!==g?e[34]=(e[33].push(g),e[33]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[33],d.i64.cast([0,3]))):d.resolve()}])},function(a){return e[29]=d.i64.cast([-1,4294967295])}])},function(a){return e[28]=e[29]}]):d.seq([function(c){return e[29]="Missing backup_id for IssuePointQueryRestoreTask",e[29]!==g?d.seq([function(c){return e[33]=["[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] ","",e[29]].join(""),function(a){d.logger(a).mustfix(a)}(e[33]),e[30]=d.createArray(),a[3]!==g?e[34]=(e[30].push(a[3]),e[30]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure",e[29],e[30],d.i64.cast([0,3]))},function(c){return a[3]!==g?d.seq([function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,85]),d.i64.cast([0,2]),e[33],g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[34]=a[0],a})},function(a){return e[34]?e[35]=!0:e[35]=!1,e[35]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[36]=d.createArray(),g!==g?e[37]=(e[36].push(g),e[36]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[36],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[3]!==g?d.nop(b("LSFlushDataTrace.nop"),a[3]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[31]?e[32]=!0:e[32]=!1,e[32]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[34]=d.createArray(),g!==g?e[35]=(e[34].push(g),e[34]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[34],d.i64.cast([0,3]))):d.resolve()}]):d.seq([function(c){return a[3]!==g?d.seq([function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,85]),d.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] ","",""].join(""),g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[32]=a[0],a})},function(a){return e[32]?e[33]=!0:e[33]=!1,e[33]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[34]=d.createArray(),g!==g?e[35]=(e[34].push(g),e[34]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[34],d.i64.cast([0,3]))):d.resolve()}]):d.resolve()},function(c){return a[3]!==g?d.nop(b("LSFlushDataTrace.nop"),a[3]):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[30]=a[0],a})},function(a){return e[30]?e[31]=!0:e[31]=!1,e[31]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[32]=d.createArray(),g!==g?e[33]=(e[32].push(g),e[32]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[32],d.i64.cast([0,3]))):d.resolve()}])},function(a){return e[28]=d.i64.cast([-1,4294967295])}])},function(a){return e[3]=e[28]}])},function(c){return a[3]!==g?d.sp(b("LSAppendDataTraceAddon"),a[3],d.i64.cast([0,2513]),d.i64.cast([0,2]),g,g):d.resolve()},function(a){return d.sp(b("LSIsMobileClient")).then(function(a){return a=a,e[4]=a[0],a})},function(a){return e[4]?e[5]=!0:e[5]=!1,e[5]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[13]=d.createArray(),g!==g?e[14]=(e[13].push(g),e[13]):0,d.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[13],d.i64.cast([0,3]))):d.resolve()},function(a){return e[6]=d.i64.of_float(Date.now()),e[8]="Finishing execution. Execution time: ",e[9]=d.i64.to_string(d.i64.sub(e[6],e[0])),e[11]=" ms",e[7]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure] ",e[7],e[8],e[7],e[9],e[7],e[11]].join("")),e[10]=",",e[12]=d.createArray(),g!==g?e[13]=(e[12].push(g),e[12]):0,d.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssuePointQueryRestoreTaskStoredProcedure",[e[8],e[10],e[9],e[10],e[11]].join(""),e[12],d.i64.cast([0,4]))},function(a){return f[0]=e[3]}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop","LSWriteToPendingBackupsContext"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueThreadRemove] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,h){var i=e.done;e=e.value;return i?(d[12]=c.createArray(),d[15]=(d[12].push("Skipping thread remove since EB is disabled. act thread id = "),d[12]),d[15]=(d[12].push(a[0]),d[12]),d[13]=d[12].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[13]].join("")),d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,1])),d[14].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[14].set("error_message",""),i=[f,d[14]],d[2]=i[0],d[3]=i[1],i):(h=e.item,c.seq([function(a){return d[18]=h.backupTenancy,d[17]=h.encryptionVersion,c.i64.neq(f,f)?c.resolve(d[12]=f):c.seq([function(a){return d[19]=c.createArray(),c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[29]=(d[19].push(c.i64.cast([0,0])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[29]=(d[19].push(c.i64.cast([0,2])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[29]=(d[19].push(c.i64.cast([0,3])),d[19]):0,c.sp(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[29]=(d[19].push(c.i64.cast([0,4])),d[19]):0,d[24]=c.createArray(),d[25]=c.i64.of_int32(d[19].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[29]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[19],d[29]).then(function(a){return a=a,d[30]=a[0],d[31]=a[1],a})},function(a){return d[32]=(d[24].push(d[30]),d[24])}])}):c.resolve()},function(a){return c.seq([function(a){return d[29]=c.createArray(),d[30]=c.i64.of_int32(d[24].length),c.i64.gt(d[30],c.i64.cast([0,0]))?c.loopAsync(d[30],function(a){return d[32]=a,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[24],d[32]).then(function(a){return a=a,d[33]=a[0],d[34]=a[1],a})},function(a){return d[35]=(d[29].push(c.i64.to_string(d[33])),d[29])}])}):c.resolve()},function(a){return d[31]=d[29].join(","),d[26]=d[31]}])},function(a){return d[24].some(function(a){return c.i64.eq(d[17],a)})?d[27]=d[17]:d[27]=f,c.i64.neq(d[27],f)?d[28]=d[27]:d[28]=f,d[12]=d[28]}])},function(e){return c.i64.neq(d[12],f)?d[13]=d[12]:d[13]=c.i64.cast([0,0]),c.i64.neq(d[18],f)?d[14]=d[18]:d[14]=c.i64.cast([0,1]),c.i64.neq(h.deviceId,f)?c.seq([function(e){return c.i64.eq(d[14],c.i64.cast([0,3]))?d[19]=c.i64.cast([0,4]):d[19]=c.i64.cast([0,0]),d[20]=c.i64.of_float(Date.now()),c.sp(b("LSIssueNewTaskAndGetTaskID"),["eb_upload",":",a[0]].join(""),c.i64.cast([0,50026]),"",f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,93]),f,c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[20],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[20],c.i64.cast([0,0]))))).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.sp(b("LSWriteToPendingBackupsContext"),d[21],"",c.i64.cast([0,2]),c.i64.cast([0,2]),c.i64.cast([0,1]),a[0],a[0],a[1],f,a[3],f,f,a[2],a[4],f,f,f,f,f,d[19],!1)},function(b){return c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued message backup task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[25]=(d[23].push(", otid = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[24]=d[23].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[24]].join(""))):(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued message remove task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[25]=(d[23].push(", otid = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[24]=d[23].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[24]].join(""))):(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued thread remove task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[24]=d[23].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[24]].join(""))),d[22]=new c.Map(),d[22].set("task_id",d[21]),b=[d[22],f],d[15]=b[0],d[16]=b[1],b}]):c.resolve((d[19]=c.createArray(),d[22]=(d[19].push("Skipping thread remove since EB is disabled. act thread id = "),d[19]),d[22]=(d[19].push(a[0]),d[19]),d[20]=d[19].join(f||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[20]].join("")),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,24])),d[21].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[21].set("error_message",""),e=[f,d[21]],d[15]=e[0],d[16]=e[1],e))},function(a){return a=[d[15],d[16]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ",d[6],d[7],d[6],d[8],d[6],d[10]].join("")),d[9]=",",d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"issueThreadRemove",[d[7],d[9],d[8],d[9],d[10]].join(""),d[11],c.i64.cast([0,4]))},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSProcessBackupIds",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] Beginning execution."),a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1487]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[1]?d[2]=!0:d[2]=!1,d[2]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[12]=c.createArray(),f!==f?d[13]=(d[12].push(f),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[12],c.i64.cast([0,3]))):c.resolve()},function(e){return c.db.table(172).fetch([[[c.i64.cast([0,1])]]]).next().then(function(e,h){var i=e.done;e=e.value;return i?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1488]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[14]=c.createArray(),f!==f?d[15]=(d[14].push(f),d[14]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[14],c.i64.cast([0,3]))):c.resolve()},function(a){return d[3]=c.i64.cast([0,0])}]):(h=e.item,c.seq([function(e){return d[14]=h.backupId,d[13]=h.authorityLevel,c.i64.eq(d[13],c.i64.cast([0,20]))?c.resolve(d[12]=c.i64.cast([0,1])):c.seq([function(e){return c.i64.eq(d[13],c.i64.cast([0,80]))?c.seq([function(e){return c.i64.eq(d[14],f)?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1492]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),f!==f?d[20]=(d[19].push(f),d[19]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(a){return d[16]=c.i64.cast([0,2])}]):c.seq([function(e){return c.i64.eq(d[14],c.i64.cast([-1,4294967295]))?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[18]?d[19]=!0:d[19]=!1,d[19]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[20]=c.createArray(),f!==f?d[21]=(d[20].push(f),d[20]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[20],c.i64.cast([0,3]))):c.resolve()},function(a){return d[17]=c.i64.cast([-1,4294967295])}]):c.seq([function(e){return c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.backupId,d[14])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1490]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),f!==f?d[23]=(d[22].push(f),d[22]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()},function(a){return d[18]=c.i64.cast([0,4])}]):(e.item,c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1491]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!0:d[21]=!1,d[21]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),f!==f?d[23]=(d[22].push(f),d[22]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],c.i64.cast([0,3]))):c.resolve()},function(a){return d[18]=c.i64.cast([0,3])}]))})},function(a){return d[17]=d[18]}])},function(a){return d[16]=d[17]}])},function(a){return d[15]=d[16]}]):c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),f,f):c.resolve()},function(a){return c.sp(b("LSIsMobileClient")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]?d[17]=!0:d[17]=!1,d[17]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]=c.createArray(),f!==f?d[19]=(d[18].push(f),d[18]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[18],c.i64.cast([0,3]))):c.resolve()},function(a){return d[15]=c.i64.cast([-1,4294967295])}])},function(a){return d[12]=d[15]}])},function(a){return d[3]=d[12]}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] ",d[6],d[7],d[6],d[8],d[6],d[10]].join("")),d[9]=",",d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsProcessBackupIdsStoredProcedure",[d[7],d[9],d[8],d[9],d[10]].join(""),d[11],c.i64.cast([0,4]))},function(a){return e[0]=d[3]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSOptimisticSetPinnedMessage",["LSIssueNewTaskWithExtraOperations","LSSetPinnedMessage"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(d){return c.i64.eq(a[3],c.i64.cast([0,2]))?c.sp(b("LSSetPinnedMessage"),a[0],a[1],a[2],c.i64.cast([0,1])):c.sp(b("LSSetPinnedMessage"),a[0],a[1],a[2],a[3])},function(e){return c.i64.eq(a[3],c.i64.cast([0,2]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[0].set("pinned_location",c.i64.cast([0,1])),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskWithExtraOperations"),["pin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,430]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f)):c.i64.eq(a[3],c.i64.cast([0,1]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskWithExtraOperations"),["pin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,430]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f)):c.i64.eq(a[3],c.i64.cast([0,0]))?(d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("timestamp_ms",a[2]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskWithExtraOperations"),["unpin_msg_v2","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,431]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f)):c.resolve(0)}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSReportMessageInCommunityChannel",["LSIssueNewError","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),f).then(function(a){return d[7]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),f).then(function(a){return d[8]=a})},function(a){return c.sp(b("LSIssueNewError"),f,c.i64.cast([0,1545093]),d[7],d[8],f,f)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("message_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("thread_key"),d[2],d[5]=c.toJSON(d[2]),c.sp(b("LSIssueNewTaskAndGetTaskID"),c.i64.to_string(d[4]),c.i64.cast([0,374]),d[5],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,d[3]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSReportAppState",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("app_state",a[0]),d[0].set("request_id",a[1]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"ls_presence_report_app_state",c.i64.cast([0,123]),d[1],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("useCometHomeChatSettingsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9976213915752418"}),null);
__d("useCometHomeChatSettingsQuery.graphql",["useCometHomeChatSettingsQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"call_blocked_until",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sounds_on",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometHomeChatSettingsQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useCometHomeChatSettingsQuery",selections:a},params:{id:b("useCometHomeChatSettingsQuery_facebookRelayOperation"),metadata:{},name:"useCometHomeChatSettingsQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWCallBlockedUntilSettingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4850274235008928"}),null);
__d("MWCallBlockedUntilSettingMutation.graphql",["MWCallBlockedUntilSettingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SetCallBlockedUntilSettingResponsePayload",kind:"LinkedField",name:"set_call_blocked_until_setting",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"call_blocked_until",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWCallBlockedUntilSettingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWCallBlockedUntilSettingMutation",selections:c},params:{id:b("MWCallBlockedUntilSettingMutation_facebookRelayOperation"),metadata:{},name:"MWCallBlockedUntilSettingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MWChatChangeSoundsSettingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4773571059407985"}),null);
__d("MWChatChangeSoundsSettingMutation.graphql",["MWChatChangeSoundsSettingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SetChatSoundsSettingResponsePayload",kind:"LinkedField",name:"set_chat_sounds_setting",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_sounds_on",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatChangeSoundsSettingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatChangeSoundsSettingMutation",selections:c},params:{id:b("MWChatChangeSoundsSettingMutation_facebookRelayOperation"),metadata:{},name:"MWChatChangeSoundsSettingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MWChatChangeTurnOffTabsSettingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5128673580550938"}),null);
__d("MWChatChangeTurnOffTabsSettingMutation.graphql",["MWChatChangeTurnOffTabsSettingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SetTurnOffChatTabsSettingResponsePayload",kind:"LinkedField",name:"set_turn_off_chat_tabs_setting",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_turned_off",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatChangeTurnOffTabsSettingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatChangeTurnOffTabsSettingMutation",selections:c},params:{id:b("MWChatChangeTurnOffTabsSettingMutation_facebookRelayOperation"),metadata:{},name:"MWChatChangeTurnOffTabsSettingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7119327994775660"}),null);
__d("MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription.graphql",["MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatSoundsSettingSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_sounds_setting_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_sounds_enabled",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription",selections:c},params:{id:b("MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_sounds_setting_subscribe"},name:"MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4706293842827361"}),null);
__d("MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription.graphql",["MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatTabsSettingSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_tabs_setting_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_tabs_enabled",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription",selections:c},params:{id:b("MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_tabs_setting_subscribe"},name:"MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("MWChatSidebarStateSettingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5374077802611124"}),null);
__d("MWChatSidebarStateSettingMutation.graphql",["MWChatSidebarStateSettingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ChatSidebarIsCollapsedResponsePayload",kind:"LinkedField",name:"chat_sidebar_is_collapsed",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_sidebar_is_collapsed",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatSidebarStateSettingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatSidebarStateSettingMutation",selections:c},params:{id:b("MWChatSidebarStateSettingMutation_facebookRelayOperation"),metadata:{},name:"MWChatSidebarStateSettingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("EncryptedBackupsDYIPasswordReauthDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8728569200551000"}),null);
__d("EncryptedBackupsDYIPasswordReauthDialogQuery$Parameters",["EncryptedBackupsDYIPasswordReauthDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("EncryptedBackupsDYIPasswordReauthDialogQuery_facebookRelayOperation"),metadata:{},name:"EncryptedBackupsDYIPasswordReauthDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometFRXQuery$Parameters",["CometFRXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometFRXQuery_facebookRelayOperation"),metadata:{},name:"CometFRXQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("LogoutHandler.react",["cr:11880"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:11880")}),98);
__d("XMessengerDotComLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logout/",{next:{type:"String"}})}),null);
__d("MessengerLogoutHandler.react",["DTSG","DTSGUtils","Run","SprinkleConfig","WebStorage","XMessengerDotComLogoutController","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;e=b.forwardRef;var k=b.useCallback,l=b.useEffect,m=b.useImperativeHandle,n=b.useRef;function a(a,b){var e=a.shouldInitiateLogout,f=n(!1),g=n(),i=k(function(){f.current=!0;var a=g.current;if(a==null){c("recoverableViolation")("Unable to get logout form ref to submit","comet_ui");return}d("Run").onUnload(function(){var a;(a=(h||(h=c("WebStorage"))).getSessionStorage())==null?void 0:a.clear();(a=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:a.clear()});a.submit()},[g]);m(b,function(){return{logout:i}});l(function(){g.current==null?c("recoverableViolation")("Expected logout form ref to be valid","comet_ui"):e===!0&&i()},[i,e]);a=c("XMessengerDotComLogoutController").getURIBuilder().getURI();b={};var o=d("DTSG").getToken();o!=null&&o.length>0&&(b.fb_dtsg=o,c("SprinkleConfig").param_name.length>0&&(b[c("SprinkleConfig").param_name]=c("DTSGUtils").getNumericValue(o)));return j.jsx("form",{action:a.toString(),method:"POST",ref:g,style:{display:"none"},children:Object.entries(b).map(function(a){var b=a[0];a=a[1];return j.jsx("input",{name:b,type:"hidden",value:a},b)})})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("CometMenuItemWithSubmenu.react",["fbt","ix","BaseContextualLayerAvailableHeightContext","BaseMultiPageViewContext","CometComponentWithKeyCommands.react","CometIcon.react","CometKeys","CometMenuBase.react","CometMenuItemBase.react","CometMenuItemIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useContext,n=b.useMemo,o=b.useState,p=k.createContext([]);function a(a,b){var e=a.disabled,f=a.icon,g=a.iconColor,j=a.iconNode,r=a.iconSize,s=a.iconStyle,t=a.onClick,u=a.primaryText,v=a.secondaryText,w=a.submenu;a=babelHelpers.objectWithoutPropertiesLoose(a,["disabled","icon","iconColor","iconNode","iconSize","iconStyle","onClick","primaryText","secondaryText","submenu"]);var x=m(p),y=n(function(){return[].concat(x,[u])},[x,u]),z=o(!1),A=z[0],B=z[1];z=k.jsx(c("CometIcon.react"),{color:"secondary",icon:d("fbicon")._(i("492572"),20)});var C=m(c("BaseMultiPageViewContext")),D=l(function(){if(C==null)return;var a=w.header,b=babelHelpers.objectWithoutPropertiesLoose(w,["header"]),d=function(){B(!1),a==null?void 0:a.onPressBack==null?void 0:a.onPressBack(),C==null?void 0:C.popPage==null?void 0:C.popPage()},e={meta:a!=null?a.meta:v,onPressBack:d,title:a!=null?a.title:u};B(!0);C.pushPage(function(){var a=[{command:{key:c("CometKeys").LEFT},description:h._("__JHASH__L-rxpu3ax8O__JHASH__"),handler:d},{command:{key:c("CometKeys").ESCAPE},description:h._("__JHASH__L-rxpu3ax8O__JHASH__"),handler:d}];a=k.jsx(p.Provider,{value:y,children:k.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:a,children:k.jsx(q,babelHelpers["extends"]({},b,{header:e}))})});for(var f=y.length-1;f>=0;f--)a=k.jsx("div",{"aria-label":y[f],role:"menu",children:a});return a})},[C,w,v,u,y]),E=function(a){t&&t(a),D()},F=n(function(){return[{command:{key:c("CometKeys").RIGHT},description:h._("__JHASH__hxu2eUUYT_R__JHASH__"),handler:D}]},[D]);return k.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:F,children:k.jsx(c("CometMenuItemBase.react"),babelHelpers["extends"]({},a,{"aria-expanded":A,"aria-haspopup":"menu",aux:f?k.jsx("div",{className:"xz62fqu x16ldp7u",children:z}):z,disabled:e,iconNode:j!=null?j:f?k.jsx(c("CometMenuItemIcon.react"),{disabled:e,icon:f,iconColor:g,iconSize:r,use:s}):null,onClick:E,preventClosingMenuOnSelect:!0,primaryText:u,ref:b,role:"menuitem",secondaryText:v}))})}a.displayName=a.name+" [from "+f.id+"]";e=k.forwardRef(a);function q(a){var b=a.items,d=a.truncate;d=d===void 0?!0:d;a=babelHelpers.objectWithoutPropertiesLoose(a,["items","truncate"]);var e=m(c("BaseContextualLayerAvailableHeightContext"));return k.jsx(c("CometMenuBase.react"),babelHelpers["extends"]({},a,{maxHeight:d?(a=e)!=null?a:0:void 0,children:b}))}q.displayName=q.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("createCommitMutation_DEPRECATED",["Promise","cr:819055"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,c,d){return new(h||(h=b("Promise")))(function(e,f){return b("cr:819055").commitMutation(a,babelHelpers["extends"]({},d,{variables:{input:c},onCompleted:function(a,b){b&&b.length?f(b):e(a)},onError:function(a){return f([a])}}))})}function a(a,b){return function(c){return i(a,c,b)}}function c(a){return function(b,c){return i(b,c,a)}}function d(a,b){return function(c){return i(a,c,b(c))}}g.createCommitMutation_DEPRECATED=a;g.createCommitMutationForEnvironment_DEPRECATED=c;g.createCommitMutationWithVariables_DEPRECATED=d}),98);
__d("MWCallBlockedUntilSettingMutation",["MWCallBlockedUntilSettingMutation.graphql","createCommitMutation_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h;a=d("createCommitMutation_DEPRECATED").createCommitMutationForEnvironment_DEPRECATED({mutation:h!==void 0?h:h=b("MWCallBlockedUntilSettingMutation.graphql")});g.commit=a}),98);
__d("MWChatChangeSoundsSettingMutation",["MWChatChangeSoundsSettingMutation.graphql","createCommitMutation_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h;a=d("createCommitMutation_DEPRECATED").createCommitMutationForEnvironment_DEPRECATED({mutation:h!==void 0?h:h=b("MWChatChangeSoundsSettingMutation.graphql")});g.commit=a}),98);
__d("MWChatChangeTurnOffTabsSettingMutation",["MWChatChangeTurnOffTabsSettingMutation.graphql","createCommitMutation_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h;a=d("createCommitMutation_DEPRECATED").createCommitMutationForEnvironment_DEPRECATED({mutation:h!==void 0?h:h=b("MWChatChangeTurnOffTabsSettingMutation.graphql")});g.commit=a}),98);
__d("MWChatSidebarStateSettingMutation",["CometRelay","MWChatSidebarStateSettingMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("MWChatSidebarStateSettingMutation.graphql");function a(a){var b=a.environment,c=a.isCollapsed,e=a.onCompleted;a=a.onError;d("CometRelay").commitMutation(b,{mutation:i,onCompleted:e,onError:a,variables:{input:{is_collapsed:c}}})}g["default"]=a}),98);
__d("MWChatSoundsSettingSubscription",["CometRelay","MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("MWChatSoundsSettingSubscription_MessengerSoundsSettingSubscription.graphql");function a(a,b){return d("CometRelay").requestSubscription(a,{onNext:b,subscription:i,variables:{input:{}}})}g.subscribe=a}),98);
__d("MWChatTabsSettingSubscription",["CometRelay","MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("MWChatTabsSettingSubscription_MessengerChatTabsSettingSubscription.graphql");function a(a,b){return d("CometRelay").requestSubscription(a,{onNext:b,subscription:i,variables:{input:{}}})}g.subscribe=a}),98);
__d("useCometHomeChatSettings",["Actor","CometRelay","MWCallBlockedUntilSettingMutation","MWChatChangeSoundsSettingMutation","MWChatChangeTurnOffTabsSettingMutation","MWChatSidebarStateSettingMutation","MWChatSoundsSettingSubscription","MWChatTabsSettingSubscription","RTWebCallBlockedSettingSubscription","react","useCometHomeChatSettingsQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;f=i||d("react");var j=f.useCallback,k=f.useEffect,l=function(a,b){return function(c){c=c.getRoot();if(c==null)return;c=c.getLinkedRecord("viewer");if(c==null)return;c.setValue(b,a)}},m=h!==void 0?h:h=b("useCometHomeChatSettingsQuery.graphql");function a(a){var b,c,e,f;n();a=d("CometRelay").usePreloadedQuery(m,a);b=(b=(b=a.viewer)==null?void 0:b.call_blocked_until)!=null?b:0;c=(c=(c=a.viewer)==null?void 0:c.chat_sounds_on)!=null?c:!0;e=((e=a.viewer)==null?void 0:e.chat_tabs_turned_off)===!0;f=((f=a.viewer)==null?void 0:f.chat_sidebar_is_collapsed)===!0;a=((a=a.viewer)==null?void 0:a.chat_visibility)===!0;return{activeStatusOn:a,callBlockedUntil:b,chatSidebarIsCollapsed:f,chatSoundsOn:c,chatTabsTurnedOff:e}}function e(){var a=d("CometRelay").useRelayEnvironment();return{onChangeSidebarIsCollapsedSetting:function(b){c("MWChatSidebarStateSettingMutation")({environment:a,isCollapsed:b})},onChangeSoundsSetting:function(b){d("MWChatChangeSoundsSettingMutation").commit(a,{sounds_on:b})},onChangeTurnOffTabsSetting:function(b){d("MWChatChangeTurnOffTabsSettingMutation").commit(a,{turn_off_chat_tabs:b})},setCallBlockedUntil:function(b){d("MWCallBlockedUntilSettingMutation").commit(a,{call_blocked_until:b})}}}f=function(){var a=d("CometRelay").useQueryLoader(m),b=a[0],c=a[1];a=j(function(){return c({})},[c]);k(function(){return c({})},[c]);return[b,a]};function n(){var a=d("CometRelay").useRelayEnvironment(),b=d("Actor").useActor(),c=b[0];k(function(){var b={viewer_id:c},e=[d("RTWebCallBlockedSettingSubscription").subscribe(a,b,function(b){b=b==null?void 0:b.rtweb_call_blocked_setting_subscribe;b!=null&&a.commitUpdate(l("call_blocked_until",b.call_blocked_until))}),d("MWChatSoundsSettingSubscription").subscribe(a,function(b){b=b==null?void 0:b.messenger_chat_sounds_setting_subscribe;b!=null&&a.commitUpdate(l("chat_sounds_on",b.chat_sounds_enabled))}),d("MWChatTabsSettingSubscription").subscribe(a,function(b){b=b==null?void 0:b.messenger_chat_tabs_setting_subscribe;b!=null&&a.commitUpdate(l("chat_tabs_turned_off",!b.chat_tabs_enabled))})];return function(){e.forEach(function(a){return a.dispose()})}})}g.query=m;g.useCometHomeChatSettings=a;g.useCometHomeChatSettingsMutations=e;g.useCometHomeChatSettingsPreloadedQuery=f}),98);
__d("useCometLexicalDragAndDrop",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a,b){var c=b.onDragEnter,d=b.onDragLeave,e=b.onDragOver,f=b.onDrop,g=b.onPaste;i(function(){if(a!=null)return a.registerRootListener(function(a,b){b!=null&&(c&&b.removeEventListener("dragenter",c),d&&b.removeEventListener("dragleave",d),e&&b.removeEventListener("dragover",e),f&&b.removeEventListener("drop",f,!0),g&&b.removeEventListener("paste",g,!0)),a!==null&&(c&&a.addEventListener("dragenter",c),d&&a.addEventListener("dragleave",d),e&&a.addEventListener("dragover",e),f&&a.addEventListener("drop",f,!0),g&&a.addEventListener("paste",g,!0))})},[a,c,d,e,f,g])}g["default"]=a}),98);
__d("useCometLexicalFileDragAndDrop",["react","useCometLexicalDragAndDrop"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useRef;function a(a){var b=a.editor,d=a.isMimeTypeAcceptable,e=a.onHover,f=e===void 0?function(){}:e;e=a.onSubmit;var g=e===void 0?function(){}:e,h=j(0),k=i(function(a){return Array.from(a).filter(d)},[d]);a=i(function(a){h.current++;var b=a.dataTransfer;if(b==null)return f([],!0);b=k(b.items);b.length>0&&a.preventDefault();return f(b,!0)},[k,f]);e=i(function(a){h.current--;if(h.current===0)return f([],!1)},[f]);var l=i(function(a){var b=a.dataTransfer;if(b==null)return f([],!0);b=k(b.items);b.length>0&&a.preventDefault();return f(b,!0)},[k,f]),m=i(function(a,b){b=k(b.items);b=b.map(function(a){return a.getAsFile()}).filter(Boolean);if(b.length>0){a.stopPropagation();a.preventDefault();return g(b)}else return g([])},[k,g]),n=i(function(a){var b=a.dataTransfer;h.current=0;f([],!1);if(b!=null)return m(a,b);else return g([])},[m,f,g]),o=i(function(a){var b=a.clipboardData;if(b==null)return g([]);var c=b.types;c=c.includes("text/plain")&&c.includes("text/html")||c.includes("text/rtf");return c?g([]):m(a,b)},[m,g]);c("useCometLexicalDragAndDrop")(b,{onDragEnter:a,onDragLeave:e,onDragOver:l,onDrop:n,onPaste:o})}g["default"]=a}),98);
__d("MDSMenuItemWithSubmenu.react",["CometMenuItemWithSubmenu.react","MDSIconSizes","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){var e=a.iconStyle;e=e===void 0?"contained":e;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconStyle"]);return i.jsx(c("CometMenuItemWithSubmenu.react"),babelHelpers["extends"]({},a,{iconSize:d("MDSIconSizes").MDS_MENU_ITEM_ICON_SIZE,iconStyle:e,ref:b}))}a.displayName=a.name+" [from "+f.id+"]";b=i.forwardRef(a);g["default"]=b}),98);
__d("MDSNullStateIcon",["ix","ImageIconSource"],(function(a,b,c,d,e,f,g,h){"use strict";a={dark:new(c("ImageIconSource"))(h("210377"),48,48),"default":new(c("ImageIconSource"))(h("210379"),48,48)};g["default"]=a}),98);
__d("MDSReloadNullStateIcon",["ix","ImageIconSource"],(function(a,b,c,d,e,f,g,h){"use strict";a={dark:new(c("ImageIconSource"))(h("210435"),48,48),"default":new(c("ImageIconSource"))(h("210437"),48,48)};g["default"]=a}),98);
__d("MWXMenuItemWithSubmenu.react",["cr:10022"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:10022")}),98);
__d("LSDataTraceTag",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);
__d("MAWBridgeTrace",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h,i){var j=a.ack,k=a.externalId,l=a.ts;a=a.type;var m=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:j,externalId:k,isFirstMsg:!!f,openMessageOtid:e,openMessageParticipantCount:g,participantCount:h,threadJid:b,threadKey:i,threadType:m,traceType:c,ts:l,type_:a}}function b(a,b,c){return{traceContext:c,traceId:b,traceType:a}}function c(a,b,c,d){return{errorMessage:d,event:b,externalIds:a,traceType:c}}function e(a,b,c,d,e,f){return{checkPointId:a,dataTraceId:b,errorMessage:c,shouldFlush:d,syncChannel:e,tags:f}}g.createBridgeStartTraceData=a;g.createBridgeStartTraceWithTraceIdData=b;g.createBridgeUpdateTraceData=c;g.createBridgeTraceRecordCheckpointData=e}),98);
__d("MAWTraceUtils",["LSDataTraceCheckPoint","LSDataTraceTag","LSIntEnum","LSRequestId","MAWBridge","MAWBridgeTrace","MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="backup_upload",j="media_backup",k="vesta_registration",l="vesta_login";function m(){return c("LSRequestId").generate()}function a(a,b,c){c=(c=c)!=null?c:m();d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTraceWithTraceId",value:d("MAWBridgeTrace").createBridgeStartTraceWithTraceIdData(a,c,b)}]},!0);return c}function n(a,b,c,e,f){if(a!=null){c=c.length>0?c.map(function(a){return a.toString()}).join(","):void 0;d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"TraceRecordCheckpoint",value:d("MAWBridgeTrace").createBridgeTraceRecordCheckpointData(b,a,f,e,-1,c)}]},!0)}}function b(a,b,e,f){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),e,!0,f)}function e(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function f(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function o(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("LSDataTraceTag").messageTypeText;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("LSDataTraceTag").messageTypeFutureproof;case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return d("LSDataTraceTag").messageTypeCiphertext;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return d("LSDataTraceTag").messageTypeUnavailable;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("LSDataTraceTag").messageTypeImage;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("LSDataTraceTag").messageTypeVideo;case d("MAWMsgType").MSG_TYPE.PTT:return d("LSDataTraceTag").messageTypePtt;case d("MAWMsgType").MSG_TYPE.ADMIN:return d("LSDataTraceTag").messageTypeAdmin;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("LSDataTraceTag").messageTypeRevoked;case d("MAWMsgType").MSG_TYPE.GIF:return d("LSDataTraceTag").messageTypeGif;case d("MAWMsgType").MSG_TYPE.STICKER:return d("LSDataTraceTag").messageTypeSticker;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return d("LSDataTraceTag").messageTypeExpiredEphemeral;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("LSDataTraceTag").messageTypeEphemeralSettingAdmin;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("LSDataTraceTag").messageTypeEphemeralSyncResponse;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("LSDataTraceTag").messageTypeEphemeralScreenshotAction;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("LSDataTraceTag").messageTypeDeleteForMe;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:return d("LSDataTraceTag").messageTypeEphemeralSettingChangeFromCurrentDevice;case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("LSDataTraceTag").messageTypeAlertICDC;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("LSDataTraceTag").messageTypeGroupInvite;case d("MAWMsgType").MSG_TYPE.XMA:return d("LSDataTraceTag").messageTypeXMA;case d("MAWMsgType").MSG_TYPE.REACTION:return d("LSDataTraceTag").messageTypeReaction;case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return d("LSDataTraceTag").messageTypeSenderKeyDistribution;default:return d("LSDataTraceTag").messageTypeNone}}g.CONTEXT_BACKUP_UPLOAD=i;g.CONTEXT_MEDIA_BACKUP=j;g.CONTEXT_VESTA_REGISTRATION=k;g.CONTEXT_VESTA_LOGIN=l;g.createTraceId=m;g.startNewTrace=a;g.recordCheckpointForTrace=n;g.recordFailureAndFlushForTraceId=b;g.recordSuccessAndFlushForTraceId=e;g.recordInvalidUploadRequestAndFlushTrace=f;g.getTagForMsgType=o}),98);
__d("MAWReceiveToUploadUtils",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;b=5;c=100;var i=(h||(h=d("I64"))).of_int32(c*100),j=h.of_int32(c*b),k=new RegExp(/^[1-9]{1}[0-9]*$/);function a(a){if(!k.test(a))return!1;try{a=(h||(h=d("I64"))).of_string(a);return h.compare(h.mod_(a,i),j)<0}catch(a){return!1}}g.checkUploadEligbility=a}),98);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]);c=a;f["default"]=c}),66);
__d("LSMEBTaskCreationSource",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37});f["default"]=a}),66);
__d("MAWBridgeIssuePointQueryHandler",["I64","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSIssuePointQueryRestoreTask","LSMEBTaskCreationSource","MAWEncryptedBackupUtils","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e){return d("MAWEncryptedBackupUtils").getBackupTenancy(a).then(function(f){if(f==null)return(j||(j=b("Promise"))).resolve();if(!(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION)))return(j||(j=b("Promise"))).resolve();f=e.startSortKey;if(f!=null)return c("LSIssuePointQueryRestoreTask")(e.threadId,e.messageId,f,void 0,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").EB_POINT_QUERY_IN_ACT),c("LSFactory")(a)).then(function(){});else return c("LSIssuePointQueryRestoreTask")(e.threadId,e.messageId,void 0,void 0,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").EB_POINT_QUERY_IN_ACT),c("LSFactory")(a)).then(function(){})})}g.call=a}),98);
__d("ArmadilloDataTraceType",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("13");g.armadilloMessageSend=a}),98);
__d("MAWBridgeTraceUtils",["I64","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c,e){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("data_trace_meta")).filter(function(a){var b=a.contextThree;if(b!=null&&c===b&&(i||(i=d("I64"))).equal(a.traceType,e))return a.shouldFlush===!1;else return!1})).then(function(a){if(a.length!==0)return(h||(h=b("Promise"))).resolve(a[0].traceId);else return(h||(h=b("Promise"))).resolve()})}g.getTraceId=a}),98);
__d("MAWBridgeStartTraceHandler",["ArmadilloDataTraceCheckPoint","ArmadilloDataTraceType","I64","LSAppendDataTraceAddon","LSDataTraceTag","LSFactory","LSRequestId","MAWAckLevel","MAWBridgeTraceUtils","MAWMsg","MAWTimeUtils","Promise","gkx","killswitch","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return a.table("data_trace_meta").add({contextOne:void 0,contextThree:b.externalId,contextTwo:void 0,foregroundTimestampMs:(i||(i=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(b.ts),predefinedId:void 0,shouldFlush:!1,traceId:e,traceType:b.traceType}).then(function(){return c("LSAppendDataTraceAddon")(e,d("ArmadilloDataTraceCheckPoint").traceCreated,(i||(i=d("I64"))).neg_one,void 0,void 0,c("LSFactory")(a))}).then(function(){if(b.threadKey==null||!c("gkx")("2517"))return;return c("LSAppendDataTraceAddon")(e,d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,(i||(i=d("I64"))).neg_one,void 0,b.threadKey,c("LSFactory")(a))})}function a(a,e){if(c("killswitch")("MESSENGER_WEB_DATA_TRACE_ID"))return(h||(h=b("Promise"))).resolve();var f=e.ack,g=e.traceType;return f===d("MAWAckLevel").ACK.clock?d("MAWBridgeTraceUtils").getTraceId(a,e.externalId,e.traceType).then(function(f){if(f!=null)return;var k=c("LSRequestId").generate();if((i||(i=d("I64"))).equal(g,d("ArmadilloDataTraceType").armadilloMessageSend))return j(a,e,k).then(function(){var b=e.threadType;if(b==="User")return;return c("LSAppendDataTraceAddon")(k,d("ArmadilloDataTraceCheckPoint").traceGroupMessage,(i||(i=d("I64"))).neg_one,void 0,void 0,c("LSFactory")(a))}).then(function(){if(e.isFirstMsg)return c("LSAppendDataTraceAddon")(k,d("ArmadilloDataTraceCheckPoint").armadilloActMessageSend,(i||(i=d("I64"))).neg_one,void 0,"first_msg=1",c("LSFactory")(a))}).then(function(){var f=e.type_;f=f===d("MAWMsg").text?d("ArmadilloDataTraceCheckPoint").traceTextMessage:f===d("MAWMsg").ptt||f===d("MAWMsg").image||f===d("MAWMsg").video||f===d("MAWMsg").gif?d("ArmadilloDataTraceCheckPoint").traceMediaMessage:void 0;if(f==null)return(h||(h=b("Promise"))).resolve(f);c("promiseDone")(c("LSAppendDataTraceAddon")(k,f,(i||(i=d("I64"))).neg_one,void 0,void 0,c("LSFactory")(a)));return(h||(h=b("Promise"))).resolve(f)}).then(function(b){if(b==null)return;if(!(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceCheckPoint").traceMediaMessage))return;b=e.type_;b=b===d("MAWMsg").image?d("LSDataTraceTag").image:b===d("MAWMsg").ptt?d("LSDataTraceTag").audio:b===d("MAWMsg").video?d("LSDataTraceTag").video:b===d("MAWMsg").gif?d("LSDataTraceTag").animatedImage:d("LSDataTraceTag").none;return c("LSAppendDataTraceAddon")(k,d("ArmadilloDataTraceCheckPoint").richMediaMediaSendAttachmentType,(i||(i=d("I64"))).neg_one,void 0,String(b),c("LSFactory")(a))});else return j(a,e,k)}):(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWMainTraceUtils",["I64","LSRequestId","Promise","killswitch"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return c("LSRequestId").generate()}function e(a,e,f,g,j,k,l){if(c("killswitch")("MESSENGER_WEB_DATA_TRACE_ID"))return(i||(i=b("Promise"))).resolve();else return a.table("data_trace_meta").add({contextOne:j,contextThree:l,contextTwo:k,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:e,predefinedId:void 0,shouldFlush:!1,traceId:f,traceType:g})}g.createTraceId=a;g.startTraceWithTxn=e}),98);
__d("MAWBridgeStartTraceWithTraceIdHandler",["MAWMainTraceUtils","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMainTraceUtils").startTraceWithTxn(a,d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),b.traceId,b.traceType,void 0,void 0,b.traceContext)}g.call=a}),98);
__d("MAWBridgeTraceRecordCheckpointHandler",["I64","LSAppendDataTraceAddon","LSFactory","LSFlushDataTrace.bs","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){var f=e.checkPointId,g=e.errorMessage,j=e.tags;if(g!=null)if(j!=null)return c("LSAppendDataTraceAddon")(e.dataTraceId,f,(i||(i=d("I64"))).neg_one,g,j,c("LSFactory")(a)).then(function(){if(e.shouldFlush)return d("LSFlushDataTrace.bs").call(a,0,e.dataTraceId);else return(h||(h=b("Promise"))).resolve()});else return c("LSAppendDataTraceAddon")(e.dataTraceId,f,(i||(i=d("I64"))).neg_one,g,void 0,c("LSFactory")(a)).then(function(){if(e.shouldFlush)return d("LSFlushDataTrace.bs").call(a,0,e.dataTraceId);else return(h||(h=b("Promise"))).resolve()});else if(j!=null)return c("LSAppendDataTraceAddon")(e.dataTraceId,f,(i||(i=d("I64"))).neg_one,void 0,j,c("LSFactory")(a)).then(function(){if(e.shouldFlush)return d("LSFlushDataTrace.bs").call(a,0,e.dataTraceId);else return(h||(h=b("Promise"))).resolve()});else return c("LSAppendDataTraceAddon")(e.dataTraceId,f,(i||(i=d("I64"))).neg_one,void 0,void 0,c("LSFactory")(a)).then(function(){if(e.shouldFlush)return d("LSFlushDataTrace.bs").call(a,0,e.dataTraceId);else return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("EncryptedBackupsDYIPasswordReauthDialog.entrypoint",["EncryptedBackupsDYIPasswordReauthDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a=c("JSResourceForInteraction")("EncryptedBackupsDYIPasswordReauthDialog.react").__setRef("EncryptedBackupsDYIPasswordReauthDialog.entrypoint");b={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("EncryptedBackupsDYIPasswordReauthDialogQuery$Parameters"),variables:{}}}}},root:a};g["default"]=b}),98);
__d("useEncryptedBackupsDYIPasswordReauthDialog",["EncryptedBackupsDYIPasswordReauthDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.onConfirm;a=c("useMWXEntryPointDialog")(c("EncryptedBackupsDYIPasswordReauthDialog.entrypoint"),{});var d=a[0];return function(){return d({onConfirm:b})}}g["default"]=a}),98);
__d("useMAWDYIRestoreThreadsFromOccamadillo",["MAWEBFrontendQPLLogger","react","requireDeferred","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback,k=c("requireDeferred")("MAWDYIRestoreThreadsFromOccamadillo.bs").__setRef("useMAWDYIRestoreThreadsFromOccamadillo");function a(){var a=(h||(h=c("useReStore")))();return j(function(){var b=d("MAWEBFrontendQPLLogger").startDyiQplE2EUserFlow();k.onReady(function(c){return c.call(a,b)})},[a])}g["default"]=a}),98);
__d("useEncryptedBackupsDYIDownloader",["MAWBridgeSendAndReceive","MAWEBFrontendQPLLogger","Promise","asyncToGeneratorRuntime","promiseDone","requireDeferred","useEncryptedBackupsDYIPasswordReauthDialog","useMAWDYIRestoreThreadsFromOccamadillo"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("file-saver").__setRef("useEncryptedBackupsDYIDownloader"),j=c("requireDeferred")("jszip").__setRef("useEncryptedBackupsDYIDownloader");function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getAllThreadsAsJson")),e={};Object.keys(c).forEach(function(b){var d=c[b],f=d.messages,g=d.participants;d=d.stickers;f=f.map(function(a){var b=a.common;a.jsonType;a=babelHelpers.objectWithoutPropertiesLoose(a,["common","jsonType"]);return babelHelpers["extends"]({},b,a)});a.file("inbox/"+b+"/messages.json",JSON.stringify({messages:f,participants:g},null,4));["photos","videos","audio","gifs"].forEach(function(d){var e=c[b][d];Object.entries(e).forEach(function(c){var e=c[0];c=c[1];a.file("inbox/"+b+"/"+d+"/"+e,c)})});Object.entries(d).forEach(function(a){var b=a[0];a=a[1];e[b]=a})});Object.entries(e).forEach(function(b){var c=b[0];b=b[1];a.file("stickers_used/"+c,b)});return(h||(h=b("Promise"))).resolve(a)});return l.apply(this,arguments)}function m(a,b){i.onReadyImmediately(function(c){c=c.saveAs;c(b,a)})}function a(a){j.onReady(function(b){b=b();c("promiseDone")(k(b).then(function(a){return a.generateAsync({compression:"DEFLATE",compressionOptions:{level:6},type:"blob"})}).then(function(b){m("messages.zip",b),d("MAWEBFrontendQPLLogger").endDyiE2ECompleted(a,!0)}))})}function e(){return c("useMAWDYIRestoreThreadsFromOccamadillo")()}function f(){return c("useEncryptedBackupsDYIPasswordReauthDialog")({onConfirm:c("useMAWDYIRestoreThreadsFromOccamadillo")()})}g.createFileAndDownload=a;g.useEncryptedBackupsDYIDownloader=e;g.useEncryptedBackupsDYIDownloaderWithReauthDialog=f}),98);
__d("MAWBridgeUpdateDyiStatus",["I64","LSIntEnum","MAWEBFrontendQPLLogger","useEncryptedBackupsDYIDownloader"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return a.table("encrypted_backups_dyi_backup_restore_status").put({currentStatus:b,pk:(h||(h=d("I64"))).zero})}function a(a,b){var c=b.qplInstanceKeyE2E;b=b.status;d("MAWEBFrontendQPLLogger").logDyiE2EDyiBackupRestoreCompleted(c,b);d("useEncryptedBackupsDYIDownloader").createFileAndDownload(c);if(b)return j(a,(i||(i=d("LSIntEnum"))).ofNumber(1));else return j(a,(i||(i=d("LSIntEnum"))).ofNumber(2))}g.call=a}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddon","LSDataTraceCheckPoint","LSFactory","LSFlushDataTrace.bs","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","killswitch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("data_trace_meta")).filter(function(a){var b=a.contextThree;if(b!=null&&e.externalIds.includes(b)&&(j||(j=d("I64"))).equal(a.traceType,e.traceType))return a.shouldFlush===!1;else return!1})).then(function(g){var i=[];return g.reduce(function(b,g){return b.then(function(){i.push(g.traceId);var b=e.errorMessage;if(b!=null)return c("LSAppendDataTraceAddon")(g.traceId,f,(j||(j=d("I64"))).neg_one,b,void 0,c("LSFactory")(a));else return c("LSAppendDataTraceAddon")(g.traceId,f,(j||(j=d("I64"))).neg_one,void 0,void 0,c("LSFactory")(a))})},(h||(h=b("Promise"))).resolve()).then(function(){return i})})}function l(a,c){return c.reduce(function(b,c){return b.then(function(){return d("LSFlushDataTrace.bs").updateAndFlushTrace(a,c)})},(h||(h=b("Promise"))).resolve())}function a(a,e){if(c("killswitch")("MESSENGER_WEB_DATA_TRACE_ID"))return(h||(h=b("Promise"))).resolve();var f=e.event;if(f===c("MAWBridgeTraceEvent").ReceivedReceipt)return k(a,e,d("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").ReceivedSent)return k(a,e,d("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(c("emptyFunction"));else if(f===c("MAWBridgeTraceEvent").FlowEndForFailure)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").FlowEndForSuccess)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(b){return l(a,b)});else return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeUploadMessageHandler",["I64","LSDataTraceCheckPoint","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSIssueMessageBackup","LSIssueMessageRemove","LSMEBTaskCreationSource","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MAWReceiveToUploadUtils","MAWTraceUtils","WALogger","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] uploadMessage.authTs is null for the message"]);j=function(){return a};return a}var k=c("requireDeferred")("EncryptedBackupTaskIssuedFalcoEvent").__setRef("MAWBridgeUploadMessageHandler");function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.traceId,f=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(a,e));if(f==null||!(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))){d("MAWEBFrontendQPLLogger").addPointAndEndFlowUploadMessageBackup(e,"user_device_not_enrolled_invalid_echo_request");d("MAWTraceUtils").recordCheckpointForTrace(b.traceId,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED),[],!1);d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(b.traceId,i.ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]);return}f=b.echoDocument;e=b.authTs;if(e==null){d("WALogger").ERROR(j());return}if(b.actionType===1){var g=b.echoEncodingLatencyNs,l=b.errorCode,m=b.errorMessage;d("MAWEBFrontendQPLLogger").addPointUploadMessageBackup(b.traceId,"issuing_message_backup");yield c("LSIssueMessageBackup")(b.threadId,b.messageId,(h||(h=d("I64"))).of_float(e*1e3),(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM),(f=f)!=null?f:"",b.traceId,l!=null?(i||(i=d("LSIntEnum"))).ofNumber(l):void 0,g!=null?(h||(h=d("I64"))).of_float(g):void 0,m!=null?m:void 0,c("LSFactory")(a));d("MAWReceiveToUploadUtils").checkUploadEligbility(b.messageId)&&void k.load().then(function(a){return a.log(function(){return{message_id:b.messageId,trace_id:b.traceId}})})}else b.actionType===2&&(yield c("LSIssueMessageRemove")(b.threadId,b.messageId,(h||(h=d("I64"))).of_float(e*1e3),(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM),b.traceId,void 0,c("LSFactory")(a)))});return l.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchHandler",["MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUploadMessageHandler","Promise","QPLUserFlow","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e.qpl.forEach(function(a){return c("QPLUserFlow").addPoint(a.event,a.action.name,{instanceKey:a.instanceKey,timestamp:a.timestamp})});for(var f of e.messages)yield d("MAWBridgeUploadMessageHandler").call(a,f);return(h||(h=b("Promise"))).all(e.checkPoint.map(function(b){return d("MAWBridgeTraceRecordCheckpointHandler").call(a,b)})).then(function(a){})});return i.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUploadThreadHandler",["I64","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSIssueThreadRemove","LSMEBTaskCreationSource","MAWEncryptedBackupUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.actionType===2){var e=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(a));if(e==null||!(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION)))return;yield c("LSIssueThreadRemove")(b.threadId,b.ts.toString(),(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM_WEB),void 0,void 0,c("LSFactory")(a))}});return j.apply(this,arguments)}g.call=a}),98);
__d("MWHouseKeyholeOutlineIcon",["ix","SVGIcon","cr:3565","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("cr:3565")!=null?d("SVGIcon").svgIcon(b("cr:3565")):d("fbicon")._(h("911236"),20);g["default"]=a}),98);
__d("MWLockOutlineIcon",["ix","SVGIcon","cr:814","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("cr:814")!=null?d("SVGIcon").svgIcon(b("cr:814")):d("fbicon")._(h("497248"),20);g["default"]=a}),98);
__d("MWShieldCheckOutlineIcon",["ix","SVGIcon","cr:818","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("cr:818")!=null?d("SVGIcon").svgIcon(b("cr:818")):d("fbicon")._(h("487606"),20);g["default"]=a}),98);
__d("AudioClipsBrowserBlockMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("73");b=d("FalcoLoggerInternal").create("audio_clips_browser_block_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsCancelledByUserFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("39");b=d("FalcoLoggerInternal").create("audio_clips_cancelled_by_user",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogNotnowMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("74");b=d("FalcoLoggerInternal").create("audio_clips_dialog_notnow_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsDialogOkMicAccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("75");b=d("FalcoLoggerInternal").create("audio_clips_dialog_ok_mic_access",a);e=b;g["default"]=e}),98);
__d("AudioClipsMicAccessCheckFailedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("76");b=d("FalcoLoggerInternal").create("audio_clips_mic_access_check_failed",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackPauseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("44");b=d("FalcoLoggerInternal").create("audio_clips_playback_pause",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackResumeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("45");b=d("FalcoLoggerInternal").create("audio_clips_playback_resume",a);e=b;g["default"]=e}),98);
__d("AudioClipsPlaybackStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("47");b=d("FalcoLoggerInternal").create("audio_clips_playback_start",a);e=b;g["default"]=e}),98);
__d("AudioClipsStartRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("51");b=d("FalcoLoggerInternal").create("audio_clips_start_recording_click",a);e=b;g["default"]=e}),98);
__d("AudioClipsStopRecordingClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("52");b=d("FalcoLoggerInternal").create("audio_clips_stop_recording_click",a);e=b;g["default"]=e}),98);
__d("Ls1lcFeatureOpenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("153");b=d("FalcoLoggerInternal").create("ls_1lc_feature_open",a);e=b;g["default"]=e}),98);
__d("MWChatAudioLog",["AudioClipsBrowserBlockMicAccessFalcoEvent","AudioClipsCancelledByUserFalcoEvent","AudioClipsDialogNotnowMicAccessFalcoEvent","AudioClipsDialogOkMicAccessFalcoEvent","AudioClipsMicAccessCheckFailedFalcoEvent","AudioClipsPlaybackPauseFalcoEvent","AudioClipsPlaybackResumeFalcoEvent","AudioClipsPlaybackStartFalcoEvent","AudioClipsStartRecordingClickFalcoEvent","AudioClipsStopRecordingClickFalcoEvent","I64","Ls1lcFeatureOpenFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){c("AudioClipsStopRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:"true",position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function b(){c("AudioClipsStartRecordingClickFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}}),c("Ls1lcFeatureOpenFalcoEvent").log(function(){return{extra:void 0,feature:13,feature_sessionid:void 0,screen_orientation:void 0,stage:7,thread:void 0}})}function e(){c("AudioClipsCancelledByUserFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function f(){c("AudioClipsBrowserBlockMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function i(a){c("AudioClipsPlaybackStartFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function j(a,b){c("AudioClipsPlaybackPauseFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function k(a,b){c("AudioClipsPlaybackResumeFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:(h||(h=d("I64"))).to_string(h.of_float(a)),entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:h.to_string(h.of_float(b)),relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function l(){c("AudioClipsDialogOkMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function m(){c("AudioClipsDialogNotnowMicAccessFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}function n(){c("AudioClipsMicAccessCheckFailedFalcoEvent").log(function(){return{attachment_id:void 0,connection_quality:void 0,duration:void 0,entry_point:void 0,error_code:void 0,error_message:void 0,has_access_token:void 0,is_prefetch:void 0,position:void 0,relative_url_path:void 0,rtc_call_type:void 0,source_click_category:2,with_captions:void 0}})}g.logClickStopRecording=a;g.logClickStartRecording=b;g.logDeleteRecording=e;g.logBrowserDenyAccess=f;g.logPlaybackStart=i;g.logPlaybackPause=j;g.logPlaybackResume=k;g.logDialogOk=l;g.logDialogNotNow=m;g.logMicAccessCheckFailed=n}),98);
__d("MWChatOpenTabForGroupCallback.bs",["I64","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueMessagesRangeQuery","LSMailboxMessagesRangeQueryDirection","LSMessagingThreadTypeUtil","Promise","ReQL","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a){var e=(k||(k=d("I64"))).of_string(a);c("promiseDone")((j||(j=c("LSDatabaseSingleton"))).then(function(a){return a.runInTransaction(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.table("threads")).getKeyRange(e)).then(function(f){if(f!=null)if(d("LSMessagingThreadTypeUtil").isSecure(f.threadType)){c("recoverableViolation")("Preloading secure thread not implemented yet","messenger_web_product");return(h||(h=b("Promise"))).resolve()}else return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.table("messages_ranges_v2__generated")).getKeyRange(e)).then(function(b){if(b!=null&&b.minMessageId===b.maxMessageId)return c("LSIssueMessagesRangeQuery")(e,b.minTimestampMs,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),c("LSFactory")(a))});else return(h||(h=b("Promise"))).resolve()})},"readwrite")}))}g.call=a}),98);
__d("MAWSecurityAlertsMenuItem.react",["fbt","JSResourceForInteraction","MWJewelPopoverDialogContext.react","MWLockOutlineIcon","MWPBumpEntityKey","MWXMenuItem.react","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext,l=c("JSResourceForInteraction")("MAWSecurityAlertsDialog.react").__setRef("MAWSecurityAlertsMenuItem.react");function a(){var a=c("useMWXLazyDialog")(l),b=a[0];a=k(c("MWJewelPopoverDialogContext.react"));var e=a.setIsOpenForDialog;return j.jsx(c("MWXMenuItem.react"),{icon:c("MWLockOutlineIcon"),onClick:function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","security_alerts"),e(!0),b({})},primaryText:h._("__JHASH__J377dyVYOvt__JHASH__"),testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatSidebarSettingsE2EEChatsMenu.react",["fbt","MAWSecurityAlertsMenuItem.react","MWShieldCheckOutlineIcon","MWXMenuItemWithSubmenu.react","cr:3079","cr:6692","cr:6731","cr:6732","cr:6733","cr:7398","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=(d=(e=b("cr:6731"))!=null?e:b("cr:6732"))!=null?d:b("cr:6733");function a(){return j.jsx(c("MWXMenuItemWithSubmenu.react"),{icon:c("MWShieldCheckOutlineIcon"),primaryText:h._("__JHASH__r6kzKoNm-ho__JHASH__"),submenu:{items:[k!=null?j.jsx(k,{},"encrypted-backups-comet"):null,j.jsx(c("MAWSecurityAlertsMenuItem.react"),{},"security-alerts-after-redesign"),b("cr:3079")!=null?j.jsx(b("cr:3079"),{},"encrypted-backups-dev-options"):null,b("cr:6692")&&j.jsx(b("cr:6692"),{},"persisted-eb-state-menu"),b("cr:7398")!=null?j.jsx(b("cr:7398"),{},"reset-menu"):null]},testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatSidebarSettingsPrivacyMenu.react",["fbt","MWChatSidebarSettingsE2EEChatsMenu.react","MWHouseKeyholeOutlineIcon","MWPBumpEntityKey","MWXMenuItemWithSubmenu.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWXMenuItemWithSubmenu.react"),{icon:c("MWHouseKeyholeOutlineIcon"),onClick:function(){return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","privacy_submenu")},primaryText:h._("__JHASH__pWg6bFBFRzx__JHASH__"),submenu:{items:[j.jsx(c("MWChatSidebarSettingsE2EEChatsMenu.react"),{},"settings-e2ee-chats")]},testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWDYIRestoreThreadsFromOccamadillo.bs",["I64","LSFactory","LSIntEnum","LSThreadsRangesQuery","MAWBridgeFireAndForget","MAWEBFrontendQPLLogger","MAWJids","Promise","ReQL","WALoggerDeferred","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["User not enrolled in Occamadillo, cannot restore threads and initiate DYI"]);k=function(){return a};return a}var l={contents:(j||(j=d("I64"))).zero},m={contents:j.zero};function n(a,e){var f=[],g=[];d("MAWEBFrontendQPLLogger").logDyiE2EProcessThreadsFromOccamadillo(e);c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("mi_act_mapping_table"))).then(function(i){c("promiseDone")(i.reduce(function(b,c){return b.then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(c.serverThreadKey)).then(function(a){if(a==null)return;a=a.threadType;if(!(j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).of_string("15"))){if(!(j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).of_string("16")))return;f.push(d("MAWJids").toGroupJid((j||(j=d("I64"))).to_string(c.jid)));return}g.push(d("MAWJids").toUserJid((j||(j=d("I64"))).to_string(c.jid)))})})},(h||(h=b("Promise"))).resolve()).then(function(a){return d("MAWBridgeFireAndForget").fireAndForget("backend","dyiGetThreadList",{qplInstanceKeyE2E:(a=e)!=null?a:void 0,threadJids:f.concat(g)})}))}))}function o(a,e){var f=d("ReQL").fromTableAscending(a.table("inbox_threads_ranges")),g={contents:function(){}};g.contents=f.subscribe(function(b,f){if(f.operation==="put"){var h=f.value;b=f.value.syncGroup;if(!(j||(j=d("I64"))).equal(b,(j||(j=d("I64"))).of_string("95")))return;if(h.hasMoreBefore){(!(j||(j=d("I64"))).equal(h.minThreadKey,l.contents)||!(j||(j=d("I64"))).equal(h.minLastActivityTimestampMs,m.contents))&&(l.contents=h.minThreadKey,m.contents=h.minLastActivityTimestampMs,c("promiseDone")(a.runInTransaction(function(a){return c("LSThreadsRangesQuery")((j||(j=d("I64"))).zero,!0,!1,h.minThreadKey,j.max_int,j.max_int,h.minLastActivityTimestampMs,j.zero,!1,c("LSFactory")(a))},"readwrite")));return}g.contents();n(a,e)}});return(h||(h=b("Promise"))).resolve()}function p(a,b){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("inbox_threads_ranges"))).then(function(e){e.forEach(function(e){if(!(j||(j=d("I64"))).equal(e.syncGroup,(j||(j=d("I64"))).of_string("95")))return;else if(e.hasMoreBefore){c("promiseDone")(o(a,b).then(function(){l.contents=e.minThreadKey;m.contents=e.minLastActivityTimestampMs;return a.runInTransaction(function(a){return c("LSThreadsRangesQuery")((j||(j=d("I64"))).zero,!0,!1,e.minThreadKey,j.max_int,j.max_int,e.minLastActivityTimestampMs,j.zero,!1,c("LSFactory")(a))},"readwrite")}));return}return n(a,b)})}))}function a(a,b){if(c("gkx")("7006")){c("promiseDone")(a.runInTransaction(function(a){return a.table("encrypted_backups_dyi_backup_restore_status").put({currentStatus:(i||(i=d("LSIntEnum"))).ofNumber(0),pk:(j||(j=d("I64"))).zero})},"readwrite").then(function(){return p(a,b)}));return}c("promiseDone")(d("WALoggerDeferred").WARN(k()))}g.call=a}),98);
__d("MWEncryptedBackupsIssueRangeQuery.bs",["I64","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSIssueMessageRangeQueryTask","MAWEncryptedBackupUtils","MAWJidUtils","MAWUIThreadCache","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,f,g,k){if(c("gkx")("7110")){c("promiseDone")(d("MAWEncryptedBackupUtils").getBackupTenancy(a).then(function(l){if(l!=null&&(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION)))return d("MAWUIThreadCache").getThreadJidByChatId({threadId:e}).then(function(e){if(e==null)return(h||(h=b("Promise"))).resolve();else return a.runInTransaction(function(a){return c("LSIssueMessageRangeQueryTask")(d("MAWJidUtils").threadIdForChatJid(e),g,(i||(i=d("I64"))).to_string(f),!1,void 0,k,c("LSFactory")(a))},"readwrite")});else return(h||(h=b("Promise"))).resolve()}));return}}g.runQuery=a}),98);
__d("MWChatEncryptedBackupsHandleRestoreWrapper.react",["cr:4013","cr:6786","cr:7129"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:7129")();b("cr:4013")==null?void 0:b("cr:4013")();var a=b("cr:6786")==null?void 0:b("cr:6786")();a==null?void 0:a();return null}g["default"]=a}),98);
__d("MWEncryptedBackupsProcessBackupIds.bs",["FBLogger","LSFactory","LSIntEnum","LSProcessBackupIds","Promise","ReQL","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){if(c("gkx")("7110"))return a.runInTransaction(function(a){return c("LSProcessBackupIds")(void 0,c("LSFactory")(a))},"readwrite").then(function(a){return(i||(i=d("LSIntEnum"))).unwrapIntEnum(a[0])});else return(h||(h=b("Promise"))).resolve(0)}function a(a,b){return a.table("encrypted_backups").subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("encrypted_backups"))),function(d){if(d!=null){c("promiseDone")(j(a),b,function(a){c("FBLogger")("labyrinth_web").catching(a).info("Error in db transaction")});return}})})}g.processBackupIdsStoredProcedure=j;g.subscribeToEncryptedBackupsRow=a}),98);
__d("LSUserVisibleErrorsUtil",["LSFactory","LSRemoveError","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("promiseDone")(a.runInTransaction(function(a){return c("LSRemoveError")(b,c("LSFactory")(a))},"readwrite"))}g.removeUserVisibleErrorFromTable=a}),98);
__d("ReStoreCheckLightspeedWebPDB",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("6543")}g.check=a}),98);
__d("ReStoreDBCorruption",["ReStoreCheckLightspeedWebPDB"],(function(a,b,c,d,e,f,g){"use strict";var h="Got unexpected undefined",i="ReStoreDBCorruption";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c,e=d("ReStoreCheckLightspeedWebPDB").check()?"true":"false";e=h+", pdb: "+e+", table: "+b;c=a.call(this,e)||this;c.message=e;c.name=i;c.tableName=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));g.ERROR_NAME=i;g.ReStoreDBCorruption=a}),98);
__d("ReStoreEARSetupFailure",[],(function(a,b,c,d,e,f){"use strict";var g="Encryption keychain could not be setup",h="ReStoreEARSetupFailure";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;b=g+": "+b;c=a.call(this,b)||this;c.message=b;c.name=h;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.ERROR_MESSAGE=g;f.ERROR_NAME=h;f.ReStoreEARSetupFailure=a}),66);
__d("MWUncaughtCaptionWithAction.react",["fbt","CurrentUser","FBLogger","LSPlatformLsInitLog","MAWEncyptionIndexedDbV2","MAWGating","MWXButton.react","MWXIcon.react","MWXTextPairing.react","ReStoreDBCorruption","ReStoreDbVersionChange","ReStoreDecryptionFailure","ReStoreEARSetupFailure","cr:1297","cr:2494","cr:4434","cr:5019","cr:7020","emptyFunction","gkx","react","recoverableViolation","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j,m=l.useCallback,n=l.useEffect,o=l.useMemo,p={button:{marginTop:"xqui205",$$css:!0},image:{marginBottom:"xieb3on",$$css:!0}};function a(){b("cr:7020")&&b("cr:7020").deleteIndexedDB("error"),b("cr:4434")&&b("cr:4434").deleteEBIDB(),d("MAWEncyptionIndexedDbV2").deleteEncryptionDB(),b("cr:2494")&&b("cr:2494").deleteDb(c("CurrentUser").getID())}l={action:a,body:d("MAWGating").isArmadillo?h._("__JHASH__ee6MA3uWv7t__JHASH__"):null,header:d("MAWGating").isArmadillo?h._("__JHASH__ZtiWLX5ybEL__JHASH__"):null};var q=(a={},a[d("ReStoreDBCorruption").ERROR_NAME]={action:function(){return b("cr:7020")&&b("cr:7020").deleteIndexedDB("error")}},a[d("ReStoreEARSetupFailure").ERROR_NAME]=l,a[d("ReStoreEARSetupFailure").ERROR_MESSAGE]=l,a[d("ReStoreDbVersionChange").ERROR_NAME]={action:function(){},body:h._("__JHASH__GVy7XHUrKBw__JHASH__"),header:h._("__JHASH__yndRKuZ7kSc__JHASH__"),icon:b("cr:5019")},a);function r(a){if(a instanceof d("ReStoreDBCorruption").ReStoreDBCorruption)return q[d("ReStoreDBCorruption").ERROR_NAME];else if(a instanceof d("ReStoreEARSetupFailure").ReStoreEARSetupFailure)return q[d("ReStoreEARSetupFailure").ERROR_NAME];else if(a instanceof d("ReStoreDecryptionFailure").ReStoreDecryptionFailure)return q[d("ReStoreEARSetupFailure").ERROR_NAME];else if(a instanceof d("ReStoreDbVersionChange").ReStoreDbVersionChange)return q[d("ReStoreDbVersionChange").ERROR_NAME];else try{var b=a.messageFormat||"";for(var e in q){var f=a.name===e||b.includes(e);if(f)return q[e]}return{action:c("emptyFunction")}}catch(a){c("recoverableViolation")("Couldn't parse error message in MWUncaughtErrorState","messenger_web_product",a);return{action:c("emptyFunction")}}}function s(a){a instanceof d("ReStoreDbVersionChange").ReStoreDbVersionChange?c("FBLogger")("messenger_web_product").info(a.toString()):c("FBLogger")("messenger_web_product").catching(a).mustfix("Uncaught Error while loading chat: %s",a.toString())}function e(a){var e,f,g,j=a.buttonXstyle,l=a.canTriggerAutoReload,q=a.error,t=a.level,u=a.showIcon;a=a.textAlign;n(function(){d("LSPlatformLsInitLog").addAnnotations({string:{uncaught_error:q.name}}),d("LSPlatformLsInitLog").fail("uncaught_error"),s(q)},[q]);var v=o(function(){return r(q)},[q]),w=m(function(){v==null?void 0:v.action(),window.location.reload(!0)},[v]);e=(e=v==null?void 0:v.header)!=null?e:h._("__JHASH__zDCPMqKBaum__JHASH__");f=(f=v==null?void 0:v.body)!=null?f:h._("__JHASH__iQVounN-Hch__JHASH__");var x=c("useCurrentDisplayMode")();g=(g=v==null?void 0:v.icon)!=null?g:b("cr:1297");x=k.jsx(c("MWXIcon.react"),{icon:x==="dark"&&g.dark!=null?g.dark:g["default"]});n(function(){l===!0&&(q instanceof d("ReStoreDbVersionChange").ReStoreDbVersionChange||q.name===d("ReStoreDbVersionChange").ERROR_NAME)&&document.visibilityState==="hidden"&&c("gkx")("8696")&&window.location.reload(!0)},[l,q]);return k.jsxs(k.Fragment,{children:[u&&k.jsx("div",{className:"xieb3on",children:x}),k.jsx(c("MWXTextPairing.react"),{body:f,bodyColor:"secondary",headline:e,level:t?t:2,textAlign:a?a:"center"}),k.jsx("div",{className:(i||(i=c("stylex")))(p.button,j),children:k.jsx(c("MWXButton.react"),{label:h._("__JHASH__PnVpnKg9Gg___JHASH__"),onPress:w,padding:"wide",size:36})})]})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("MWUncaughtErrorState.react",["CometContentArea.react","MWUncaughtCaptionWithAction.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={content:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",maxWidth:"xaikfu8",paddingTop:"x1p5oq8j",paddingEnd:"xxbr6pl",paddingBottom:"xwxc41k",paddingStart:"xbbxn1n",$$css:!0},mdsRoot:{backgroundColor:"x2bj2ny",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1dr59a3",justifyContent:"xl56j7k",width:"xh8yej3",$$css:!0}};function a(a){var b=a.canTriggerAutoReload,d=a.error;a=a.xstyle;return j.jsx("div",{className:(h||(h=c("stylex")))(k.root,c("gkx")("571")&&k.mdsRoot,a),children:j.jsx(c("CometContentArea.react"),{verticalAlign:"middle",children:j.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k xaikfu8 x1p5oq8j xxbr6pl xwxc41k xbbxn1n",children:j.jsx(c("MWUncaughtCaptionWithAction.react"),{canTriggerAutoReload:b,error:d,showIcon:!0})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCMCreateSubthreadMenuItem.react",["fbt","I64","Int64Hooks","LsFalcoEventEntryPoint.bs","MWXMenuItem.react","react","requireDeferred","useMWCMCreateSubthread","useOpenSubthreadView"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react"),l=c("requireDeferred")("LsMessageActionFalcoEvent").__setRef("MWCMCreateSubthreadMenuItem.react"),m=h._("__JHASH__BJS3T2_tOPf__JHASH__"),n=h._("__JHASH__ZHBRqixJ9Qy__JHASH__");function a(a){var b=a.message;a=c("useMWCMCreateSubthread")(b);var e=a[0];a=a[1];var f=c("useOpenSubthreadView")(),g=b.subthreadKey,h=d("Int64Hooks").useCallbackInt64(function(){l.onReady(function(a){return a.log(function(){var a={};return{action:{container_module:"MWCMCreateSubthreadMenuItem",type:g!=null?105:104},error:{message:void 0},extra:a,message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint.bs").messageActions,id:b.messageId,recipient_id:void 0},thread:{group_size:(j||(j=d("I64"))).to_string(j.zero),id:j.to_string(b.threadKey),type:18}}})}),g!=null?f(g):e()},[b.messageId,b.threadKey,e,f,g]);return k.jsx(c("MWXMenuItem.react"),{"aria-label":g!=null?n:m,disabled:a,onClick:h,primaryText:g!=null?n:m})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XCometRestrictedAccountsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/messages/restricted/t/{thread_key}/",Object.freeze({}),["/messages/restricted/"],void 0);b=a;g["default"]=b}),98);
__d("XMessengerDotComCometRestrictedAccountsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/restricted/t/{thread_key}/",Object.freeze({}),["/restricted/"],void 0);b=a;g["default"]=b}),98);
__d("MWInboxRestrictedAccountsRouteBuilder",["CurrentEnvironment","XCometRestrictedAccountsControllerRouteBuilder","XMessengerDotComCometRestrictedAccountsControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=c("CurrentEnvironment").facebookdotcom?{buildURL:function(a){a=a.thread_key;return c("XCometRestrictedAccountsControllerRouteBuilder").buildURL({thread_key:a})},buildURLWithoutThread:function(){return c("XCometRestrictedAccountsControllerRouteBuilder").buildExtraURL("/messages/restricted/",{})}}:{buildURL:function(a){a=a.thread_key;return c("XMessengerDotComCometRestrictedAccountsControllerRouteBuilder").buildURL({thread_key:a})},buildURLWithoutThread:function(){return c("XMessengerDotComCometRestrictedAccountsControllerRouteBuilder").buildExtraURL("/restricted/",{})}};b=a.buildURL;d=a.buildURLWithoutThread;g.buildURL=b;g.buildURLWithoutThread=d}),98);
__d("MDSActiveSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("path",{d:"M22.278 25.778a3.5 3.5 0 107 0 3.5 3.5 0 00-7 0z"}),i.jsx("path",{d:"M28.734 20.414c-.071.32-.435.463-.735.331A5.5 5.5 0 0020.745 28c.133.3-.011.664-.33.735-.778.174-1.586.266-2.415.266-6.075 0-11-4.925-11-11S11.925 7 18 7s11 4.925 11 11c0 .83-.092 1.637-.266 2.414z"})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSDataSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("path",{d:"M17 8.13905C17 7.55133 16.4939 7.0864 15.9167 7.19706C10.8377 8.17069 7 12.6372 7 18C7 19.2599 7.21181 20.4704 7.60177 21.5976C7.79397 22.1533 8.44976 22.3592 8.95891 22.0652L11.643 20.5155C12.0657 20.2715 12.2412 19.7593 12.1374 19.2824C12.0474 18.8692 12 18.4402 12 18C12 15.3215 13.7551 13.053 16.178 12.2817C16.6434 12.1335 17 11.7252 17 11.2368V8.13905Z"}),i.jsx("path",{d:"M19.8219 12.2816C19.3565 12.1335 19 11.7252 19 11.2368V8.13905C19 7.55133 19.5061 7.0864 20.0833 7.19704C22.5518 7.67026 24.7272 8.96861 26.3112 10.794C26.6969 11.2385 26.5478 11.9103 26.0381 12.2045L23.3551 13.7535C22.9327 13.9974 22.4016 13.8937 22.0412 13.565C21.41 12.9895 20.6554 12.547 19.8219 12.2816Z"}),i.jsx("path",{d:"M12.6449 22.2465C13.0673 22.0026 13.5984 22.1064 13.9588 22.435C15.0251 23.4072 16.4433 24 18 24C21.3137 24 24 21.3137 24 18C24 17.5599 23.9526 17.1308 23.8626 16.7176C23.7588 16.2408 23.9343 15.7285 24.357 15.4845L27.0411 13.9349C27.5502 13.6409 28.206 13.8468 28.3982 14.4024C28.7882 15.5297 29 16.7401 29 18C29 24.0752 24.0751 29 18 29C14.6812 29 11.7056 27.5303 9.68877 25.2061C9.30305 24.7616 9.45219 24.0898 9.96187 23.7955L12.6449 22.2465Z"})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSDownloadSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:i.jsx("path",{d:"M17.75 6.5a1 1 0 00-1 1v9.25c0 .14-.11.25-.25.25h-2a1 1 0 00-.84 1.54l3.5 5.5a1 1 0 001.68 0l3.5-5.5A1 1 0 0021.5 17h-2a.25.25 0 01-.25-.25V7.5a1 1 0 00-1-1h-.5zM7 28a1 1 0 011-1h20a1 1 0 011 1v.5a1 1 0 01-1 1H8a1 1 0 01-1-1V28z"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSInfoCircleSvgIcon.bs",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:i.jsx("path",{clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm1.75-16.25a1.75 1.75 0 11-3.5 0 1.75 1.75 0 013.5 0zM16.5 17.5a1 1 0 011-1h1a1 1 0 011 1V24a1 1 0 01-1 1h-1a1 1 0 01-1-1v-6.5z",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSMessengerCodeSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("path",{d:"M20.0706 10.2726C21.0041 10.5227 21.9637 9.96872 22.2139 9.03515C22.464 8.10159 21.91 7.142 20.9764 6.89185C20.0429 6.6417 19.0833 7.19572 18.8331 8.12929C18.583 9.06285 19.137 10.0224 20.0706 10.2726Z"}),i.jsx("path",{d:"M26.1788 20.3202C25.9896 20.9842 26.3745 21.6757 27.0385 21.8649C27.7024 22.054 28.394 21.6691 28.5831 21.0052C29.1101 19.1551 29.1584 17.1428 28.6252 15.1529C28.092 13.163 27.044 11.4444 25.6626 10.1058C25.1668 9.62533 24.3755 9.63778 23.8951 10.1335C23.4146 10.6293 23.4271 11.4207 23.9229 11.9011C24.9886 12.9338 25.7975 14.2589 26.2104 15.7999C26.6233 17.341 26.5853 18.893 26.1788 20.3202Z"}),i.jsx("path",{d:"M11.9012 23.9228C11.4208 23.427 10.6294 23.4146 10.1337 23.895C9.63789 24.3754 9.62545 25.1668 10.1059 25.6625C11.4445 27.044 13.1632 28.092 15.153 28.6251C17.1429 29.1583 19.1553 29.11 21.0053 28.583C21.6692 28.3939 22.0541 27.7023 21.865 27.0384C21.6758 26.3744 20.9843 25.9895 20.3203 26.1787C18.8931 26.5853 17.3411 26.6233 15.8001 26.2103C14.259 25.7974 12.934 24.9885 11.9012 23.9228Z"}),i.jsx("path",{d:"M16.8279 8.24002C16.9961 8.90958 16.5897 9.58869 15.9201 9.75686C14.4808 10.1184 13.1177 10.8614 11.9896 11.9896C10.8615 13.1177 10.1184 14.4808 9.75687 15.9201C9.5887 16.5896 8.90959 16.9961 8.24003 16.8279C7.57047 16.6598 7.16401 15.9806 7.33218 15.3111C7.80077 13.4454 8.76516 11.6785 10.2218 10.2218C11.6785 8.76515 13.4454 7.80076 15.3111 7.33217C15.9807 7.164 16.6598 7.57046 16.8279 8.24002Z"}),i.jsx("path",{d:"M9.03515 22.2139C8.10159 22.464 7.142 21.91 6.89185 20.9765C6.6417 20.0429 7.19572 19.0833 8.12929 18.8331C9.06285 18.583 10.0224 19.137 10.2726 20.0706C10.5227 21.0042 9.96872 21.9637 9.03515 22.2139Z"}),i.jsx("path",{d:"M23.6569 23.6569C22.9735 24.3403 22.9735 25.4483 23.6569 26.1318C24.3403 26.8152 25.4483 26.8152 26.1317 26.1318C26.8152 25.4483 26.8152 24.3403 26.1317 23.6569C25.4483 22.9735 24.3403 22.9735 23.6569 23.6569Z"}),i.jsx("path",{d:"M24.2785 16.3177C24.5286 17.2513 23.9746 18.2108 23.0411 18.461C22.1075 18.7111 21.1479 18.1571 20.8978 17.2236C20.6476 16.29 21.2016 15.3304 22.1352 15.0803C23.0688 14.8301 24.0283 15.3841 24.2785 16.3177Z"}),i.jsx("path",{d:"M14.6192 18.9058C14.1189 17.0387 15.227 15.1195 17.0941 14.6192C17.6048 14.4824 18.1161 14.4659 18.6008 14.5508C19.2808 14.6698 19.9286 14.2151 20.0477 13.5351C20.1667 12.8551 19.712 12.2073 19.032 12.0882C18.1961 11.9419 17.3166 11.9714 16.4471 12.2044C13.2463 13.0621 11.3468 16.3521 12.2044 19.5529C13.0621 22.7537 16.3521 24.6532 19.5529 23.7955C20.4224 23.5625 21.1989 23.1484 21.8496 22.6037C22.379 22.1606 22.4489 21.3722 22.0058 20.8428C21.5626 20.3135 20.7743 20.2435 20.2449 20.6867C19.8676 21.0025 19.4166 21.2439 18.9058 21.3807C17.0387 21.881 15.1195 20.773 14.6192 18.9058Z"})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSQuestionCircleSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:i.jsx("path",{clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-1.311-15.93c-.314.192-.585.482-.832.892a1 1 0 01-1.713-1.032c.365-.606.844-1.164 1.502-1.566.663-.406 1.446-.614 2.354-.614 2.396 0 4.5 1.565 4.5 4 0 1.865-1.227 2.827-2.065 3.483l-.067.053c-.913.717-1.368 1.13-1.368 1.964a1 1 0 11-2 0c0-1.865 1.227-2.827 2.065-3.483l.067-.053c.913-.717 1.368-1.13 1.368-1.964 0-1.043-.896-2-2.5-2-.592 0-1.003.132-1.311.32zM19.25 24a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSSecureStorageSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("path",{d:"M7 9C7 8.44772 7.44772 8 8 8H28C28.5523 8 29 8.44772 29 9V10.5C29 11.0523 28.5523 11.5 28 11.5H8C7.44772 11.5 7 11.0523 7 10.5V9Z"}),i.jsx("path",{clipRule:"evenodd",d:"M9.5 13.5C9.22386 13.5 9 13.7239 9 14V26C9 27.6569 10.3431 29 12 29H24C25.6569 29 27 27.6569 27 26V14C27 13.7239 26.7761 13.5 26.5 13.5H9.5ZM19.2099 21.0816C19.15 20.8862 19.243 20.6792 19.4115 20.5637C20.0688 20.1133 20.5 19.357 20.5 18.5C20.5 17.1193 19.3807 16 18 16C16.6193 16 15.5 17.1193 15.5 18.5C15.5 19.357 15.9312 20.1133 16.5885 20.5637C16.757 20.6792 16.85 20.8862 16.79 21.0816L15.5279 25.1918C15.4045 25.5935 15.7054 26 16.1263 26H19.8737C20.2946 26 20.5955 25.5935 20.4721 25.1918L19.2099 21.0816Z",fillRule:"evenodd"})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSSettingsSvgIcon.react",["CometSVGIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("CometSVGIcon.react"),babelHelpers["extends"]({viewBox:"0 0 36 36"},a,{children:i.jsx("path",{clipRule:"evenodd",d:"M19.842 7.526A1.5 1.5 0 0018.419 6.5h-.838a1.5 1.5 0 00-1.423 1.026l-.352 1.056c-.157.472-.541.827-1.006 1.003a8.93 8.93 0 00-.487.202c-.453.204-.976.225-1.42.002l-.997-.498a1.5 1.5 0 00-1.732.281l-.592.592a1.5 1.5 0 00-.28 1.732l.497.996c.223.445.202.968-.002 1.421-.072.16-.139.323-.202.487-.176.465-.531.849-1.003 1.006l-1.056.352A1.5 1.5 0 006.5 17.581v.838a1.5 1.5 0 001.026 1.423l1.056.352c.472.157.827.541 1.003 1.006.063.164.13.327.202.487.204.453.225.976.002 1.42l-.498.997a1.5 1.5 0 00.281 1.732l.593.592a1.5 1.5 0 001.73.28l.998-.497c.444-.223.967-.202 1.42.002.16.072.323.139.487.202.465.176.849.531 1.006 1.003l.352 1.056a1.5 1.5 0 001.423 1.026h.838a1.5 1.5 0 001.423-1.026l.352-1.056c.157-.472.541-.827 1.006-1.003.164-.063.327-.13.486-.202.454-.204.977-.225 1.421-.002l.997.498a1.5 1.5 0 001.732-.281l.592-.592a1.5 1.5 0 00.28-1.732l-.497-.996c-.223-.445-.202-.968.002-1.421.072-.16.139-.323.202-.487.176-.465.531-.849 1.003-1.006l1.056-.352a1.5 1.5 0 001.026-1.423v-.838a1.5 1.5 0 00-1.026-1.423l-1.056-.352c-.472-.157-.827-.541-1.003-1.006a8.991 8.991 0 00-.202-.487c-.204-.453-.225-.976-.002-1.42l.498-.997a1.5 1.5 0 00-.281-1.732l-.593-.592a1.5 1.5 0 00-1.73-.28l-.998.497c-.444.223-.967.202-1.42-.002a8.938 8.938 0 00-.487-.202c-.465-.176-.849-.531-1.006-1.003l-.352-1.056zM18 23.5a5.5 5.5 0 100-11 5.5 5.5 0 000 11z",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSTextAlignLeftSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:i.jsx("path",{d:"M8 10a1 1 0 00-1 1v.5a1 1 0 001 1h20a1 1 0 001-1V11a1 1 0 00-1-1H8zm-1 7.75a1 1 0 011-1h20a1 1 0 011 1v.5a1 1 0 01-1 1H8a1 1 0 01-1-1v-.5zm0 6.75a1 1 0 011-1h12a1 1 0 011 1v.5a1 1 0 01-1 1H8a1 1 0 01-1-1v-.5z"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSSettingsMenuIcons",["MDSActiveSvgIcon.react","MDSAppMessengerSvgIcon.react","MDSBoxSvgIcon.react","MDSCautionTriangleSvgIcon.react","MDSDataSvgIcon.react","MDSDownloadSvgIcon.react","MDSInfoCircleSvgIcon.bs","MDSLeaveSvgIcon.react","MDSMessageDotsSvgIcon.react","MDSMessengerCodeSvgIcon.react","MDSQuestionCircleSvgIcon.react","MDSRestrictCircleSvgIcon.react","MDSSecureStorageSvgIcon.react","MDSSettingsSvgIcon.react","MDSTextAlignLeftSvgIcon.react","SVGIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");a={About:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSInfoCircleSvgIcon.bs"),{color:"primary",size:24})}),ActiveContacts:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSActiveSvgIcon.react"),{color:"primary",size:24})}),CookiePolicy:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSTextAlignLeftSvgIcon.react"),{color:"primary",size:24})}),Data:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSDataSvgIcon.react"),{color:"primary",size:24})}),DownloadYourInformation:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSDownloadSvgIcon.react"),{color:"primary",size:24})}),Help:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSQuestionCircleSvgIcon.react"),{color:"primary",size:24})}),HiddenChats:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSBoxSvgIcon.react"),{color:"primary",size:24})}),LogOut:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSLeaveSvgIcon.react"),{color:"primary",size:24})}),MessageRequests:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSMessageDotsSvgIcon.react"),{color:"primary",size:24})}),MessengerCode:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSMessengerCodeSvgIcon.react"),{color:"primary",size:24})}),NewMessengerDesktopClient:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSAppMessengerSvgIcon.react"),{color:"primary",size:24})}),PrivacyPolicy:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSTextAlignLeftSvgIcon.react"),{color:"primary",size:24})}),ReportAProblem:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSCautionTriangleSvgIcon.react"),{color:"primary",size:24})}),RestrictedAccounts:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSRestrictCircleSvgIcon.react"),{color:"primary",size:24})}),SecureStorage:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSSecureStorageSvgIcon.react"),{color:"primary",size:24})}),Settings:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSSettingsSvgIcon.react"),{color:"primary",size:24})}),Terms:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSTextAlignLeftSvgIcon.react"),{color:"primary",size:24})})};g["default"]=a}),98);
__d("LSDataUseConsentState",[],(function(a,b,c,d,e,f){a=Object.freeze({UNSET:0,CONSENTED:1,WITHDRAWN:2,NOT_APPLICABLE:3,SEEN:4});f["default"]=a}),66);
__d("MWInboxSettingsMenuIcons",["cr:466"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:466")}),98);
__d("MWInboxSettingsMenu.react",["fbt","Actor","Banzai","CometMenuSeparator.react","CometSeparatorMenuItem.react","CurrentEnvironment","CurrentUser","DTSG","DTSGUtils","I64","JSResourceForInteraction","LSDataUseConsentState","LSIntEnum","LSPlatformLogout","MWInboxRestrictedAccountsRouteBuilder","MWInboxSettingsMenuIcons","MWPBumpEntityKey","MWSeparatorContainer.react","MWXMenu.react","MWXMenuItem.react","MessageRequestsLog","MessengerDesktopDeepLinkUtils","MessengerDesktopPromoEventLogger","MetaConfig","ODS","Promise","ReQL","ReQLSuspense","SprinkleConfig","URI","UserAgent","WebStorageMonster","XMessengerDotComLogoutController","cr:3113","cr:4007","cr:4021","cr:494","cr:4951","gkx","promiseDone","react","useCometHomeChatSettings","useEBStateDBLogout","useMWXLazyDialog","useReStore","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n,o,p=o||(o=d("react"));e=o;var q=e.useCallback,r=e.useEffect,s=e.useMemo,t=e.useRef,u=(e=b("cr:494"))!=null?e:function(a){return function(){return(n||(n=b("Promise"))).resolve()}};function a(a){var e=a.showActiveContacts,g=a.showHidden,n=a.showMessageRequests,o=a.showRestrictedAccounts,v=(i||(i=c("useReStore")))(),w=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(v.table("epd_cookie_settings"))},[v],f.id+":92"),x=c("MetaConfig")._("37"),y=t(!1),z=t(c("uuidv4")()).current;a=d("Actor").useActor();var A=a[0];r(function(){y.current||(y.current=!0,d("MessengerDesktopPromoEventLogger").log({event:"Impression",funnelSessionId:z,location:"MessengerSettingsMenu"}))},[z]);var B=q(function(){d("MessengerDesktopPromoEventLogger").log({event:"Click",funnelSessionId:z,location:"MessengerSettingsMenu"})},[z]);a=d("useCometHomeChatSettings").useCometHomeChatSettingsPreloadedQuery();var C=a[0],D=a[1];a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWInboxSettingsDialog.react").__setRef("MWInboxSettingsMenu.react"));var E=a[0];a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWInboxBugReportDialog.react").__setRef("MWInboxSettingsMenu.react"));var F=a[0];a=c("gkx")("735");var G=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWCookieSettingsDialogJSResource.react").__setRef("MWInboxSettingsMenu.react")),H=G[0];G=p.jsx(c("MWXMenuItem.react"),{href:"https://www.facebook.com/help/cookies",icon:c("MWInboxSettingsMenuIcons").CookiePolicy,onClick:function(){return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","cookie_policy")},primaryText:h._("__JHASH__DfxWgrx2TO4__JHASH__"),target:"_blank",testid:void 0});var I=c("gkx")("2015778");I=I&&w!=null&&!(k||(k=d("I64"))).equal(w.fbTrackersOnOtherCompanies,(m||(m=d("LSIntEnum"))).ofNumber(c("LSDataUseConsentState").UNSET))&&!(k||(k=d("I64"))).equal(w.otherCompanyTrackersOnFoa,(m||(m=d("LSIntEnum"))).ofNumber(c("LSDataUseConsentState").UNSET))?p.jsx(c("MWXMenuItem.react"),{icon:c("MWInboxSettingsMenuIcons").Settings,onClick:function(){return H({cookieSettings:w},function(){})},primaryText:h._("__JHASH__nlMkjb3wHPM__JHASH__"),testid:void 0}):G;var J=function(){c("promiseDone")(d("LSPlatformLogout").logout());c("promiseDone")(d("useEBStateDBLogout").logoutEBStateDB());var a=c("XMessengerDotComLogoutController").getURIBuilder().getURI(),b={};a=new(j||(j=c("URI")))(a);var e=document.createElement("form");e.action=a.toString();e.method="POST";e.style.display="none";a=d("DTSG").getToken();a!=null&&(b.fb_dtsg=a,c("SprinkleConfig").param_name.length>0&&(b[c("SprinkleConfig").param_name]=d("DTSGUtils").getNumericValue(a)));Object.entries(b).forEach(function(a){var b=a[0];a=a[1];var c=document.createElement("input");c.type="hidden";c.name=b;c.value=a;e.appendChild(c)});(a=document.body)==null?void 0:a.appendChild(e);c("Banzai").flush();c("WebStorageMonster").cleanOnLogout([],"MWInboxSettingsMenu");return e.submit()},K=u(!0),L;x?L=p.jsx(c("MWXMenuItem.react"),{icon:c("MWInboxSettingsMenuIcons").LogOut,onClick:function(){c("promiseDone")(K().then(function(){return J()}));return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","logout")},primaryText:h._("__JHASH__Nqa13JcobKk__JHASH__"),testid:void 0}):L=null;G=c("UserAgent").isPlatform("Mac OS X")?"skytale-settings-macapp":"skytale-settings-windowsapp";G=s(function(){return p.jsxs("div",{children:[p.jsx(c("MWXMenuItem.react"),{href:d("MessengerDesktopDeepLinkUtils").getDeeplinkButtonURI({funnel_session_id:z,id:A,origin:"FB",thread:void 0}),icon:c("MWInboxSettingsMenuIcons").NewMessengerDesktopClient,onClick:function(){B();return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","desktop_promo")},primaryText:d("MessengerDesktopDeepLinkUtils").getDeeplinkButtonLabel(),testid:void 0}),L]})},[A,z,B,L,G]);a=a?p.jsx(c("MWXMenuItem.react"),{href:x?d("MWInboxRestrictedAccountsRouteBuilder").buildURLWithoutThread():void 0,icon:c("MWInboxSettingsMenuIcons").RestrictedAccounts,onClick:function(){x||o();return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","show_restricted_accounts")},primaryText:h._("__JHASH__eJP9dpTCmG0__JHASH__"),testid:void 0}):null;var M=d("CurrentUser").isMessengerOnlyUser()||d("CurrentUser").isDeactivatedAllowedOnMessenger()?p.jsx(c("MWXMenuItem.react"),{href:"https://www.messenger.com/dyi",icon:c("MWInboxSettingsMenuIcons").DownloadYourInformation,primaryText:h._("__JHASH__XDtLWcftVaB__JHASH__"),target:"_blank"}):null,N=b("cr:4007")==null?void 0:b("cr:4007")();return p.jsxs(c("MWXMenu.react"),{testid:void 0,truncate:!0,withArrow:!0,children:[b("cr:4021")&&N!=null&&N>0?p.jsx(b("cr:4021"),{value:N}):null,N!=null&&N>0?p.jsx(c("CometSeparatorMenuItem.react"),{}):null,p.jsxs(c("MWSeparatorContainer.react"),{separator:p.jsx(c("CometMenuSeparator.react"),{}),children:[p.jsx(c("MWXMenuItem.react"),{icon:c("MWInboxSettingsMenuIcons").Settings,onClick:function(){D();E({chatSettingsQueryReference:C},function(){});return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","preferences")},primaryText:h._("__JHASH__eqYqxmQJvsj__JHASH__"),testid:void 0}),x?a:p.jsxs("div",{children:[p.jsx(c("MWXMenuItem.react"),{icon:c("MWInboxSettingsMenuIcons").ActiveContacts,onClick:function(){e();return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","active_contacts")},primaryText:h._("__JHASH__c-Zbl-WhIyI__JHASH__"),testid:void 0}),p.jsx(c("MWXMenuItem.react"),{icon:c("MWInboxSettingsMenuIcons").MessageRequests,onClick:function(){d("MessageRequestsLog").logMessageRequestsView(0,-1);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","message_requests");return n()},primaryText:h._("__JHASH__ehDyA5Bu0Ni__JHASH__"),testid:void 0}),p.jsx(c("MWXMenuItem.react"),{icon:c("MWInboxSettingsMenuIcons").HiddenChats,onClick:function(){g();return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","report_problem")},primaryText:h._("__JHASH__g0xPJguoMdB__JHASH__"),testid:void 0}),a]}),b("cr:4951")&&p.jsx(b("cr:4951"),{}),p.jsxs("div",{children:[p.jsx(c("MWXMenuItem.react"),{href:"https://www.facebook.com/help/messenger-app",icon:c("MWInboxSettingsMenuIcons").Help,onClick:function(){return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","help")},primaryText:h._("__JHASH__dj3Jwhr0CVf__JHASH__"),target:"_blank",testid:void 0}),c("CurrentEnvironment").messengerdotcom?p.jsx(c("MWXMenuItem.react"),{icon:c("MWInboxSettingsMenuIcons").ReportAProblem,onClick:function(){F({initialProduct:"chat"},function(){});return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","report_problem")},primaryText:h._("__JHASH__EMd2E8yTDbT__JHASH__"),testid:void 0}):null]}),x?p.jsxs(p.Fragment,{children:[p.jsx(c("MWXMenuItem.react"),{href:"https://www.messenger.com/about",icon:c("MWInboxSettingsMenuIcons").About,onClick:function(){return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","about")},primaryText:h._("__JHASH__Werlk6ybK7Z__JHASH__"),target:"_blank",testid:void 0}),p.jsx(c("MWXMenuItem.react"),{href:"https://www.facebook.com/policies",icon:c("MWInboxSettingsMenuIcons").Terms,onClick:function(){return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","terms")},primaryText:h._("__JHASH__iV2OddJlExb__JHASH__"),target:"_blank",testid:void 0}),p.jsx(c("MWXMenuItem.react"),{href:"https://www.facebook.com/privacy/policy?entry_point=messenger_settings",icon:c("MWInboxSettingsMenuIcons").PrivacyPolicy,onClick:function(){return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","privacy_policy")},primaryText:h._("__JHASH__dv0U-lBKZ9F__JHASH__"),target:"_blank",testid:void 0}),I,M,d("CurrentUser").isMessengerOnlyUser()?p.jsx(c("MWXMenuItem.react"),{href:"https://www.facebook.com/help/messenger-app/ipad/458908261952384?helpref=platform_switcher&rdrhc",icon:c("MWInboxSettingsMenuIcons").About,onClick:function(){(l||(l=d("ODS"))).bumpEntityKey(3185,"inbox_settings","delete_account")},primaryText:h._("__JHASH___bB3tvo90IJ__JHASH__"),target:"_blank"}):null]}):null,G,b("cr:3113")!=null?p.jsx(b("cr:3113"),{}):null]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMAWSecretConversationsLogOut",["MAWSecretConversationsLogout","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){return i(function(){return c("MAWSecretConversationsLogout")(a)},[a])}g["default"]=a}),98);
__d("useMWLSMessageReportingToken",["I64","Int64Hooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return d("Int64Hooks").useMemoInt64(function(){return window.btoa("message_thread:"+(h||(h=d("I64"))).to_string(b)+":"+a)},[a,b])}g["default"]=a}),98);
__d("LSAppState",[],(function(a,b,c,d,e,f){a=Object.freeze({BACKGROUND:0,FOREGROUND:1});f["default"]=a}),66);
__d("MsgrPresenceUpdateFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2511");b=d("FalcoLoggerInternal").create("msgr_presence_update",a);e=b;g["default"]=e}),98);
__d("useMWPReportPresence",["I64","LSAppState","LSFactory","LSReportAppState","MsgrPresenceUpdateFalcoEvent","gkx","promiseDone","react","useReStore","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return k(function(b){var e=c("uuidv4")();c("gkx")("6049")&&c("MsgrPresenceUpdateFalcoEvent").log(function(){return{client_request_id:e,event_type:"app_state_update",is_foregrounded:b===c("LSAppState").FOREGROUND,is_new_ls_presence_reporting:!0}});c("promiseDone")(a.runInTransaction(function(a){return c("LSReportAppState")((i||(i=d("I64"))).of_float(b),e,c("LSFactory")(a))},"readwrite"))},[a])}g["default"]=a}),98);
__d("useMWPPresenceManager",["LSAppState","Run","react","useDebouncedComet","useGlobalEventListener","useMWPReportPresence"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef;function a(){var a=k(c("LSAppState").FOREGROUND),b=c("useMWPReportPresence")(),e=i(function(){b(a.current)},[b]),f=c("useDebouncedComet")(e,{wait:2e3});e=i(function(){a.current=c("LSAppState").FOREGROUND,f()},[f]);var g=i(function(){a.current=c("LSAppState").BACKGROUND,f()},[f]);c("useGlobalEventListener")("focus",e);c("useGlobalEventListener")("blur",g);j(function(){b(c("LSAppState").FOREGROUND);var a=d("Run").onBeforeUnload(function(){b(c("LSAppState").BACKGROUND)},!1);return function(){return a.remove()}},[b])}g.useMWPPresenceManager=a}),98);
__d("MWSetupPresenceReporting.react",["useMWPPresenceManager"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("useMWPPresenceManager").useMWPPresenceManager();return null}g["default"]=a}),98);
__d("cometMessengerFileUploadComposerPluginSupportedTypes",[],(function(a,b,c,d,e,f){"use strict";a=["photo","video","file"];b=a;f["default"]=b}),66);
__d("useCometMessengerFileUploadPaste",["react","useCometLexicalFileDragAndDrop"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.editor,d=a.handlePastedFiles;a=a.isMimeTypeAcceptable;var e=i(function(a){a.length>0&&d(a)},[d]);c("useCometLexicalFileDragAndDrop")({editor:b,isMimeTypeAcceptable:a,onSubmit:e})}g["default"]=a}),98);
__d("CometMessengerHandlePastedFileComposerPlugin",["cometIsMimeTypeForMedia","cometMessengerFileUploadComposerPluginSupportedTypes","useCometMessengerFileUploadPaste"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a.kind!=="file")return!1;for(var b=c("cometMessengerFileUploadComposerPluginSupportedTypes"),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;switch(g){case"photo":if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type))return!0;break;case"video":if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return!0;break;case"file":if(d("cometIsMimeTypeForMedia").isMimeTypeForFile(a.type))return!0;break;default:g}}return!1}function a(a){var b=a.editor;a=a.handlePastedFiles;c("useCometMessengerFileUploadPaste")({editor:b,handlePastedFiles:a,isMimeTypeAcceptable:h});return null}g["default"]=a}),98);
__d("MWOpenMediaManagerUtils",["fbt","I64","LSFactory","LSGenerateTraceId","LSIntEnum","LSMarkSubJobCompletedV2","MWConsole","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","OfflineThreadingId","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction","justknobx","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function a(a){return(k||(k=b("Promise"))).resolve(d("OfflineThreadingId").createForItemsInOrder(a))}function e(a,e,f,g,j,m,n,o,p,q){j===void 0&&(j=c("emptyFunction"));m===void 0&&(m=c("emptyFunction"));n===void 0&&(n=c("emptyFunction"));var r=function(b,e){e=e.event;if(!e.lengthComputable)return;var f=e.loaded/e.total;c("promiseDone")(a.runInTransaction(function(a){return d("MWPOpenComposerUtils").updateMediaStaging(a,b,function(a){return babelHelpers["extends"]({},a,{progress:f})})},"readwrite"))},s=function(j,o){if(o==null){var p="";if(!c("justknobx")._("899"))return;c("promiseDone")(a.runInTransaction(function(a){return d("MWPOpenComposerUtils").deleteMediaStaging(a,j).then(function(){return l(a,j)}).then(function(){var a=f.find(function(a){return a[1]===j});a!=null&&a[0].type==="application/zip"?(g(h._("__JHASH__Tgh_5naYWqz__JHASH__"),h._("__JHASH__rp1B2ks3qwV__JHASH__")),p="null_fbid_invalid_file_format"):(g(h._("__JHASH__stZga-a6f____JHASH__")),p="null_fbid_other")})},"readwrite"),function(){return n(p)});return}c("promiseDone")(a.runInTransaction(function(a){var f=d("MWPOpenComposerUtils").updateMediaStaging(a,j,function(a){return babelHelpers["extends"]({},a,{fbid:(i||(i=d("I64"))).of_float(o),progress:1})}),g=a.table("media_send_jobs").get({hd:j,tl:0}).then(function(f){if(f==null)return(k||(k=b("Promise"))).resolve();var g=c("LSFactory")(a),h=f.offlineThreadingId,l=f.offlineAttachmentId;return c("LSMarkSubJobCompletedV2")(j,(i||(i=d("I64"))).of_float(o),void 0,void 0,void 0,g).then(function(){return d("MWPOpenComposerUtils").deleteMediaStaging(a,j)}).then(function(){return d("MWPOpenComposerUtils").updateAttachment(a,e,h,l,function(a){return babelHelpers["extends"]({},a,{attachmentFbid:o.toString()})})}).then(function(){return d("MWPOpenComposerUtils").resumeSendJob(g,h,c("LSGenerateTraceId")())})});return(k||(k=b("Promise"))).all([f,g])},"readwrite"),function(){return m()})},t=function(b,e){c("promiseDone")(a.runInTransaction(function(a){return d("MWPOpenComposerUtils").updateMediaStaging(a,b,function(a){return babelHelpers["extends"]({},a,{hasError:!0})}).then(function(){return l(a,b)})},"readwrite"),function(){var a;n((a=e.response.getErrorDescriptionString())!=null?a:"unknown_upload_failure")})},u=f.map(function(a){return a[1]}),v=f.map(function(a){return a[0]});return d("MWPComposerMediaUploadUtil").startUpload(j,r,s,t,void 0,v,u,o,p,void 0,q)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield a.table("media_send_jobs").get({hd:b,tl:0}));if(b==null)return;b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("messages").index("optimistic")).getKeyRange(b.offlineThreadingId)));if(b==null)return;b=babelHelpers["extends"]({},b,{sendStatusV2:(j||(j=d("LSIntEnum"))).ofNumber(4)});yield a.table("messages").put(b)});return m.apply(this,arguments)}g.preprocess=a;g.upload=e}),98);
__d("MWPinnedMessagesDialogNUXFactoryRequireNUX.react",["nux:345"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("nux:345")==null?void 0:b("nux:345")("WEB_MSGR_PINNED_MESSAGES_NUX")};c=a;g["default"]=c}),98);
__d("useMWPinnedMessageLimitReached",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=50;function a(a){var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("msg_pinned_messages_v2")).getKeyRange(a)},[b,a],f.id+":27").length;return e>=i}g["default"]=a}),98);
__d("LSPinnedMessageState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_PINNED:0,PINNED:1,PINNED_AND_FEATURED:2});f["default"]=a}),66);
__d("useMWTogglePinMessage",["I64","LSFactory","LSOptimisticSetPinnedMessage","LSPinnedMessageState","MWPActor.react","MWPBumpEntityKey","ServerTime","asyncToGeneratorRuntime","promiseDone","react","requireDeferred","useMWPIsMessagePinned","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback,l=c("requireDeferred")("MWLogMessageAction").__setRef("useMWTogglePinMessage");function a(a,e){var f=(h||(h=c("useReStore")))(),g=c("useMWPIsMessagePinned")(a),j=a.messageId,m=a.threadKey,n=d("ServerTime").getMillis(),o=d("MWPActor.react").useActor(),p=function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield f.runInTransaction(function(b){var h=g?c("LSPinnedMessageState").NOT_PINNED:c("LSPinnedMessageState").PINNED,k=g?"unpin":"pin";e==="message_dot_menu"?l.onReady(function(b){return c("promiseDone")(b.log(f,a.messageId,m,e,k,void 0,void 0,void 0,a.senderId,void 0,o))}):k==="unpin"&&e==="pinned_message_list_dot_menu"&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_pinned_messages","unpin");return c("LSOptimisticSetPinnedMessage")(m,j,(i||(i=d("I64"))).of_int32(n),i.of_int32(h),c("LSFactory")(b))},"readwrite")});return function(){return h.apply(this,arguments)}}();return k(p,[f,g,j,(i||(i=d("I64"))).to_string(m),n])}g["default"]=a}),98);
__d("MWPinMessageMenuItem.react",["fbt","JSResourceForInteraction","MWPinnedMessagesDialogNUXFactoryRequireNUX.react","MWXMenuItem.react","promiseDone","react","useMWPIsMessagePinned","useMWPinnedMessageLimitReached","useMWTogglePinMessage","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("JSResourceForInteraction")("MWPinnedMessageLimitReachedDialog.react").__setRef("MWPinMessageMenuItem.react");function a(a){var b=a.message,d=a.onPinCompleted,e=h._("__JHASH__SDjIWKr-fud__JHASH__"),f=h._("__JHASH__mSiYCxxiHcw__JHASH__"),g=c("useMWPIsMessagePinned")(b),i=c("MWPinnedMessagesDialogNUXFactoryRequireNUX.react")();a=c("useMWXLazyDialog")(k);var l=a[0],m=c("useMWTogglePinMessage")(b,"message_dot_menu"),n=c("useMWPinnedMessageLimitReached")(b.threadKey);a=function(a){return i!=null?i({children:a,dialogProps:{onClose:function(){},pinMessageHandler:function(){return c("promiseDone")(m(),d)}}}):j.jsx(j.Fragment,{children:a(function(){return c("promiseDone")(m(),d)})})};var o=function(a){return j.jsx(c("MWXMenuItem.react"),{onClick:function(d){if(n&&!g)return l({onClose:function(){},threadKey:b.threadKey});!g?a():c("promiseDone")(m())},primaryText:g?f:e})};return a(o)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ForwardMenuItem.bs",["fbt","LSMessagingThreadTypeUtil","MWXMenuItem.react","react","useMWV2MessageForwardAction"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.message;a=a.threadType;var e=d("LSMessagingThreadTypeUtil").isSecure(a);e=c("useMWV2MessageForwardAction")(e,b,a);b=h._("__JHASH__GvPr2MwluxY__JHASH__");return j.jsx(c("MWXMenuItem.react"),{"aria-label":b,onClick:e,primaryText:b,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2RemoveMenuItem.bs",["fbt","I64","Int64Hooks","JSResourceForInteraction","LSDeleteMessage","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","MWCMIsAnyCMThread","MWCMThreadTypes.react","MWPActor.react","MWV2LogMessageClick.bs","MWV2OnlyGlobalRemoveMessageDialog.entrypoint","MWXMenuItem.react","MessengerWebUXLogger","ReQL","ReQLSuspense","WebUserFlowLoggingDataContextProvider.react","gkx","promiseDone","react","useMWXEntryPointDialog","useMWXLazyDialog","useReStore","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;var n=b.useContext,o=b.useRef,p=c("JSResourceForInteraction")("MWV2RemoveMessageDialog.react").__setRef("MWV2RemoveMenuItem.bs");function a(a){var b=a.canRemoveMessageGlobally,e=a.learnMoreOnMessageRemove,g=a.message,l=a.onRemoveMessageLogger,q=a.threadType;a=a.title;var r=(i||(i=c("useReStore")))(),s=h._("__JHASH__xWxZXNnPg5R__JHASH__"),t=g.messageId,u=g.threadKey,v=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(r.table("threads"),["parentThreadKey","threadKey"]).getKeyRange(u)},[r,u],f.id+":74"),w=v==null?void 0:v.parentThreadKey,x=c("MWCMIsAnyCMThread")(q)&&(j||(j=d("I64"))).equal(g.sendStatusV2,(k||(k=d("LSIntEnum"))).ofNumber(4)),y=d("Int64Hooks").useCallbackInt64(function(){c("promiseDone")(r.runInTransaction(function(a){return c("LSDeleteMessage")(u,t,c("LSFactory")(a))},"readwrite"))},[r,u,t]);v=o(null);var z=d("MWPActor.react").useActor(),A=(j||(j=d("I64"))).equal(g.senderId,z);z=d("ReQLSuspense").useFirst(function(){return w!=null?d("ReQL").fromTableAscending(r.table("community_folders"),["fbGroupId"]).getKeyRange(w):d("ReQL").empty()},[r,w],f.id+":106");var B={learnMoreOnMessageRemove:e,message:g,title:a},C={canRemoveMessageGlobally:b,learnMoreOnMessageRemove:e,message:g,removeLogger:l,threadType:q,title:a},D=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger();b=n(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext);var E=b.setLoggingData;l=c("useMWXEntryPointDialog")(c("MWV2OnlyGlobalRemoveMessageDialog.entrypoint"),{groupID:j.to_string((e=z==null?void 0:z.fbGroupId)!=null?e:(j||(j=d("I64"))).zero)});var F=l[0];a=c("useMWXLazyDialog")(p);var G=a[0],H=function(){d("MWCMThreadTypes.react").isJoinedCMThread(q)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(q)||A&&!c("gkx")("9197")?F(B):G(C)};return m.jsx(c("MWXMenuItem.react"),{"aria-label":s,onClick:function(){var a={extraData:{actor_type:A?"sender":"receiver"},flowInstanceId:c("uuidv4")(),threadKey:u,threadType:q};D==null?void 0:D(babelHelpers["extends"]({},a,{eventName:"message_remove_attempt"}));E(a);d("MWV2LogMessageClick.bs").log(r,g,45);return g.subscriptErrorMessage!=null&&x?y():H()},primaryText:h._("__JHASH__hqbvAdrkmFp__JHASH__"),ref:v,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ReplyMenuItem.bs",["fbt","MWPReplyContext.react","MWXMenuItem.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext;function a(a){var b=a.message;a=h._("__JHASH__xFCj85w6vra__JHASH__");var e=k(d("MWPReplyContext.react").MWPReplyContext),f=e.setReply;return j.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:function(){return f({messageId:b.messageId,offlineThreadingId:b.offlineThreadingId,sendStatusV2:b.sendStatusV2,timestampMs:b.timestampMs},b.threadKey)},primaryText:a,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ReportMessageMenuItem.react",["fbt","I64","LSFactory","LSIntEnum","LSInternetConnectionState","LSReportMessageInCommunityChannel","MWXMenuItem.react","ReQL","ReQLSuspense","cometPushToast","promiseDone","react","useMWXConfirmationDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react")),n=l.useCallback;function a(a){var b=a.message,e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("connectivity_status"))},[e],f.id+":37"),l=n(function(){c("promiseDone")(e.runInTransaction(function(a){return c("LSReportMessageInCommunityChannel")(b.threadKey,b.messageId,c("LSFactory")(a))},"readwrite"),function(){g!=null&&(j||(j=d("I64"))).equal(g.internetConnectionState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED))&&d("cometPushToast").cometPushSimpleToast(h._("__JHASH__d_L8PCP9wn0__JHASH__"))})},[e,b,g]),o=c("useMWXConfirmationDialog")();a=n(function(){return o({body:h._("__JHASH__N-iMIiU3yyg__JHASH__"),confirm:h._("__JHASH__m9ILY9EaLLQ__JHASH__"),title:h._("__JHASH__ZQlRxOvru63__JHASH__")},l)},[o,l]);var p=h._("__JHASH__Un1168J6Rxb__JHASH__");return m.jsx(c("MWXMenuItem.react"),{"aria-label":p,onClick:a,primaryText:p,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFRX.entrypoint",["CometFRXQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.conformed_interface_override,e=a.entryPoint,f=a.id,g=a.location;a=a.responsible_id;return{queries:{frx:{parameters:c("CometFRXQuery$Parameters"),variables:{input:{conformed_interface_override:b,entry_point:e,id:f,location:g,responsible_id:a},scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("CometFRX.react").__setRef("CometFRX.entrypoint")};g["default"]=a}),98);
__d("FRXEntryPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTIVITY_LOG:"activity_log",AGORA_GROUPS:"agora_groups",AGORA_RECENT_NEWS:"agora_recent_news",BLOCK_BUTTON:"block_button",BLOCK_COMPOSER:"block_composer",BUSINESS_NOTIFICATION_MESSAGE_REPORT_BUTTON:"business_notification_message_report_button",CHEVRON_BUTTON:"chevron_button",CHEVRON_TAGS:"chevron_tags",COLLEGES_LIVE_CHAT_REPORT_TO_FB:"colleges_live_chat_report_to_fb",COMMENT:"comment",CONTENT_OVERLAY:"content_overlay",CROWDSOURCING_REPORT:"crowdsourcing_report",DELETE_CONTENT_REPORT:"delete_content_report",DELETE_CONVERSATION_REPORT:"delete_conversation_report",DEVELOPER_FEEDBACK_BUTTON:"developer_feedback_button",EVENTS_REPORTING:"events_reporting",FEEDBACK_BUTTON:"feedback_button",FOX_CHEVRON_TAGS:"fox_chevron_tags",GEMSTONE_MEDIA:"gemstone_media",GEMSTONE_MESSAGING:"gemstone_messaging",GEMSTONE_PROFILE:"gemstone_profile",GROUP_MALL_RELATED_GROUPS_CHAINING:"group_mall_related_groups_chaining",GROUP_MALL_RHC:"group_mall_rhc",GROUPS_ADMIN_FEEDBACK:"groups_admin_feedback",GROUPS_DISCOVER:"groups_discover_page",GROUPS_DISCOVER_HIDE_BUTTON:"groups_discover_hide_button",GROUPS_JOIN_QUESTION:"groups_join_question",GROUPS_LEAVE:"groups_leave",GROUPS_LEAVE_BROWSE:"groups_leave_browse",GROUPS_LEAVE_SPECIAL:"groups_leave_special",GROUPS_PARTICIPATION_QUESTION:"groups_participation_question",GROUPS_PENDING_QUEUE:"groups_pending_queue",GROUPS_POLL:"groups_poll",GROUPS_REPORT:"groups_report",GROUPS_REPORT_LONG_PRESS_TO_ADMIN:"groups_report_long_press_to_admin",GROUPS_REPORT_TO_ADMIN:"groups_report_to_admin",GROUPS_RULE:"groups_rule",GROUPS_TAB_CHAT_ROW:"groups_tab_chat_row",GROUPS_TAB_DISCOVER_FIRST:"groups_tab_discover_first",GROUPS_TRANSPARENCY:"groups_transparency",HATE_CTA:"hate_cta",HELP_NAV_BUTTON:"help_nav_button",HIDE_AD_BUTTON:"hide_ad_button",HIDE_AD_XOUT_BUTTON:"hide_ad_xout_button",IN_PROFILE_MEDIA_SELECTOR:"in_profile_media_selector",INSTANT_GAMES_BOT_FEEDBACK_LINK:"instant_games_bot_feedback_link",LEAVE_CONVERSATION_REPORT:"leave_conversation_report",LOCAL_COMMUNITY_DEMOTE_CONTENT:"local_community_demote_content",LOCAL_COMMUNITY_MOD_HUB_DEMOTE:"local_community_mod_hub_demote",LOCAL_COMMUNITY_POST_REPORT_TO_MOD:"local_community_post_report_to_mod",LOCAL_LIVE_CHAT_REPORT_TO_FB:"local_live_chat_report_to_fb",MARK_AS_SOLD_BUTTON:"mark_as_sold_button",MARK_AS_SUSPICIOUS_BUTTON:"mark_as_suspicious_button",MESSAGE_MEDIA_BUBBLE_REPORT:"message_media_bubble_report",MOBILE_GYSJ:"mobile_gysj",NOTIFICATIONS_JEWEL:"notifications_jewel",PAGE_UNFOLLOW:"page_unfollow",PAGE_UNFOLLOW_CHEVRON:"page_unfollow_chevron",PAGE_UNLIKE:"page_unlike",PAGE_VERIFICATION_BADGE_OPTION:"page_verification_badge_option",PAGE_VERIFICATION_PAGE_OPTION:"page_verification_page_option",POLITICAL_AD_VERIFIED_VOICE:"political_ad_verified_voice",PROACTIVE_WARNING_BANNER:"proactive_warning_banner",PROACTIVE_WARNING_COMPOSER_BLOCK:"proactive_warning_composer_block",PROACTIVE_WARNING_POPOVER:"proactive_warning_popover",PROACTIVE_WARNING_STRAP:"proactive_warning_strap",PROFILE_REPORT_BUTTON:"profile_report_button",PROFILE_REPORT_FLOW:"profile_report_flow",PROFILE_SUBMIT_FEEDBACK:"profile_submit_feedback",QUICK_REPORT_ACTION:"quick_report_action",RELATED_SEARCHES:"related_searches",REPORT_AD_BUTTON:"report_ad_button",REPORT_AD_XOUT_BUTTON:"report_ad_xout_button",REPORT_BUTTON:"report_button",REPORT_BUTTON_DETAILED_FRX:"report_button_detailed_frx",REPORT_FROM_PREVIEW:"report_from_preview",REPORT_JOB_BUTTON:"report_job_button",REPORT_LONG_PRESS:"report_long_press",ROOMS_POST_CALL_HIGH_RATING:"rooms_post_call_high_rating",ROOMS_POST_CALL_LOW_RATING:"rooms_post_call_low_rating",ROOMS_POST_CALL_LOW_RATING_DETAILED:"rooms_post_call_low_rating_detailed",SCHOOL_COMMUNITY_TAGS:"school_community_tags",SEARCH_TYPEAHEAD:"search_typeahead",SNACKBAR:"snackbar",STORY_ATTACHMENT_SHARE:"story_attachment_share",STRUCTURED_REPORT_BUTTON:"structured_report_button",THREADLIST_MENU_REPORT:"threadlist_menu_report",TOMBSTONE:"tombstone",TOOLBAR_REPORT_ACTION:"toolbar_report_action",UNKNOWN:"unknown",UNOWNED_PAGE_ACTION_MENU_REPORT_PAGE:"unowned_page_action_menu_report_page",UPSELL_AFTER_BLOCK_BOTTOM_SHEET:"upsell_after_block_bottom_sheet",USER_CONTROL_MENU:"user_control_menu",WORKPLACE_REPORT_AND_HIDE_BUTTON:"workplace_report_and_hide_button",WORKPLACE_REPORT_BUTTON:"workplace_report_button",WORKROOM_REPORT_BUTTON:"workroom_report_button",X_OUT:"x_out"});f["default"]=a}),66);
__d("MWV2ReportMessageToFBMenuItem.react",["CometFRX.entrypoint","MWXMenuItem.react","react","useMWLSMessageReportingToken","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isSubthread;b=b===void 0?!1:b;var d=a.menuItemLabel,e=a.messageId,f=a.onReportLogger;a=a.threadKey;e=c("useMWLSMessageReportingToken")(e,a);a={entryPoint:"report_long_press",id:e,location:b?"messenger_community_messaging_subthread_view":"messenger_community_messaging_group_thread_details"};var g={};e=a;b=c("useMWXEntryPointDialog")(c("CometFRX.entrypoint"),e);var h=b[0],j=function(){return h(g)};return i.jsx(c("MWXMenuItem.react"),{"aria-label":d,onClick:function(){f&&f(),j()},primaryText:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ContextualActionsMenu.react",["fbt","LSMessagingThreadTypeUtil","MWChatMessageBothOrientationFocusGroup.react","MWPinMessageMenuItem.react","MWV2ForwardMenuItem.bs","MWV2RemoveMenuItem.bs","MWV2ReplyMenuItem.bs","MWV2ReportMessageMenuItem.react","MWV2ReportMessageToFBMenuItem.react","MWXMenu.react","MWXPopover.react","WebUXLoggingSurfaceContextProvider","cr:1111","cr:1200","cr:1787","cr:4140","cr:5750","cr:5790","cr:7302","cr:8521","focusScopeQueries","react","useMWEntrypoint","useMWFalcoFeatureEventLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var e=a.attachment,f=a.canRemoveMessageGlobally,g=a.extraActions,i=a.learnMoreOnMessageRemove,k=a.message,l=a.onRemoveMessageLogger,m=a.removeMessageDialogTitle,n=a.showCreatePrompt,o=a.showCreateSubthread,p=a.showEditInContextualMenu,q=a.showFeedbackOptionsInContextualMenu,r=a.showForwardActionInContextualMenu,s=a.showPinMessageActionInContextualMenu,t=a.showReplyActionInContextualMenu,u=a.showReportCommunityMessageToAdmin,v=a.showReportCommunityMessageToFacebook,w=a.showUnsendInContextualMenu;a=a.threadType;var x=c("useMWEntrypoint")(),y=c("useMWFalcoFeatureEventLogger")(k.threadKey,a),z=h._("__JHASH__xVGUtEB2kuN__JHASH__");return j.jsx(c("MWXPopover.react"),{withArrow:!0,children:j.jsx(d("MWChatMessageBothOrientationFocusGroup.react").keyCommands,{children:j.jsx(d("MWChatMessageBothOrientationFocusGroup.react").FocusGroup,{allowModifiers:!0,orientation:"both",preventScrollOnFocus:!1,tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,children:j.jsx(c("MWXMenu.react"),{label:z,size:"full",children:j.jsxs(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"thread_view_message_options",children:[p&&b("cr:8521")?j.jsx(b("cr:8521"),{message:k}):null,w?j.jsx(c("MWV2RemoveMenuItem.bs"),{canRemoveMessageGlobally:f,learnMoreOnMessageRemove:i,message:k,onRemoveMessageLogger:l,threadType:a,title:m}):null,r?j.jsx(c("MWV2ForwardMenuItem.bs"),{message:k,threadType:a}):null,t?j.jsx(c("MWV2ReplyMenuItem.bs"),{message:k}):null,b("cr:5750")!=null&&o?j.jsx(b("cr:5750"),{message:k}):null,n&&e!=null&&b("cr:7302")!=null?j.jsx(b("cr:7302"),{menuItemLabel:h._("__JHASH__HlC08Cr4XB6__JHASH__")}):null,s?j.jsx(c("MWPinMessageMenuItem.react"),{message:k,onPinCompleted:function(){y(x,"pin_message")}}):null,u?j.jsx(c("MWV2ReportMessageMenuItem.react"),{message:k}):null,v?j.jsx(c("MWV2ReportMessageToFBMenuItem.react"),{isSubthread:d("LSMessagingThreadTypeUtil").isCMSubthread(a),menuItemLabel:h._("__JHASH__2SjbZXVdFlO__JHASH__"),messageId:k.messageId,threadKey:k.threadKey}):null,b("cr:5790")?j.jsx(b("cr:5790"),{message:k}):null,b("cr:1200")!=null&&q&&j.jsx(b("cr:1200"),{message:k}),b("cr:1111")!=null&&q&&j.jsx(b("cr:1111"),{message:k}),g,b("cr:4140")?j.jsxs(j.Fragment,{children:[b("cr:1787")&&j.jsx(b("cr:1787"),{}),j.jsx(b("cr:4140"),{message:k})]}):null]})})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecurityAlertsBadgeMenuItem.react",["fbt","CometMenuItem.react","CometNumberedBadge.react","JSResourceForInteraction","MDSIconSizes","MWHouseKeyholeOutlineIcon","MWJewelPopoverDialogContext.react","MWPBumpEntityKey","gkx","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext,l=c("JSResourceForInteraction")("MAWSecurityAlertsDialog.react").__setRef("MAWSecurityAlertsBadgeMenuItem.react");function a(a){a=a.count;var b=c("useMWXLazyDialog")(l),e=b[0];b=k(c("MWJewelPopoverDialogContext.react"));var f=b.setIsOpenForDialog;b=c("gkx")("571");var g=h._("__JHASH__78QW_gAampW__JHASH__");return j.jsx(c("CometMenuItem.react"),{auxItem:{badge:j.jsx(c("CometNumberedBadge.react"),{color:b?"red":"lightBlue",value:a}),type:"numberedBadge"},icon:c("MWHouseKeyholeOutlineIcon"),iconSize:b?d("MDSIconSizes").MDS_MENU_ITEM_ICON_SIZE:20,iconStyle:b?"contained":"normal",id:"security_alerts_badge_menu_item",onClick:function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","security_alerts"),f(!0),e({})},primaryText:g})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecurityAlertsBadgeMenuItemWrapper.react",["MAWSecurityAlertsBadgeMenuItem.react","react","useMAWSecurityAlertsPreferences"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.value;a=c("useMAWSecurityAlertsPreferences")();var d=a.securityAlertsPreferences;return j(function(){return(d==null?void 0:d.allowSecurityAlertForSelf)?i.jsx(c("MAWSecurityAlertsBadgeMenuItem.react"),{count:b}):null},[d==null?void 0:d.allowSecurityAlertForSelf,b])}g["default"]=a}),98);
__d("LSJSONOp",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126});c=a;f["default"]=c}),66);
__d("LSSelectOrder",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["ASC","DESC"]);c=a;f["default"]=c}),66);
__d("LSDatascriptJSONEval",["FBLogger","LS","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return a};return a}function k(a,b,d){if((h||(h=c("isPromise")))(a))return a.then(b,d);try{return b(a)}catch(a){if(d)return d(a);else throw a}}a=function(){function a(a,b,d,e){var f=this;e===void 0&&(e=[]);this.$4={};this.$5=[];this.$6=null;this.$7=function(a){return k(f.$8(a),function(a){return a},function(b){c("FBLogger")("messenger_web_product").catching(b).mustfix("Error evaluating step op: %s",Array.isArray(a)?a[0]:"<primitive value>");throw b})};this.$1=b;this.$2=a;this.$3=d;for(b=0;b<e.length;b++)this.$4[b]=e[b]}var d=a.prototype;d.eval=function(){return this.$2==null?this.$1.resolve([]):this.$1.resolve(this.$7(this.$2.step))};d.$8=function(a){var d=this;if(!Array.isArray(a))return a;var e=a[0];a=a.slice(1);var f=a;switch(e){case 8:return f.map(this.$7);case 2:return this.$4[f[0]];case 3:return k(this.$7(f[1]),function(a){return d.$4[f[0]]=a});case 4:return k(this.$7(f[2]),function(a){var b=f[0],c=f[1];for(var e=0;e<c;e++,b++)d.$4[b]=a[e];return a});case 12:a=f[0];e=f[1];var g=[];for(a=a;a<e;a++)g[a]=this.$4[a];return g;case 1:var h;a=function(a){h=k(h,function(){return d.$7(f[a])})};for(e=0;e<f.length;e++)a(e);return h;case 5:return(g=this.$1).sp.apply(g,f.map(this.$7));case 6:return(e=this.$1).ntop.apply(e,f.map(this.$7));case 7:return(a=this.$1).nop.apply(a,f.map(this.$7));case 9:return;case 10:return Infinity;case 11:return NaN;case 13:return this.$7(f[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(f[0]));case 15:return this.$1.blobs.of_string(this.$7(f[0]));case 16:return this.$1.blob(this.$7(f[0]));case 17:return this.$1.i64.of_float(this.$7(f[0]));case 18:g=this.$7(f[0]);return g!=null?this.$1.i64.to_float(g):void 0;case 19:return this.$1.i64.from_string(this.$7(f[0]));case 70:return this.$1.i64.cast(this.$7(f[0]));case 20:return this.$1.i64.to_string(this.$7(f[0]));case 21:return(e=this.$3)==null?void 0:(a=e.gk)==null?void 0:a[f[0]];case 22:var l;g=f[0];e=f[1];a=f[2];var m=f[3];l=(l=this.$3)==null?void 0:(l=l.qe)==null?void 0:(l=l[g])==null?void 0:(g=l[e])==null?void 0:g[a];if(l==null)return l;switch(m){case"BOOL":case"STR":return l;case"I64":if(typeof l!=="object")throw c("FBLogger")("messenger_web_product").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(l.toString())}return;case 23:if(this.$7(f[0]))return this.$7(f[1]);else if(f[2]!=null)return this.$7(f[2]);return;case 24:return this.$7(f[0])||this.$7(f[1]);case 25:return this.$7(f[0])&&this.$7(f[1]);case 26:return!this.$7(f[0]);case 27:return this.$7(f[0])==null;case 28:return this.$1.notnull(this.$7(f[0]));case 29:return this.$7(f[0])===this.$7(f[1]);case 30:return this.$1.i64.eq(this.$7(f[0]),this.$7(f[1]));case 31:return this.$1.blobs.eq(this.$7(f[0]),this.$7(f[1]));case 32:return this.$7(f[0])!==this.$7(f[1]);case 33:return this.$1.i64.neq(this.$7(f[0]),this.$7(f[1]));case 34:return this.$1.blobs.neq(this.$7(f[0]),this.$7(f[1]));case 35:return this.$7(f[0])>this.$7(f[1]);case 36:return this.$1.i64.gt(this.$7(f[0]),this.$7(f[1]));case 37:return this.$1.blobs.gt(this.$7(f[0]),this.$7(f[1]));case 38:return this.$7(f[0])>=this.$7(f[1]);case 39:return this.$1.i64.ge(this.$7(f[0]),this.$7(f[1]));case 40:return this.$1.blobs.ge(this.$7(f[0]),this.$7(f[1]));case 41:return this.$7(f[0])<this.$7(f[1]);case 42:return this.$1.i64.lt(this.$7(f[0]),this.$7(f[1]));case 43:return this.$1.blobs.lt(this.$7(f[0]),this.$7(f[1]));case 44:return this.$7(f[0])<=this.$7(f[1]);case 45:return this.$1.i64.le(this.$7(f[0]),this.$7(f[1]));case 46:return this.$1.blobs.le(this.$7(f[0]),this.$7(f[1]));case 47:return this.$1["throw"](f[0]);case 48:return this.$1.print(this.$7(f[0]));case 49:e=this.$7(f[0]);g=f[1];a=this.$1.logger(e);switch(g){case"mustfix":return a.mustfix(e);case"info":return a.info(e);case"warn":return a.warn(e);case"debug":return a.debug(e);default:throw c("FBLogger")("messenger_web_product").mustfixThrow("Invalid logger level %s",g)}case 50:return f.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(f[0]));case 51:l=this.$7(f[0]);l.push(this.$7(f[1]));return l;case 52:return this.$1.i64.of_int32(this.$7(f[0]).length);case 53:return new this.$1.Map();case 54:return this.$7(f[0]).get(this.$7(f[1]));case 55:return this.$7(f[0]).set(this.$7(f[1]),this.$7(f[2]));case 56:return this.$7(f[0]).keys();case 57:return this.$7(f[0])["delete"](this.$7(f[1]));case 58:return this.$7(f[0]).has(this.$7(f[1]));case 59:return this.$7(f[0]).join(this.$7(f[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(f[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return this.$1.localizeAsync(this.$7(f[0]),this.$7(f[1]));case 66:return this.$1.localizeV2Async(this.$7(f[0]),this.$7(f[1]));case 68:return this.$7(f[0])+this.$7(f[1]);case 69:return this.$1.i64.add(this.$7(f[0]),this.$7(f[1]));case 71:return(a=this.$3)==null?void 0:(e=a.justknob)==null?void 0:e[f[0]];case 72:return(g=this.$3)==null?void 0:(m=g.iggk)==null?void 0:m[f[0]];case 100:return this.$5[f[0]][f[1]];case 101:if(this.$6==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[f[0]];case 102:return this.$5[this.$7(f[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(f[0]).trim();case 75:return this.$7(f[0]).split(this.$7(f[1])).join(this.$7(f[2]));case 76:return f.map(this.$7).join("");case 77:return this.$1.like(this.$7(f[0]),this.$7(f[1]));case 78:return[0,this.$7(f[0]).length];case 79:l=f.map(this.$7);a=l[0];e=l.slice(1);return e.includes(a);case 80:return this.$7(f[1]).includes(this.$7(f[0]));case 81:return this.$7(f[0])-this.$7(f[1]);case 82:return this.$7(f[0])*this.$7(f[1]);case 83:return this.$7(f[0])/this.$7(f[1]);case 84:return this.$7(f[0])%this.$7(f[1]);case 91:return this.$1.i64.lsl_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 92:return this.$1.i64.lsr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 93:return this.$1.i64.asr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 94:return this.$1.i64.and_(this.$7(f[0]),this.$7(f[1]));case 95:return this.$1.i64.or_(this.$7(f[0]),this.$7(f[1]));case 96:return this.$1.i64.xor(this.$7(f[0]),this.$7(f[1]));case 85:return this.$1.i64.sub(this.$7(f[0]),this.$7(f[1]));case 86:return this.$1.i64.mul(this.$7(f[0]),this.$7(f[1]));case 87:return this.$1.i64.div(this.$7(f[0]),this.$7(f[1]));case 88:return this.$1.i64.mod_(this.$7(f[0]),this.$7(f[1]));case 89:g=f.map(this.$7);var n=g[0];m=g.slice(1);return m.some(function(a){return d.$1.i64.eq(n,a)});case 90:var o=this.$7(f[0]);return this.$7(f[1]).some(function(a){return d.$1.i64.eq(o,a)});case 97:return this.$7(f[0])?this.$7(f[1]):this.$7(f[2]);case 98:l=this.$7(f[0]);e=this.$7(f[1]);return(l||e)&&!(l&&e);case 99:return(a=this.$7(f[0]))!=null?a:this.$7(f[1]);case 103:return;case 104:return b.call(null,f[0]);case 105:g=function(){var b=d.$7(f[0]),e=f[1],g=c("LS").n,a,h=function(b){a=k(a,function(){d.$4[e]=b;return d.$7(f[2])})};for(var l=g(j());d.$1.i64.lt(l,b);l=d.$1.i64.add(l,g(i())))h(l);return{v:a}}();if(typeof g==="object")return g.v;case 106:return this.$7(f[0]);case 107:throw c("FBLogger")("messenger_web_product").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(f[0])};case 109:return{gte:this.$7(f[0])};case 110:return{lt:this.$7(f[0])};case 111:return{lte:this.$7(f[0])};case 112:return f.length===1?this.$7(f[0]):(m=this.$1).merge.apply(m,f.map(this.$7));case 113:l=f[0];e=f[1];a=f.slice(2);g=a.map(this.$7);switch(e){case"ASC":return(m=this.$1.db.table(l)).fetch.apply(m,g);case"DESC":return(a=this.$1.db.table(l)).fetchDesc.apply(a,g)}return;case 114:return this.$1.ftr(this.$7(f[0]),function(a){d.$6=a;a=d.$7(f[1]);d.$6=null;return a});case 115:return(e=this.$1).sb.apply(e,f.map(this.$7));case 116:return this.$1.fe(this.$7(f[0]),function(a){return a["delete"]()});case 117:return this.$1.islc(this.$7(f[0]),0,this.$7(f[1]));case 118:return this.$1.ct(this.$7(f[0]));case 119:return this.$1.db.table(f[0]).peekNextAutoIncrementId();case 120:return this.$1.fe(this.$7(f[0]),function(a){var b=a.item;a=a.update;var c={};d.$6=b;for(b=1;b<f.length;b+=2)c[f[b]]=d.$7(f[b+1]);d.$6=null;return a(c)});case 121:m=f[0];l={};for(a=1;a<f.length;a+=2)l[f[a]]=this.$7(f[a+1]);return this.$1.db.table(m).add(l);case 122:g=f[0];e={};for(a=1;a<f.length;a+=2)e[f[a]]=this.$7(f[a+1]);return this.$1.db.table(g).put(e);case 123:return this.$1.fe(this.$7(f[0]),function(a){a=a.item;d.$5[f[1]]=a;return d.$7(f[2])});case 124:return this.$7(f[0]).next().then(function(a){var b=a.done;a=a.value;if(b)return d.$7(f[3]);else{b=f[1];if(b!=null){d.$5[b]=a.item;return d.$7(f[2])}}return 0});case 125:return this.$7(f[0]).slice(0,this.$7(f[1]));case 126:return this.$1.gb(this.$7(f[0]),f[1]).forEach(function(a){d.$5[f[2]]=a;return d.$7(f[3])})}};return a}();g["default"]=a}),98);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";var h;d={createScript:function(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];d.forEach(function(a){if(typeof window!=="undefined"&&typeof window.trustedTypes!=="undefined"&&!window.trustedTypes.isScript(a))throw c("err")("Trusted Function requires TrustedScripts args only.")});var f=d.slice(0,-1).join(","),g=d.pop().toString();return"(function anonymous(\n     "+f+"\n     ) {\n     "+g+"\n     })"}};var i=c("TrustedTypes").createPolicy("unsafe-function-do-not-use",d);function b(){for(var b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];if(c("TrustedTypes").isSupportedNatively()&&(h||(h=c("Env"))).useTrustedTypes){var f=i.createScript.apply(i,[""].concat(d));return a.eval(f)}else return babelHelpers.construct(Function,d)}g.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=i;g.createTrustedFunction=b}),98);
__d("LSDatascriptEvaluator",["FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var e=function(b){return function(c,d){var e;return a==null?void 0:(e=a.qe)==null?void 0:(e=e[c])==null?void 0:(c=e[b])==null?void 0:c[d]}},f=new Proxy({getBool:e("fb"),getNumber:e("fb"),getString:e("fb")},{get:function(a,b){return b in a?a[b]:{getBool:e(b),getNumber:e(b),getString:e(b)}}}),g=function(b){var c;return a==null?void 0:(c=a.gk)==null?void 0:c[b]};g.ig=function(b){var c;return a==null?void 0:(c=a.iggk)==null?void 0:c[b]};var h={getBool:function(b){var c;return a==null?void 0:(c=a.justknob)==null?void 0:c[b]}};return function(a){var e;e=d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((e=c("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),e.createScript("qex"),e.createScript("justknobx"),e.createScript("return "+b));return e(g,f,h)(c("LSFactory")(a))}}function i(a,b){var d=JSON.parse(b),e=(b=a)!=null?b:{gk:{},iggk:{},justknob:{},qe:{}};return function(a){return new(c("LSDatascriptJSONEval"))(d,c("LSFactory")(a),e).eval()}}function j(a,b,d){if(d==null){c("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!");return h(a,b)}switch(d){case 3:return i(a,b);case 2:return h(a,b);case 1:throw c("FBLogger")("messenger_web_product","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function a(a){return function(b){if(b==null)throw c("FBLogger")("messenger_comet").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(e){var f=e.experiments,g=e.priority,h=e.syncScript;e=e.target;f=f!=null?JSON.parse(f):null;try{var i=j(f,h,e);return b.runInTransaction(function(b){a&&a();return i(b)},"readwrite",g)}catch(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");c("FBLogger")("messenger_web_product").catching(a).mustfix("Error executing sync script");throw a}}}}a.__debugModuleName="LSDatascriptEvaluator";g.default=a}),98);
__d("LsDataTraceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743851");b=d("FalcoLoggerInternal").create("ls_data_trace",a);e=b;g["default"]=e}),98);
__d("LSDataTraceFlush",["ArmadilloDataTraceType","I64","LSDataTraceType","LSIntEnum","LsDataTraceFalcoEvent","ODS","Promise","ReQL","asyncToGeneratorRuntime","clearTimeout","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||(i=d("I64"))).of_string("120000"),m=i.of_string("600000"),n=new Set(["encrypted_backups_upload","encrypted_backups_media_backup"]);function o(a,b,c){var e=a.length;if(e===0)return[(i||(i=d("I64"))).neg_one,i.neg_one,void 0,void 0,void 0];e=a.find(function(a){return a.errorMessage!=null});e=e==null?void 0:e.errorMessage;a=a[a.length-1|0];var f=(i||(i=d("I64"))).of_float(Date.now()),g=a.timestampMs,h=i.compare(i.sub(f,c),l)>=0;return!b&&h?[(i||(i=d("I64"))).sub(f,c),a.checkPointId,g,e,"trace expired"]:[i.sub(g,c),a.checkPointId,g,e,e]}function p(a){return a.reduce(function(a,b,c){var e,f=(i||(i=d("I64"))).to_string(b.checkPointId),g=b.timestampMs;e=i.to_string((e=b.syncChannel)!=null?e:(i||(i=d("I64"))).neg_one);b=b.tags;b=b!=null?","+b:"";if(c===0)a.pointsList="".concat("(",f,",",e,b,")");else{c=String((i||(i=d("I64"))).to_int32(i.sub(g,a.lastCheckPointTimestamp)));a.pointsList=a.pointsList.concat("-",c,"-(",f,",",e,b,")")}a.lastCheckPointTimestamp=g;return a},{lastCheckPointTimestamp:(i||(i=d("I64"))).zero,pointsList:""}).pointsList}var q=i.of_string("2");function r(a){var b=a.traceType;b=(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK))?"send":(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceType").armadilloMessageSend)?"armadillo send":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_INIT))?"encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_ADD_DEVICE))?"encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD))?"encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE))?"encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_BACKUP))?"encrypted_backups_media_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SYNC_EPOCHS))?"encrypted_backups_sync_epochs":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_LOGIN))?"sap_vesta_login":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_REGISTRATION))?"sap_vesta_registration":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP))?"encrypted_backups_opt_out_of_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA))?"encrypted_backups_fetch_backups_metadata":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE))?"encrypted_backups_create_extra_virtual_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS))?"encrypted_backups_fetch_backup_status":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION))?"encrypted_backups_third_party_id_generation":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_RESTORE))?"encrypted_backups_media_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_DELETE_BACKUP))?"encrypted_backups_delete_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_INIT))?"shadow_encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE))?"shadow_encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_UPLOAD))?"shadow_encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_RESTORE))?"shadow_encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP))?"shadow_encrypted_backups_delete_backup":a.contextTwo;return b}function s(a,b){var e=b.traceId,f=b.shouldFlush,g=r(b),h=b.traceType,j=(i||(i=d("I64"))).equal(h,d("ArmadilloDataTraceType").armadilloMessageSend)?"tam_message_send":b.contextOne,k=(i||(i=d("I64"))).equal(b.traceType,q)?void 0:b.predefinedId,l=b.initTimestampMs;return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("data_trace_addon").index("traceIdAddonId")).getKeyRange(e)).then(function(a){var b=o(a,f,l),h=b[0],m=b[1],n=b[3],q=b[4],r=a.length,s=p(a);c("LsDataTraceFalcoEvent").log(function(){var a;return{check_point_count:(i||(i=d("I64"))).to_string(i.of_int32(r)),check_point_list:s,client_event_ts:i.to_string(i.of_float(Date.now())),cold_start_time:void 0,data_trace_id:e,database_id:j,delivered_messages:void 0,error_message:q,first_error_message:n,has_backgrounded:!1,last_check_point:i.to_string(m),latency:i.to_string(h),media_type:void 0,num_of_attachments:void 0,persisted_metadata:void 0,predefined_id:k,sent_rich_media_messages:void 0,sent_text_messages:void 0,start_time:i.to_string(l),trace_flow:(a=g)!=null?a:""}})}).then(function(){return a.table("data_trace_meta")["delete"]({hd:e,tl:0})})}function a(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("data_trace_meta")).getKeyRange(c)).then(function(c){if(c!=null)return s(a,c);else return(h||(h=b("Promise"))).resolve()})}var t={contents:void 0};function u(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("data_trace_meta").index("shouldFlushInitTimestampMsTraceId")).getKeyRange(!1).bounds({lt:d("ReQL").key((i||(i=d("I64"))).sub(i.of_float(Date.now()),l))})).then(function(a){if(c("gkx")("7110")){var b=(i||(i=d("I64"))).of_float(Date.now());return a.filter(function(a){var c=r(a);if(c&&n.has(c)){c=(i||(i=d("I64"))).compare(i.sub(b,a.initTimestampMs),m)>=0;return c}return!0})}return a})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield u(a));if(c.length===0)return;return a.runInTransaction(function(a){return u(a).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return s(a,b)}))})},"readwrite")});return w.apply(this,arguments)}function x(){var a=t.contents;if(a!=null){c("clearTimeout")(a);return}}function y(a){c("promiseDone")(v(a),function(){x();var b=c("setTimeout")(function(){y(a)},6e4);t.contents=b},function(){x(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mw_trace","error")});return x}e=a;f=y;g.flush=e;g.flushExpiredDataTraces=f}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f,g){var h=c("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(a,b){return new Uint8Array(Array.prototype.slice.call(this,a,b))}});c={};var i=h.lowlevel,j=i.gf([1]);function k(){return[i.gf(),i.gf(),i.gf(),i.gf()]}var l=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),m=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function n(a,b,c){var d=new Float64Array(64);for(var e=0;e<32;e++)for(var f=0;f<32;f++)d[e+f]+=b[e]*c[f];i.modL(a,d)}function o(a,b){n(a,b,b)}function p(a,b){for(var c=0;c<32;c++)a[c]=b[c];for(c=251;c>=0;c--)o(a,a),(m[c>>3]>>(c&7)&1)!==0&&n(a,a,b)}var q=i.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),r=i.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),s=i.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),t=i.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),u=i.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function v(a){var b=new Uint8Array(32);i.pack25519(b,a);a=1;for(var c=0;c<32;c++)a&=b[c]===0;return a}function w(a,b,c){var d;c=-c;for(var e=0;e<16;e++)d=a[e]^b[e],d&=c,a[e]^=d}function x(a){var b=new Uint8Array(32);i.pack25519(b,a);return b[0]&1}function y(a,b){i.Z(a,i.gf(),b)}function z(a,b,c){var d=i.gf();y(d,b);i.set25519(a,b);w(a,d,c)}function A(a,b){z(a,b,x(b))}function B(a,b,c){var d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),j=i.gf();i.S(d,c);i.M(d,d,c);i.S(a,d);i.M(a,a,c);i.M(a,a,b);i.pow2523(a,a);i.M(a,a,d);i.M(a,a,b);i.S(e,a);i.M(e,e,c);i.Z(f,e,b);i.A(g,e,b);i.M(h,b,q);i.A(h,e,h);d=v(f);c=v(g);b=v(h);i.M(j,a,q);w(a,j,c|b);A(a,a);return d|c}function C(a){var b=i.gf(),c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),r=i.gf(),t=i.gf(),u=i.gf(),v=i.gf(),y=0,C=new Uint8Array(32);i.A(m,a[2],a[1]);i.Z(v,a[2],a[1]);i.M(m,m,v);i.M(n,a[0],a[1]);i.S(o,n);i.M(o,m,o);B(f,j,o);i.M(b,f,m);i.M(c,f,n);i.M(u,b,c);i.M(u,u,a[3]);i.M(g,a[0],q);i.M(h,a[1],q);i.M(e,b,s);i.M(l,a[3],u);y=x(l);p=i.gf(a[0]);r=i.gf(a[1]);d=i.gf(c);w(p,h,y);w(r,g,y);w(d,e,y);i.M(t,p,u);z(r,r,x(t));i.Z(k,a[2],r);i.M(k,d,k);A(k,k);i.pack25519(C,k);return C}function D(a){var b=a[31]&127^127;for(var c=30;c>0;c--)b|=a[c]^255;b=(b|0>>>0)-1>>8;c=237-1-(a[0]|0>>>0)>>8;return 1-((b&c|a[0])&1|(a[31]&255)>>7)}function E(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf();if(D(b)===0)return-1;i.unpack25519(e,b);i.S(f,e);i.set25519(g,j);i.Z(g,g,f);i.S(k,g);i.set25519(h,j);i.A(h,h,f);i.S(l,h);i.M(m,i.D,k);y(m,m);i.Z(m,m,l);i.M(n,m,l);i.set25519(d,j);b=B(c,d,n);i.M(a[0],c,h);i.M(a[1],c,a[0]);i.M(a[1],a[1],m);i.M(a[0],a[0],e);i.A(a[0],a[0],a[0]);A(a[0],a[0]);i.M(a[1],g,a[1]);i.set25519(a[2],j);i.M(a[3],a[0],a[1]);return-(1-b|x(a[3])|v(a[1]))}function F(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),s=i.gf(),v=i.gf();i.set25519(e,j);i.S(f,b);i.M(f,q,f);i.A(m,f,e);i.M(m,m,t);i.set25519(c,j);y(c,c);i.A(g,f,i.D);i.M(n,f,i.D);i.Z(n,c,n);i.M(n,n,g);g=1-B(h,m,n);i.M(k,h,b);A(k,k);y(k,k);w(h,k,g);w(c,f,g);i.Z(d,f,e);i.M(d,d,c);i.M(d,d,u);i.Z(d,d,n);i.A(o,h,h);i.M(o,o,n);i.M(p,d,r);i.S(l,h);i.Z(s,e,l);i.A(v,e,l);i.M(a[0],o,v);i.M(a[1],s,p);i.M(a[2],p,v);i.M(a[3],o,s)}function G(a){var b=i.gf(),c=i.gf(),d=k(),e=k();i.unpack25519(b,a.slice(0,32));i.unpack25519(c,a.slice(32,64));F(d,b);F(e,c);i.add(d,e);return d}function a(a){var b=k();i.scalarbase(b,a);return C(b)}function b(a,b){var c=k(),d=k();if(E(c,b)!==0)throw new Error("Invalid argument");i.scalarmult(d,c,a);return C(d)}function d(a){var b=k();return E(b,a)===-1?!1:!0}function H(a,b){var c=k(),d=k();if(E(c,a)===-1)throw new Error("Invalid argument");if(E(d,b)===-1)throw new Error("Invalid argument");return[c,d]}function e(a,b){a=H(a,b);b=a[0];a=a[1];i.add(b,a);return C(b)}function I(a,b){var c=i.gf();y(c,b[3]);var d=i.gf();y(d,b[0]);d=[d,b[1],b[2],c];i.add(a,d)}function g(a,b){a=H(a,b);b=a[0];a=a[1];I(b,a);return C(b)}function J(){var a=h.randomBytes(64);return G(a)}function K(a){return C(G(a))}function L(){return C(J())}function M(){var a;new Uint8Array(32);var b=0;do{a=h.randomBytes(32);a[31]&=31;var c=32,d=1;do c--,b|=a[c]-i.L[c]>>8&d,d&=(a[c]^i.L[c])-1>>8;while(c!==0)}while(b===0);return a}function N(a){var b=new Uint8Array(32);p(b,a);return b}function O(a){var b=new Float64Array(64);for(var c=0;c<32;c++)b[c]=-a[c];c=new Uint8Array(32);i.modL(c,b);return c}function P(a,b){var c=new Float64Array(64);for(var d=0;d<32;d++)c[d]=a[d]+b[d];d=new Uint8Array(32);i.modL(d,c);return d}function Q(a,b){return P(a,O(b))}function R(a,b){var c=new Uint8Array(32);n(c,a,b);return c}c.scalarMultBase=a;c.scalarMult=b;c.isValid=d;c.add=e;c.sub=g;c.fromHash=K;c.getRandom=L;c.basePoint=l;c.scalar={};c.scalar.getRandom=M;c.scalar.invert=N;c.scalar.negate=O;c.scalar.add=P;c.scalar.sub=Q;c.scalar.mul=R;c.unsafe={};c.unsafe.point={};c.unsafe.point.toBytes=C;c.unsafe.point.fromBytes=E;c.unsafe.point.fromHash=G;c.unsafe.point.sub=I;c.unsafe.point.add=i.add;c.unsafe.point.scalarMultBase=i.scalarbase;c.unsafe.point.scalarMult=i.scalarmult;c.unsafe.point.getRandom=J;c.unsafe.point.alloc=k;c.unsafe.constants={};c.unsafe.constants.LSub2=m;c.unsafe.constants.sqrtm1=q;c.unsafe.constants.sqrtadm1=r;c.unsafe.constants.invsqrtamd=s;c.unsafe.constants.onemsqd=t;c.unsafe.constants.sqdmone=u;f.exports=c}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(a,b,c,d,e,f){e.exports=b("ristretto255-0.1.1")}),null);
__d("Ristretto255.bs",["ristretto255"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("ristretto255").fromHash(a)}function b(a,b){return c("ristretto255").scalarMult(a,b)}g.scalar=c("ristretto255").scalar;g.fromHash=a;g.scalarMult=b}),98);
__d("MDSHouseKeyholeSvgIcon.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);return i.jsxs("svg",babelHelpers["extends"]({},a,{"aria-hidden":"true",viewBox:"0 0 36 36",children:[b!=null&&i.jsx("defs",{children:b}),i.jsx("path",{clipRule:"evenodd",d:"M16.162 7.624a3 3 0 0 1 3.676 0l9.642 7.473a1.342 1.342 0 0 1-.822 2.403H27.25a.25.25 0 0 0-.25.25v8.75a2 2 0 0 1-2 2H11a2 2 0 0 1-2-2v-8.75a.25.25 0 0 0-.25-.25H7.342a1.342 1.342 0 0 1-.822-2.403l9.642-7.473Zm3.532 10.852c-.203.139-.314.387-.242.622l1.514 4.932a.75.75 0 0 1-.718.97h-4.497a.75.75 0 0 1-.717-.97l1.514-4.932c.072-.235-.04-.483-.242-.622a3 3 0 1 1 3.388 0Z",fillRule:"evenodd"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MDSLockSvgIcon.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);return i.jsxs("svg",babelHelpers["extends"]({},a,{"aria-hidden":"true",viewBox:"0 0 36 36",children:[b!=null&&i.jsx("defs",{children:b}),i.jsx("path",{clipRule:"evenodd",d:"M12.25 15.5a.25.25 0 00.25-.25V12a5.5 5.5 0 1111 0v3.25c0 .138.112.25.25.25h.75a2 2 0 012 2v9a2 2 0 01-2 2h-13a2 2 0 01-2-2v-9a2 2 0 012-2h.75zm3 0h5.5a.25.25 0 00.25-.25V12a3 3 0 10-6 0v3.25c0 .138.112.25.25.25z",fillRule:"evenodd"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MDSShieldCheckSvgIcon.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);return i.jsxs("svg",babelHelpers["extends"]({},a,{"aria-hidden":"true",viewBox:"0 0 36 36",children:[b!=null&&i.jsx("defs",{children:b}),i.jsx("path",{clipRule:"evenodd",d:"M7.5 11.928c0-.568.32-1.091.84-1.318.809-.351 1.652-.655 2.529-.972 1.918-.692 4.001-1.444 6.247-2.88a1.644 1.644 0 0 1 1.768 0c2.246 1.436 4.329 2.188 6.247 2.88.877.317 1.72.621 2.529.973.52.226.84.75.84 1.318v.073C28.5 23 21 29 18 29S7.5 23 7.5 12.002v-.074Zm15.175 4.163a1.25 1.25 0 1 0-1.85-1.682l-3.942 4.336a.25.25 0 0 1-.361.009l-1.388-1.388a1.25 1.25 0 0 0-1.768 1.768l2.5 2.5a1.25 1.25 0 0 0 1.809-.043l5-5.5Z",fillRule:"evenodd"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWPReplyLogging",["I64","QPLUserFlow","deepEquals","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function j(a){var b=Date.now()|0;i.set((h||(h=d("I64"))).to_string(a),b);return b}function k(a){var b=i.get((h||(h=d("I64"))).to_string(a));if(b==null)return j(a);else return b}function a(a,b,e){if(e){a?c("QPLUserFlow").endCancel(c("qpl")._(25298086,"3996"),{instanceKey:k(b)}):c("QPLUserFlow").endSuccess(c("qpl")._(25298086,"3996"),{instanceKey:k(b)});i["delete"]((h||(h=d("I64"))).to_string(b));return}}function b(a,b,d){if(a!=null){if(c("deepEquals")(a,b)){c("QPLUserFlow").addPoint(c("qpl")._(25298086,"3996"),"same_message",{instanceKey:k(d)});return}if(!c("deepEquals")(a,b)){a=k(d);c("QPLUserFlow").addPoint(c("qpl")._(25298086,"3996"),"switch_message",{instanceKey:a});c("QPLUserFlow").endCancel(c("qpl")._(25298086,"3996"),{instanceKey:a});c("QPLUserFlow").start(c("qpl")._(25298086,"3996"),{cancelOnUnload:!0,instanceKey:j(d),timeoutInMs:6e4});return}}c("QPLUserFlow").start(c("qpl")._(25298086,"3996"),{cancelOnUnload:!0,instanceKey:j(d),timeoutInMs:6e4})}g.logClearReply=a;g.logSetReply=b}),98);
__d("ZenonUserActionLoggerCommon",["cr:11085"],(function(a,b,c,d,e,f,g){"use strict";g.logClick=b("cr:11085").logClick,g.logImpression=b("cr:11085").logImpression}),98);
__d("MLCHealthLoggerEvent",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DAILY_INTERACTION_WITH_SURFACE:"daily_interaction_with_surface",COMMIT_CREATE:"commit_create",COMMIT_EDIT:"commit_edit"});c=a;f["default"]=c}),66);
__d("MlcHealthBizappEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2646");b=d("FalcoLoggerInternal").create("mlc_health_bizapp_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthCareerProfileEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3833");b=d("FalcoLoggerInternal").create("mlc_health_career_profile_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthFacebookAndWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2647");b=d("FalcoLoggerInternal").create("mlc_health_facebook_and_workplace_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthFacebookEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2648");b=d("FalcoLoggerInternal").create("mlc_health_facebook_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthInstagramEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3766");b=d("FalcoLoggerInternal").create("mlc_health_instagram_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthInternalToolsEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2649");b=d("FalcoLoggerInternal").create("mlc_health_internal_tools_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthMessagingLightswitchEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2650");b=d("FalcoLoggerInternal").create("mlc_health_messaging_lightswitch_event",a);e=b;g["default"]=e}),98);
__d("MlcHealthWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2651");b=d("FalcoLoggerInternal").create("mlc_health_workplace_event",a);e=b;g["default"]=e}),98);
__d("MLCHealthInstrumentationPlugin__INTERNAL.react",["FBLogger","Lexical","LexicalComposerContext","LexicalUtils","MLCInstrumentationCommands","MlcHealthBizappEventFalcoEvent","MlcHealthCareerProfileEventFalcoEvent","MlcHealthFacebookAndWorkplaceEventFalcoEvent","MlcHealthFacebookEventFalcoEvent","MlcHealthInstagramEventFalcoEvent","MlcHealthInternalToolsEventFalcoEvent","MlcHealthMessagingLightswitchEventFalcoEvent","MlcHealthWorkplaceEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect,j=new Set();function k(a){switch(a){case"facebook":return c("MlcHealthFacebookEventFalcoEvent");case"workplace":return c("MlcHealthWorkplaceEventFalcoEvent");case"facebook_and_workplace":return c("MlcHealthFacebookAndWorkplaceEventFalcoEvent");case"internal_tools":return c("MlcHealthInternalToolsEventFalcoEvent");case"messaging_lightswitch":return c("MlcHealthMessagingLightswitchEventFalcoEvent");case"bizapp":return c("MlcHealthBizappEventFalcoEvent");case"instagram":return c("MlcHealthInstagramEventFalcoEvent");case"career_profile":return c("MlcHealthCareerProfileEventFalcoEvent");default:a}throw c("FBLogger")("lexical").mustfixThrow("Policy product not handled by exhaustive switch-case?")}function l(a,b,c){k(a).log(function(){return{event:c,surface:b}})}function a(a){var b=a.editor__DEPRECATED,c=a.policyProduct,e=a.surface,f;if(b)f=b;else{a=d("LexicalComposerContext").useLexicalComposerContext();f=a[0]}i(function(){var a=function(){};j.has(e)||(a=f.registerUpdateListener(function(b){var d=b.dirtyLeaves;b=b.tags;if(j.has(e)){a();return}if(d.size===0||b.has("history-merge")||!f.isEditable())return;j.add(e);l(c,e,"daily_interaction_with_surface");a()}));return d("LexicalUtils").mergeRegister(a,f.registerCommand(d("MLCInstrumentationCommands").COMMIT_COMMAND,function(a){a==="create"?l(c,e,"commit_create"):l(c,e,"commit_edit");return!1},d("Lexical").COMMAND_PRIORITY_CRITICAL))},[f,c,e]);return null}g["default"]=a}),98);
__d("MLCInteractionInstrumentationPlugin__INTERNAL.react",["cr:3286","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return b("cr:3286")&&i.jsx(b("cr:3286"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MLCTypingPerformancePlugin__INTERNAL.react",["LexicalComposerContext","LexicalText","cr:2012305","cr:308","cr:3287","cr:5452","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useLayoutEffect,k=b("cr:2012305")||b("cr:308");e=(c=b("cr:5452"))!=null?c:{};var l=e.getTextLengthBucket;function a(a){if(k===null)return null;b("cr:3287")&&b("cr:3287")();return i.jsx(m,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";function m(a){var b=a.editor__DEPRECATED,c=a.format__DEPRECATED,e=a.surface;a=a.typingPerformanceID;var f=a===void 0?"":a,g;if(b)g=b;else{a=d("LexicalComposerContext").useLexicalComposerContext();g=a[0]}j(function(){var a=babelHelpers["extends"]({},l==null?null:{textLengthBucket:l(g.getEditorState().read(d("LexicalText").$rootTextContent).length)}),b;h();function h(){b==null?void 0:b();if(k===null)return;var d=null,h=g.registerRootListener(function(b){if(b===d)return;d!==null&&k.unregisterTypingPerf(d);if(b!==null){var g;k.trackTypingPerf(b,e,d,babelHelpers["extends"]({},a,{editor:"LexicalEditor",format:(g=c)!=null?g:"",typingPerformanceID:f}))}d=b});b=function(){h(),d!==null&&k.unregisterTypingPerf(d)}}var i=l==null?null:g.registerTextContentListener(function(b){b=l(b.length);if(b===a.textLengthBucket)return;a.textLengthBucket=b;h()});return function(){b==null?void 0:b(),i==null?void 0:i()}},[f,g,c,e]);return null}g["default"]=a}),98);
__d("MLCInstrumentationPlugin__INTERNAL.react",["MLCHealthInstrumentationPlugin__INTERNAL.react","MLCInteractionInstrumentationPlugin__INTERNAL.react","MLCTypingPerformancePlugin__INTERNAL.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b="facebook";b;function a(a){return i.jsxs(i.Fragment,{children:[i.jsx(c("MLCTypingPerformancePlugin__INTERNAL.react"),babelHelpers["extends"]({},a)),i.jsx(c("MLCHealthInstrumentationPlugin__INTERNAL.react"),babelHelpers["extends"]({},a)),i.jsx(c("MLCInteractionInstrumentationPlugin__INTERNAL.react"),babelHelpers["extends"]({},a))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ArmadilloCutoverClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("699");b=d("FalcoLoggerInternal").create("armadillo_cutover_client",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupTaskIssuedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5726");b=d("FalcoLoggerInternal").create("encrypted_backup_task_issued",a);e=b;g["default"]=e}),98);
__d("MessengerWellbeingRestrictFailedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("474");b=d("FalcoLoggerInternal").create("messenger_wellbeing_restrict_failed",a);e=b;g["default"]=e}),98);
__d("MessengerWellbeingRestrictSucceededFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("480");b=d("FalcoLoggerInternal").create("messenger_wellbeing_restrict_succeeded",a);e=b;g["default"]=e}),98);
__d("MessengerWellbeingRestrictTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("481");b=d("FalcoLoggerInternal").create("messenger_wellbeing_restrict_tapped",a);e=b;g["default"]=e}),98);
__d("MessengerWellbeingUnrestrictFailedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("482");b=d("FalcoLoggerInternal").create("messenger_wellbeing_unrestrict_failed",a);e=b;g["default"]=e}),98);
__d("MessengerWellbeingUnrestrictSucceededFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("483");b=d("FalcoLoggerInternal").create("messenger_wellbeing_unrestrict_succeeded",a);e=b;g["default"]=e}),98);
__d("MessengerWellbeingUnrestrictTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("484");b=d("FalcoLoggerInternal").create("messenger_wellbeing_unrestrict_tapped",a);e=b;g["default"]=e}),98);
__d("MessageThreadEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5034");b=d("FalcoLoggerInternal").create("message_thread_events",a);e=b;g["default"]=e}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4148");b=d("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",a);e=b;g["default"]=e}),98);
__d("MessengerDiscoverableChatClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1254");b=d("FalcoLoggerInternal").create("messenger_discoverable_chat_client_events",a);e=b;g["default"]=e}),98);